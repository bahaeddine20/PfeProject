<?xml version="1.0" encoding="UTF-8"?>
<robot generator="Robot 7.2.2 (Python 3.12.5 on win32)" generated="2025-06-11T11:38:45.110419" rpa="false" schemaversion="5">
<suite id="s1" name="TestsAudio" source="C:\Users\bahae\Documents\PfeProject\test_cases\TestsAudio.robot">
<kw name="Démarrer Driver" type="SETUP">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:38:49.000951" level="INFO">Tentative d'initialisation du driver Appium...</msg>
<arg>Tentative d'initialisation du driver Appium...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:38:49.000951" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:38:49.000951" level="INFO">URL Appium: C:\Users\bahae\Documents\PfeProject\test_cases\..\config.py</msg>
<arg>URL Appium: C:\\Users\\bahae\\Documents\\PfeProject\\test_cases${/}..${/}config.py</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:38:49.000951" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Ignore Error" owner="BuiltIn">
<kw name="Setup Driver" owner="Integration">
<arg>${Device}</arg>
<doc>Initialise et retourne le driver Appium.</doc>
<status status="PASS" start="2025-06-11T11:38:49.000951" elapsed="3.029635"/>
</kw>
<msg time="2025-06-11T11:38:52.030586" level="INFO">${result} = ('PASS', &lt;appium.webdriver.webdriver.WebDriver (session="af96f052-0c69-4f08-b714-653485c5dc97")&gt;)</msg>
<var>${result}</var>
<arg>setup driver</arg>
<arg>${Device}</arg>
<doc>Runs the given keyword with the given arguments and ignores possible error.</doc>
<status status="PASS" start="2025-06-11T11:38:49.000951" elapsed="3.029635"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2025-06-11T11:38:52.031585" level="INFO">${status} = PASS</msg>
<msg time="2025-06-11T11:38:52.031585" level="INFO">${driver} = &lt;appium.webdriver.webdriver.WebDriver (session="af96f052-0c69-4f08-b714-653485c5dc97")&gt;</msg>
<var>${status}</var>
<var>${driver}</var>
<arg>${result}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2025-06-11T11:38:52.031585" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="'${status}' == 'FAIL'">
<kw name="Log" owner="BuiltIn">
<arg>Échec de l'initialisation du driver: ${driver}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:38:52.031585" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<arg>Impossible d'initialiser le driver Appium: ${driver}</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="NOT RUN" start="2025-06-11T11:38:52.031585" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:38:52.031585" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-06-11T11:38:52.031585" elapsed="0.000000"/>
</if>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:38:52.031585" level="INFO">${driver} = &lt;appium.webdriver.webdriver.WebDriver (session="af96f052-0c69-4f08-b714-653485c5dc97")&gt;</msg>
<arg>${driver}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:38:52.031585" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:38:52.032613" level="INFO">Driver Appium initialisé avec succès</msg>
<arg>Driver Appium initialisé avec succès</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:38:52.031585" elapsed="0.001028"/>
</kw>
<status status="PASS" start="2025-06-11T11:38:49.000325" elapsed="3.032288"/>
</kw>
<test id="s1-t1" name="Test fgdya" line="236">
<kw name="Close Activity Robot" owner="Integration">
<msg time="2025-06-11T11:38:53.666920" level="INFO">Échec de terminateApp: Message: The following required parameter is missing: ["appId"]
Known required parameters are: ["appId"]
Known optional parameters are: ["timeout"]
You have provided none
Stacktrace:
BadParametersError: The following required parameter is missing: ["appId"]
Known required parameters are: ["appId"]
Known optional parameters are: ["timeout"]
You have provided none
    at checkParams (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\protocol\protocol.js:155:9)
    at validateExecuteMethodParams (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\protocol\protocol.js:242:5)
    at AndroidUiautomator2Driver.executeMethod (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\basedriver\commands\execute.ts:34:45)
    at AndroidUiautomator2Driver.execute (C:\Users\bahae\.appium\node_modules\appium-uiautomator2-driver\node_modules\appium-android-driver\lib\commands\execute.js:17:23)
    at runCommandPromise (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\basedriver\driver.ts:115:20)
    at C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:171:12
    at AsyncLock._promiseTry (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:306:31)
    at exec (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:170:9)
    at AsyncLock.acquire (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:189:3)
    at AndroidUiautomator2Driver.executeCommand (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\basedriver\driver.ts:159:39)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at defaultBehavior (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\lib\appium.js:787:14)
    at AppiumDriver.executeWrappedCommand (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\lib\appium.js:900:16)
    at AppiumDriver.executeCommand (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\lib\appium.js:799:17)
    at asyncHandler (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\protocol\protocol.js:387:19)
Touche HOME pressée
Application com.example.audioapplicationtest fermée avec force-stop
Application com.example.audioapplicationtest fermée avec succès</msg>
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest</arg>
<doc>Version de close_activity adaptée pour Robot Framework.
Utilise plusieurs méthodes pour s'assurer que l'application est bien fermée.</doc>
<status status="PASS" start="2025-06-11T11:38:52.032613" elapsed="1.634307"/>
</kw>
<status status="PASS" start="2025-06-11T11:38:52.032613" elapsed="1.635324"/>
</test>
<test id="s1-t2" name="Test Audio Recording And Playback" line="239">
<kw name="Close Activity" owner="Integration">
<msg time="2025-06-11T11:38:53.675473" level="INFO">Erreur lors de la fermeture de l'application com.example.audioapplicationtest/.AudioPlayerActivity: Message: The following required parameter is missing: ["appId"]
Known required parameters are: ["appId"]
Known optional parameters are: ["timeout"]
You have provided none
Stacktrace:
BadParametersError: The following required parameter is missing: ["appId"]
Known required parameters are: ["appId"]
Known optional parameters are: ["timeout"]
You have provided none
    at checkParams (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\protocol\protocol.js:155:9)
    at validateExecuteMethodParams (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\protocol\protocol.js:242:5)
    at AndroidUiautomator2Driver.executeMethod (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\basedriver\commands\execute.ts:34:45)
    at AndroidUiautomator2Driver.execute (C:\Users\bahae\.appium\node_modules\appium-uiautomator2-driver\node_modules\appium-android-driver\lib\commands\execute.js:17:23)
    at runCommandPromise (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\basedriver\driver.ts:115:20)
    at C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:171:12
    at AsyncLock._promiseTry (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:306:31)
    at exec (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:170:9)
    at AsyncLock.acquire (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:189:3)
    at AndroidUiautomator2Driver.executeCommand (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\basedriver\driver.ts:159:39)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at defaultBehavior (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\lib\appium.js:787:14)
    at AppiumDriver.executeWrappedCommand (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\lib\appium.js:900:16)
    at AppiumDriver.executeCommand (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\lib\appium.js:799:17)
    at asyncHandler (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\protocol\protocol.js:387:19)</msg>
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.AudioPlayerActivity</arg>
<doc>Ferme une application spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:38:53.667937" elapsed="0.007536"/>
</kw>
<kw name="Execute Test With Retry">
<kw name="Set Variable" owner="BuiltIn">
<msg time="2025-06-11T11:38:53.676473" level="INFO">${attempt} = 1</msg>
<var>${attempt}</var>
<arg>1</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2025-06-11T11:38:53.675473" elapsed="0.001000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2025-06-11T11:38:53.676473" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${FALSE}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2025-06-11T11:38:53.676473" elapsed="0.000000"/>
</kw>
<for flavor="IN RANGE">
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:38:53.711494" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:38:53.677505" elapsed="0.033989"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:38:53.712510" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:38:53.711494" elapsed="0.001016"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:38:53.712510" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:38:53.712510" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:38:53.677505" elapsed="0.035005"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:38:53.712510" elapsed="0.048940"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:38:56.761716" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:38:53.761450" elapsed="3.000266"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:38:56.832065" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:38:56.761716" elapsed="0.070349"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:38:56.832065" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:38:53.712510" elapsed="3.119555"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:38:56.832065" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:38:56.832065" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:38:56.833687" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:38:56.833687" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:38:56.833009" elapsed="0.001200"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:38:56.834255" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:38:56.834255" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:38:56.834255" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:38:56.834255" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:38:56.832065" elapsed="0.002190"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:38:56.834255" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:38:56.834255" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:38:56.835252" elapsed="0.574286"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:38:56.834255" elapsed="0.575283"/>
</kw>
<status status="PASS" start="2025-06-11T11:38:56.834255" elapsed="0.575283"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:38:57.458312" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:38:57.409538" elapsed="0.048774"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:38:57.458312" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:38:57.458312" elapsed="0.473294"/>
</kw>
<msg time="2025-06-11T11:38:57.931606" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:38:57.458312" elapsed="0.473294"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:38:57.932513" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:38:56.834255" elapsed="1.098258"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:38:59.932577" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:38:57.932513" elapsed="2.000064"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:39:18.341640" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:38:59.932577" elapsed="18.409063"/>
</kw>
<msg time="2025-06-11T11:39:18.341640" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:38:59.932577" elapsed="18.409972"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:39:18.342549" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:39:36.654975" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:39:18.342549" elapsed="18.312426"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:39:36.705001" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:39:36.654975" elapsed="0.050026"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:39:36.705001" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:39:36.705001" elapsed="0.465294"/>
</kw>
<msg time="2025-06-11T11:39:37.170295" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:39:36.705001" elapsed="0.465294"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:39:37.170295" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:39:36.654975" elapsed="0.515320"/>
</kw>
<status status="PASS" start="2025-06-11T11:38:56.832065" elapsed="40.338230"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:40:09.658771" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_113955.png</msg>
<msg time="2025-06-11T11:40:09.658771" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:39:39

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.045s
Ajustement: -45.2ms
Corrélation initiale: 0.315
Original length: 802750, Recorded length: 802750
Best lag: 173 samples (0.004 seconds)
Final lengths - Original: 802577, Aligned: 802577
Décalage temporel final: 0.004 secondes

=== Résultats ===
Décalage temporel: 0.004 secondes
         snr: -0.9008
 correlation: 0.3464
         mse: 0.0403
        rmse: 0.2007
energy_ratio: 0.8807
    max_diff: 1.3832
   mean_diff: 0.1426
         mos: 2.9797
     clarity: 1.0732
  clarity_db: 0.3068

=== Résultat: ÉCHEC ===
SNR: -0.90 dB (seuil: 5 dB)
Corrélation: 0.346 (seuil: 0.8)
MOS: 2.98/5 (seuil: 2.5)
Clarté: 1.073 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:40:09.659388" level="INFO">C:\Users\bahae\Documents\PfeProject\test_cases\TestAudio.py:338: UserWarning: Glyph 10060 (\N{CROSS MARK}) missing from font(s) DejaVu Sans.
  plt.savefig(output_file, dpi=300, bbox_inches='tight')
C:\Program Files\JetBrains\PyCharm 2024.3.2\plugins\python-ce\helpers\pycharm_matplotlib_backend\backend_interagg.py:124: UserWarning: Glyph 10060 (\N{CROSS MARK}) missing from font(s) DejaVu Sans.
  FigureCanvasAgg.draw(self)</msg>
<msg time="2025-06-11T11:40:09.659388" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:40:09.659388" level="INFO">${metrics} = {'snr': -0.9008468981428659, 'correlation': 0.34642813504358655, 'mse': 0.04026827127907651, 'rmse': 0.20066955742981174, 'energy_ratio': 0.8807378053945207, 'max_diff': 1.3831639915763552, 'mean_diff...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:39:37.171248" elapsed="32.488140"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:40:09.659909" level="INFO">SNR: -0.9008468981428659 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:40:09.659388" elapsed="0.001063"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:40:09.660505" level="INFO">Corrélation: 0.34642813504358655 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:40:09.660505" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:40:09.660505" level="INFO">MOS: 2.979679886126589/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:40:09.660505" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:40:09.661589" level="INFO">Clarté: 1.0732053549823548 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:40:09.661589" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:40:09.662487" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:40:09.661589" elapsed="0.000898"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:40:09.662487" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:40:09.662487" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:40:09.663552" level="INFO">${mos_ok} = False</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:40:09.662487" elapsed="0.001065"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:40:09.664559" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:40:09.663552" elapsed="0.001007"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:40:09.664559" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:40:09.664559" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:40:09.664559" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:40:09.664559" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:40:09.664559" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:40:09.664559" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:40:09.664559" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:40:09.665574" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:40:09.665574" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:40:09.664559" elapsed="0.001015">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:40:09.665574" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:39:37.170295" elapsed="32.495279">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:40:09.665574" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:38:53.676473" elapsed="75.989101">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:40:09.665574" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:38:53.676473" elapsed="75.989101"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:40:09.665574" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:40:09.665574" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:40:09.665574" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:40:09.665574" level="INFO">${attempt} = 2</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:40:09.665574" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:40:09.666559" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 2/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:40:09.665574" elapsed="0.000985"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:40:11.666842" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:40:09.666559" elapsed="2.000283"/>
</kw>
<status status="PASS" start="2025-06-11T11:40:09.665574" elapsed="2.001268"/>
</branch>
<status status="PASS" start="2025-06-11T11:40:09.665574" elapsed="2.001268"/>
</if>
<status status="PASS" start="2025-06-11T11:40:09.665574" elapsed="2.001268"/>
</branch>
<status status="PASS" start="2025-06-11T11:40:09.665574" elapsed="2.001268"/>
</if>
<var name="${index}">0</var>
<status status="PASS" start="2025-06-11T11:38:53.676473" elapsed="77.990369"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:40:11.701235" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:40:11.667928" elapsed="0.033307"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:40:11.702256" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:40:11.702256" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:40:11.702256" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:40:11.702256" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:40:11.666842" elapsed="0.035414"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:40:11.702256" elapsed="0.055937"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:40:14.758237" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:40:11.758193" elapsed="3.000044"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:40:14.831780" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:40:14.758237" elapsed="0.073543"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:40:14.831780" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:40:11.702256" elapsed="3.130544"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:40:14.832845" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:40:14.832845" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:40:14.833833" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:40:14.833833" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:40:14.832845" elapsed="0.000988"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:40:14.833833" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:40:14.833833" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:40:14.833833" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:40:14.833833" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:40:14.832845" elapsed="0.000988"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:40:14.834848" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:40:14.833833" elapsed="0.001015"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:40:14.834848" elapsed="0.049658"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:40:14.834848" elapsed="0.049658"/>
</kw>
<status status="PASS" start="2025-06-11T11:40:14.834848" elapsed="0.050192"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:40:14.934019" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:40:14.885040" elapsed="0.048979"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:40:14.934019" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:40:14.934019" elapsed="0.466315"/>
</kw>
<msg time="2025-06-11T11:40:15.400334" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:40:14.934019" elapsed="0.466315"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:40:15.400334" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:40:14.834848" elapsed="0.565486"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:40:17.400667" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:40:15.400334" elapsed="2.000333"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:40:35.805057" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:40:17.400667" elapsed="18.404390"/>
</kw>
<msg time="2025-06-11T11:40:35.806139" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:40:17.400667" elapsed="18.405472"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:40:35.806139" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:40:54.118231" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:40:35.806139" elapsed="18.312092"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:40:54.174622" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:40:54.118231" elapsed="0.056391"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:40:54.174622" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:40:54.175655" elapsed="0.468679"/>
</kw>
<msg time="2025-06-11T11:40:54.644334" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:40:54.175655" elapsed="0.468679"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:40:54.644334" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:40:54.118231" elapsed="0.527284"/>
</kw>
<status status="PASS" start="2025-06-11T11:40:14.832845" elapsed="39.812689"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:41:27.961716" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_114114.png</msg>
<msg time="2025-06-11T11:41:27.961716" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:40:56

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.054s
Ajustement: -54.5ms
Corrélation initiale: 0.385
Original length: 803457, Recorded length: 803457
Best lag: 440 samples (0.010 seconds)
Final lengths - Original: 803017, Aligned: 803017
Décalage temporel final: 0.010 secondes

=== Résultats ===
Décalage temporel: 0.010 secondes
         snr: 0.5330
 correlation: 0.5275
         mse: 0.0290
        rmse: 0.1702
energy_ratio: 0.8665
    max_diff: 1.4346
   mean_diff: 0.1005
         mos: 3.2543
     clarity: 1.0139
  clarity_db: 0.0598

=== Résultat: ÉCHEC ===
SNR: 0.53 dB (seuil: 5 dB)
Corrélation: 0.527 (seuil: 0.8)
MOS: 3.25/5 (seuil: 2.5)
Clarté: 1.014 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:41:27.961716" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:41:27.961716" level="INFO">${metrics} = {'snr': 0.5329784098976615, 'correlation': 0.5274547930899567, 'mse': 0.028978697699345805, 'rmse': 0.1702313064607853, 'energy_ratio': 0.8664580117666516, 'max_diff': 1.4346362630150014, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:40:54.645534" elapsed="33.316182"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:41:27.962441" level="INFO">SNR: 0.5329784098976615 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:41:27.961716" elapsed="0.000725"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:41:27.963094" level="INFO">Corrélation: 0.5274547930899567 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:41:27.962441" elapsed="0.000653"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:41:27.963094" level="INFO">MOS: 3.2542648881038545/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:41:27.963094" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:41:27.963746" level="INFO">Clarté: 1.0138601768613908 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:41:27.963094" elapsed="0.000652"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:41:27.964408" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:41:27.963746" elapsed="0.000662"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:41:27.965064" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:41:27.964408" elapsed="0.000656"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:41:27.965064" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:41:27.965064" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:41:27.966202" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:41:27.965064" elapsed="0.001138"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:41:27.966202" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:41:27.966202" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:41:27.966202" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:41:27.966202" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:41:27.966202" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:41:27.966202" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:41:27.966202" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:41:27.966202" elapsed="0.000996"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:41:27.966202" elapsed="0.000996"/>
</branch>
<status status="FAIL" start="2025-06-11T11:41:27.966202" elapsed="0.000996">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:41:27.967198" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:40:54.645534" elapsed="33.321664">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:41:27.967198" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:40:11.666842" elapsed="76.300356">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:41:27.967198" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:40:11.666842" elapsed="76.300356"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:41:27.967198" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:41:27.967198" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:41:27.967198" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:41:27.967836" level="INFO">${attempt} = 3</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:41:27.967836" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:41:27.967836" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 3/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:41:27.967836" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:41:29.968241" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:41:27.967836" elapsed="2.000405"/>
</kw>
<status status="PASS" start="2025-06-11T11:41:27.967836" elapsed="2.000405"/>
</branch>
<status status="PASS" start="2025-06-11T11:41:27.967836" elapsed="2.000405"/>
</if>
<status status="PASS" start="2025-06-11T11:41:27.967816" elapsed="2.000425"/>
</branch>
<status status="PASS" start="2025-06-11T11:41:27.967198" elapsed="2.001043"/>
</if>
<var name="${index}">1</var>
<status status="PASS" start="2025-06-11T11:40:11.666842" elapsed="78.301399"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:41:30.005805" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:41:29.969271" elapsed="0.036534"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:41:30.005805" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:41:30.005805" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:41:30.006953" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:41:30.005805" elapsed="0.001148"/>
</kw>
<status status="PASS" start="2025-06-11T11:41:29.969271" elapsed="0.037682"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:41:30.006953" elapsed="0.045228"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:41:33.052592" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:41:30.052181" elapsed="3.000411"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:41:33.133341" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:41:33.052592" elapsed="0.080749"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:41:33.134442" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:41:30.006953" elapsed="3.127489"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:41:33.134442" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:41:33.134442" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:41:33.135371" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:41:33.135371" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:41:33.134442" elapsed="0.000929"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:41:33.135371" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:41:33.135371" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:41:33.135371" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:41:33.135371" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:41:33.134442" elapsed="0.001992"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:41:33.136434" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:41:33.136434" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:41:33.136434" elapsed="0.051933"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:41:33.136434" elapsed="0.051933"/>
</kw>
<status status="PASS" start="2025-06-11T11:41:33.136434" elapsed="0.051933"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:41:33.246964" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:41:33.188367" elapsed="0.059536"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:41:33.247903" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:41:33.247903" elapsed="0.485330"/>
</kw>
<msg time="2025-06-11T11:41:33.733233" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:41:33.247903" elapsed="0.485330"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:41:33.734234" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:41:33.136434" elapsed="0.597800"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:41:35.734821" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:41:33.734234" elapsed="2.000587"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:41:54.152620" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:41:35.734821" elapsed="18.417799"/>
</kw>
<msg time="2025-06-11T11:41:54.152620" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:41:35.734821" elapsed="18.417799"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:41:54.152620" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:42:12.466215" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:41:54.152620" elapsed="18.313595"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:42:12.514676" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:42:12.466215" elapsed="0.048461"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:42:12.514676" elapsed="0.001044"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:42:12.515720" elapsed="0.458500"/>
</kw>
<msg time="2025-06-11T11:42:12.974220" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:42:12.515720" elapsed="0.458500"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:42:12.974220" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:42:12.466215" elapsed="0.508005"/>
</kw>
<status status="PASS" start="2025-06-11T11:41:33.134442" elapsed="39.839778"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:42:46.042993" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_114232.png</msg>
<msg time="2025-06-11T11:42:46.042993" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:42:15

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.045s
Ajustement: -44.9ms
Corrélation initiale: 0.564
Original length: 803030, Recorded length: 803030
Best lag: 0 samples (0.000 seconds)
Final lengths - Original: 803030, Aligned: 803030
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 0.8907
 correlation: 0.5639
         mse: 0.0267
        rmse: 0.1634
energy_ratio: 0.8613
    max_diff: 1.1521
   mean_diff: 0.1106
         mos: 3.3123
     clarity: 1.0523
  clarity_db: 0.2214

=== Résultat: ÉCHEC ===
SNR: 0.89 dB (seuil: 5 dB)
Corrélation: 0.564 (seuil: 0.8)
MOS: 3.31/5 (seuil: 2.5)
Clarté: 1.052 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:42:46.042993" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:42:46.042993" level="INFO">${metrics} = {'snr': 0.8906664853184354, 'correlation': 0.5639281194118582, 'mse': 0.026690144960591956, 'rmse': 0.16337118766964986, 'energy_ratio': 0.8613009520750935, 'max_diff': 1.1521315049721468, 'mean_diff'...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:42:12.975220" elapsed="33.067773"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:42:46.043930" level="INFO">SNR: 0.8906664853184354 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:42:46.042993" elapsed="0.000937"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:42:46.043930" level="INFO">Corrélation: 0.5639281194118582 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:42:46.043930" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:42:46.044925" level="INFO">MOS: 3.312340402706967/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:42:46.043930" elapsed="0.000995"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:42:46.044925" level="INFO">Clarté: 1.0523000995307032 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:42:46.044925" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:42:46.046033" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:42:46.044925" elapsed="0.001108"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:42:46.046582" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:42:46.046033" elapsed="0.000549"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:42:46.047205" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:42:46.046582" elapsed="0.000623"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:42:46.047205" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:42:46.047205" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:42:46.047205" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:42:46.047205" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:42:46.047205" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:42:46.047205" elapsed="0.001091"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:42:46.048296" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:42:46.048296" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:42:46.047205" elapsed="0.001091">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:42:46.048296" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:42:46.048296" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:42:46.047205" elapsed="0.001091">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:42:46.048296" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:42:12.975220" elapsed="33.073076">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:42:46.048296" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:41:29.968241" elapsed="76.080055">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:42:46.048296" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:41:29.968241" elapsed="76.080055"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:42:46.048296" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:42:46.048296" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:42:46.048296" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:42:46.049298" level="INFO">${attempt} = 4</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:42:46.048296" elapsed="0.001002"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:42:46.049298" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 4/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:42:46.049298" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:42:48.049385" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:42:46.049298" elapsed="2.000087"/>
</kw>
<status status="PASS" start="2025-06-11T11:42:46.049298" elapsed="2.000087"/>
</branch>
<status status="PASS" start="2025-06-11T11:42:46.049298" elapsed="2.000087"/>
</if>
<status status="PASS" start="2025-06-11T11:42:46.048296" elapsed="2.001089"/>
</branch>
<status status="PASS" start="2025-06-11T11:42:46.048296" elapsed="2.001089"/>
</if>
<var name="${index}">2</var>
<status status="PASS" start="2025-06-11T11:41:29.968241" elapsed="78.081144"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:42:48.088857" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:42:48.051415" elapsed="0.037442"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:42:48.088857" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:42:48.088857" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:42:48.088857" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:42:48.088857" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:42:48.051415" elapsed="0.037442"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:42:48.090198" elapsed="0.048062"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:42:51.138394" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:42:48.138260" elapsed="3.000134"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:42:51.226496" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:42:51.138394" elapsed="0.088102"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:42:51.227018" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:42:48.090198" elapsed="3.136820"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:42:51.228019" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:42:51.227018" elapsed="0.001001"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:42:51.229017" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:42:51.229017" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:42:51.228019" elapsed="0.001539"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:42:51.229614" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:42:51.229614" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:42:51.229614" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:42:51.229614" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:42:51.228019" elapsed="0.001595"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:42:51.229614" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:42:51.229614" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:42:51.230595" elapsed="0.048076"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:42:51.229614" elapsed="0.049057"/>
</kw>
<status status="PASS" start="2025-06-11T11:42:51.229614" elapsed="0.049057"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:42:51.325563" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:42:51.279674" elapsed="0.045889"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:42:51.325563" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:42:51.326156" elapsed="0.463250"/>
</kw>
<msg time="2025-06-11T11:42:51.789406" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:42:51.325563" elapsed="0.463843"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:42:51.789406" elapsed="0.000994"/>
</kw>
<status status="PASS" start="2025-06-11T11:42:51.229614" elapsed="0.560786"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:42:53.790504" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:42:51.790400" elapsed="2.000104"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:43:12.192128" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:42:53.790504" elapsed="18.401624"/>
</kw>
<msg time="2025-06-11T11:43:12.192128" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:42:53.790504" elapsed="18.401624"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:43:12.192128" elapsed="0.001001"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:43:30.505828" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:43:12.193129" elapsed="18.312699"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:43:30.551251" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:43:30.505828" elapsed="0.045423"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:43:30.551251" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:43:30.551251" elapsed="0.453699"/>
</kw>
<msg time="2025-06-11T11:43:31.005950" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:43:30.551251" elapsed="0.454699"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:43:31.005950" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:43:30.505828" elapsed="0.500122"/>
</kw>
<status status="PASS" start="2025-06-11T11:42:51.227018" elapsed="39.778932"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:44:03.316083" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_114349.png</msg>
<msg time="2025-06-11T11:44:03.316083" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:43:33

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.15s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.054s
Ajustement: -54.4ms
Corrélation initiale: 0.386
Original length: 802945, Recorded length: 802945
Best lag: 427 samples (0.010 seconds)
Final lengths - Original: 802518, Aligned: 802518
Décalage temporel final: 0.010 secondes

=== Résultats ===
Décalage temporel: 0.010 secondes
         snr: 1.6293
 correlation: 0.6337
         mse: 0.0225
        rmse: 0.1499
energy_ratio: 0.8680
    max_diff: 1.1648
   mean_diff: 0.0920
         mos: 3.4256
     clarity: 1.0093
  clarity_db: 0.0400

=== Résultat: ÉCHEC ===
SNR: 1.63 dB (seuil: 5 dB)
Corrélation: 0.634 (seuil: 0.8)
MOS: 3.43/5 (seuil: 2.5)
Clarté: 1.009 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:44:03.316083" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:44:03.317073" level="INFO">${metrics} = {'snr': 1.6293404713406703, 'correlation': 0.6337155030040599, 'mse': 0.022481816680632805, 'rmse': 0.14993937668482155, 'energy_ratio': 0.8679817136192833, 'max_diff': 1.1647960475384007, 'mean_diff'...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:43:31.005950" elapsed="32.311123"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:44:03.317073" level="INFO">SNR: 1.6293404713406703 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:44:03.317073" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:44:03.318092" level="INFO">Corrélation: 0.6337155030040599 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:44:03.317073" elapsed="0.001019"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:44:03.318623" level="INFO">MOS: 3.425632222458499/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:44:03.318092" elapsed="0.000531"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:44:03.322144" level="INFO">Clarté: 1.0092618702904517 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:44:03.318623" elapsed="0.003521"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:44:03.324150" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:44:03.323148" elapsed="0.001623"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:44:03.325784" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:44:03.324786" elapsed="0.000998"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:44:03.326783" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:44:03.325784" elapsed="0.000999"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:44:03.327334" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:44:03.326783" elapsed="0.000551"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:44:03.327334" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:44:03.327334" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:44:03.329869" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:44:03.329333" elapsed="0.000536"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:44:03.329869" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:44:03.329869" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:44:03.328333" elapsed="0.001536">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:44:03.329869" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:44:03.329869" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:44:03.328333" elapsed="0.001536">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:44:03.329869" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:43:31.005950" elapsed="32.324911">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:44:03.330861" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:42:48.049385" elapsed="75.281476">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:44:03.330861" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:42:48.049385" elapsed="75.281476"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:44:03.330861" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:44:03.330861" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:44:03.330861" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:44:03.330861" level="INFO">${attempt} = 5</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:44:03.330861" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:44:03.330861" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 5/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:44:03.330861" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:44:05.331257" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:44:03.330861" elapsed="2.000396"/>
</kw>
<status status="PASS" start="2025-06-11T11:44:03.330861" elapsed="2.000396"/>
</branch>
<status status="PASS" start="2025-06-11T11:44:03.330861" elapsed="2.000396"/>
</if>
<status status="PASS" start="2025-06-11T11:44:03.330861" elapsed="2.000396"/>
</branch>
<status status="PASS" start="2025-06-11T11:44:03.330861" elapsed="2.000396"/>
</if>
<var name="${index}">3</var>
<status status="PASS" start="2025-06-11T11:42:48.049385" elapsed="77.281872"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:44:05.370440" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:44:05.332237" elapsed="0.038203"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:44:05.370440" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:44:05.370440" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:44:05.371708" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:44:05.371615" elapsed="0.000093"/>
</kw>
<status status="PASS" start="2025-06-11T11:44:05.331257" elapsed="0.040451"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:44:05.371708" elapsed="0.048354"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:44:08.420363" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:44:05.420062" elapsed="3.000301"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:44:08.493621" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:44:08.420363" elapsed="0.073258"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:44:08.493621" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:44:05.371708" elapsed="3.121913"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:44:08.494562" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:44:08.494562" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:44:08.495584" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:44:08.495584" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:44:08.494562" elapsed="0.001022"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:44:08.495584" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:44:08.495584" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:44:08.495584" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:44:08.495584" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:44:08.494562" elapsed="0.001022"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:44:08.495584" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:44:08.495584" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:44:08.496880" elapsed="0.056096"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:44:08.495584" elapsed="0.057392"/>
</kw>
<status status="PASS" start="2025-06-11T11:44:08.495584" elapsed="0.057392"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:44:08.603034" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:44:08.552976" elapsed="0.051070"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:44:08.604046" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:44:08.604046" elapsed="0.458888"/>
</kw>
<msg time="2025-06-11T11:44:09.062934" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:44:08.604046" elapsed="0.458888"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:44:09.063935" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:44:08.495584" elapsed="0.568351"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:44:11.064410" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:44:09.063935" elapsed="2.000475"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:44:29.494110" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:44:11.064410" elapsed="18.429700"/>
</kw>
<msg time="2025-06-11T11:44:29.494110" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:44:11.064410" elapsed="18.429700"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:44:29.494110" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:44:47.807335" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:44:29.494110" elapsed="18.313225"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:44:47.860503" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:44:47.807888" elapsed="0.052615"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:44:47.860503" elapsed="0.001001"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:44:47.861504" elapsed="0.461191"/>
</kw>
<msg time="2025-06-11T11:44:48.322695" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:44:47.861504" elapsed="0.461191"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:44:48.323619" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:44:47.807335" elapsed="0.516284"/>
</kw>
<status status="PASS" start="2025-06-11T11:44:08.494562" elapsed="39.829057"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:45:20.850462" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_114507.png</msg>
<msg time="2025-06-11T11:45:20.850462" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:44:50

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.045s
Ajustement: -44.9ms
Corrélation initiale: 0.907
Original length: 803005, Recorded length: 803005
Best lag: 0 samples (0.000 seconds)
Final lengths - Original: 803005, Aligned: 803005
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 7.5055
 correlation: 0.9072
         mse: 0.0058
        rmse: 0.0763
energy_ratio: 0.8655
    max_diff: 1.0770
   mean_diff: 0.0505
         mos: 3.9888
     clarity: 1.0234
  clarity_db: 0.1006

=== Résultat: SUCCÈS ===
SNR: 7.51 dB (seuil: 5 dB)
Corrélation: 0.907 (seuil: 0.8)
MOS: 3.99/5 (seuil: 2.5)
Clarté: 1.023 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:45:20.850462" level="INFO">${test_passed} = True</msg>
<msg time="2025-06-11T11:45:20.850462" level="INFO">${metrics} = {'snr': 7.5054921995906145, 'correlation': 0.9071565981925298, 'mse': 0.005818011674580119, 'rmse': 0.0762758918307752, 'energy_ratio': 0.8654790284548782, 'max_diff': 1.0769941426514045, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:44:48.323619" elapsed="32.526843"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:45:20.852093" level="INFO">SNR: 7.5054921995906145 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:45:20.851470" elapsed="0.000623"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:45:20.852093" level="INFO">Corrélation: 0.9071565981925298 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:45:20.852093" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:45:20.852093" level="INFO">MOS: 3.98880760581466/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:45:20.852093" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:45:20.853047" level="INFO">Clarté: 1.0234421771616067 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:45:20.852093" elapsed="0.000954"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:45:20.853763" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:45:20.853047" elapsed="0.000716"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:45:20.854320" level="INFO">${correlation_ok} = True</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:45:20.853763" elapsed="0.000557"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:45:20.854320" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:45:20.854320" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:45:20.857314" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:45:20.854320" elapsed="0.002994"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:45:20.857314" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:45:20.857314" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:45:20.858315" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:45:20.857314" elapsed="0.001001"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:45:20.858315" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:45:20.858315" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:45:20.857314" elapsed="0.001001">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:45:20.858315" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:45:20.858315" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:45:20.857314" elapsed="0.001001">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:45:20.858315" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:44:48.323619" elapsed="32.534696">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:45:20.858315" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:44:05.331257" elapsed="75.527058">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:45:20.858315" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:44:05.331257" elapsed="75.527058"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:45:20.858315" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:45:20.858315" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:45:20.858315" elapsed="0.001034"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:45:20.859349" level="INFO">${attempt} = 6</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:45:20.859349" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:45:20.859349" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 6/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:45:20.859349" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:45:22.859470" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:45:20.859349" elapsed="2.000121"/>
</kw>
<status status="PASS" start="2025-06-11T11:45:20.859349" elapsed="2.000121"/>
</branch>
<status status="PASS" start="2025-06-11T11:45:20.859349" elapsed="2.000121"/>
</if>
<status status="PASS" start="2025-06-11T11:45:20.859349" elapsed="2.000121"/>
</branch>
<status status="PASS" start="2025-06-11T11:45:20.858315" elapsed="2.001155"/>
</if>
<var name="${index}">4</var>
<status status="PASS" start="2025-06-11T11:44:05.331257" elapsed="77.528213"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:45:22.895518" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:45:22.861145" elapsed="0.034373"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:45:22.895518" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:45:22.895518" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:45:22.896534" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:45:22.895518" elapsed="0.001016"/>
</kw>
<status status="PASS" start="2025-06-11T11:45:22.860450" elapsed="0.036084"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:45:22.896534" elapsed="0.043477"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:45:25.941536" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:45:22.940011" elapsed="3.001525"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:45:26.026260" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:45:25.941536" elapsed="0.084724"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:45:26.026260" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:45:22.896534" elapsed="3.129726"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:45:26.026786" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:45:26.026786" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:45:26.027891" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:45:26.027891" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:45:26.027362" elapsed="0.000529"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:45:26.027891" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:45:26.027891" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:45:26.027891" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:45:26.027891" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:45:26.027343" elapsed="0.000548"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:45:26.028882" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:45:26.027891" elapsed="0.000991"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:45:26.028882" elapsed="0.050894"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:45:26.028882" elapsed="0.050894"/>
</kw>
<status status="PASS" start="2025-06-11T11:45:26.028882" elapsed="0.050894"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:45:26.123441" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:45:26.079776" elapsed="0.044659"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:45:26.124435" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:45:26.124435" elapsed="0.457776"/>
</kw>
<msg time="2025-06-11T11:45:26.582211" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:45:26.124435" elapsed="0.458779"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:45:26.583214" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:45:26.028882" elapsed="0.554332"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:45:28.583698" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:45:26.583214" elapsed="2.000484"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:45:47.010887" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:45:28.583698" elapsed="18.427189"/>
</kw>
<msg time="2025-06-11T11:45:47.010887" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:45:28.583698" elapsed="18.427189"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:45:47.010887" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:46:05.324791" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:45:47.011894" elapsed="18.312897"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:46:05.372650" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:46:05.324791" elapsed="0.047859"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:46:05.372650" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:46:05.372650" elapsed="0.458188"/>
</kw>
<msg time="2025-06-11T11:46:05.830838" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:46:05.372650" elapsed="0.458188"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:46:05.830838" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:46:05.324791" elapsed="0.506047"/>
</kw>
<status status="PASS" start="2025-06-11T11:45:26.026786" elapsed="39.804052"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:46:40.162965" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_114625.png</msg>
<msg time="2025-06-11T11:46:40.162965" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:46:07

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.15s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.046s
Ajustement: -45.7ms
Corrélation initiale: 0.878
Original length: 802539, Recorded length: 802539
Best lag: -1 samples (-0.000 seconds)
Final lengths - Original: 802539, Aligned: 802539
Décalage temporel final: -0.000 secondes

=== Résultats ===
Décalage temporel: -0.000 secondes
         snr: 6.3691
 correlation: 0.8785
         mse: 0.0075
        rmse: 0.0869
energy_ratio: 0.8611
    max_diff: 1.0799
   mean_diff: 0.0602
         mos: 3.9089
     clarity: 1.0262
  clarity_db: 0.1125

=== Résultat: SUCCÈS ===
SNR: 6.37 dB (seuil: 5 dB)
Corrélation: 0.878 (seuil: 0.8)
MOS: 3.91/5 (seuil: 2.5)
Clarté: 1.026 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:46:40.162965" level="INFO">${test_passed} = True</msg>
<msg time="2025-06-11T11:46:40.162965" level="INFO">${metrics} = {'snr': 6.369144777013913, 'correlation': 0.8784809780277508, 'mse': 0.007549706721247906, 'rmse': 0.08688904833894721, 'energy_ratio': 0.8611247067087032, 'max_diff': 1.0799151791270423, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:46:05.831838" elapsed="34.331127"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:46:40.163968" level="INFO">SNR: 6.369144777013913 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:46:40.162965" elapsed="0.001003"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:46:40.164524" level="INFO">Corrélation: 0.8784809780277508 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:46:40.163968" elapsed="0.000556"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:46:40.164524" level="INFO">MOS: 3.908942964713858/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:46:40.164524" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:46:40.164524" level="INFO">Clarté: 1.0262477025556371 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:46:40.164524" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:46:40.165618" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:46:40.164524" elapsed="0.001094"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:46:40.165618" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:46:40.165618" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:46:40.166627" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:46:40.165618" elapsed="0.001009"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:46:40.167622" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:46:40.166627" elapsed="0.000995"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:46:40.167622" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:46:40.167622" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:46:40.168631" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:46:40.167622" elapsed="0.001009"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:46:40.169209" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:46:40.168631" elapsed="0.000578">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:46:40.167622" elapsed="0.001587">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:46:40.169209" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:46:40.169209" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:46:40.167622" elapsed="0.001587">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:46:40.169209" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:46:05.831838" elapsed="34.337371">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:46:40.169209" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:45:22.860450" elapsed="77.308759">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:46:40.169209" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:45:22.859470" elapsed="77.309739"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:46:40.169209" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:46:40.169209" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:46:40.169209" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:46:40.169209" level="INFO">${attempt} = 7</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:46:40.169209" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:46:40.170307" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 7/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:46:40.170307" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:46:42.171297" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:46:40.170307" elapsed="2.000990"/>
</kw>
<status status="PASS" start="2025-06-11T11:46:40.169209" elapsed="2.002088"/>
</branch>
<status status="PASS" start="2025-06-11T11:46:40.169209" elapsed="2.002088"/>
</if>
<status status="PASS" start="2025-06-11T11:46:40.169209" elapsed="2.002088"/>
</branch>
<status status="PASS" start="2025-06-11T11:46:40.169209" elapsed="2.002088"/>
</if>
<var name="${index}">5</var>
<status status="PASS" start="2025-06-11T11:45:22.859470" elapsed="79.311827"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:46:42.216347" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:46:42.172437" elapsed="0.043910"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:46:42.216347" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:46:42.216347" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:46:42.216347" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:46:42.216347" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:46:42.172437" elapsed="0.043910"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:46:42.217335" elapsed="0.047033"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:46:45.264826" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:46:42.264368" elapsed="3.000458"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:46:45.358025" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:46:45.264826" elapsed="0.093199"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:46:45.358025" elapsed="0.001001"/>
</kw>
<status status="PASS" start="2025-06-11T11:46:42.216347" elapsed="3.142679"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:46:45.359026" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:46:45.359026" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:46:45.361029" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:46:45.361029" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:46:45.360026" elapsed="0.001003"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:46:45.361029" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:46:45.361029" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:46:45.361029" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:46:45.361029" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:46:45.360026" elapsed="0.001003"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:46:45.361029" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:46:45.361029" elapsed="0.000995"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:46:45.362024" elapsed="0.053972"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:46:45.362024" elapsed="0.054961"/>
</kw>
<status status="PASS" start="2025-06-11T11:46:45.362024" elapsed="0.054961"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:46:45.470745" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:46:45.416985" elapsed="0.053760"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:46:45.470745" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:46:45.471963" elapsed="0.473079"/>
</kw>
<msg time="2025-06-11T11:46:45.945042" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:46:45.470745" elapsed="0.474297"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:46:45.945042" elapsed="0.000998"/>
</kw>
<status status="PASS" start="2025-06-11T11:46:45.362024" elapsed="0.584016"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:46:47.976814" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:46:45.946040" elapsed="2.030774"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:47:06.494234" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:46:47.977812" elapsed="18.516422"/>
</kw>
<msg time="2025-06-11T11:47:06.494234" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:46:47.976814" elapsed="18.517420"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:47:06.494809" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:47:24.807245" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:47:06.494809" elapsed="18.312436"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:47:24.855703" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:47:24.807245" elapsed="0.048458"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:47:24.855703" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:47:24.855703" elapsed="0.467497"/>
</kw>
<msg time="2025-06-11T11:47:25.323200" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:47:24.855703" elapsed="0.467497"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:47:25.323200" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:47:24.807245" elapsed="0.515955"/>
</kw>
<status status="PASS" start="2025-06-11T11:46:45.359026" elapsed="39.964174"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:47:58.233196" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_114744.png</msg>
<msg time="2025-06-11T11:47:58.233196" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:47:27

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.38s -&gt; Segment actif: 18.17s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.045s
Ajustement: -45.4ms
Corrélation initiale: 0.918
Original length: 803439, Recorded length: 803439
Best lag: 0 samples (0.000 seconds)
Final lengths - Original: 803439, Aligned: 803439
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 8.0383
 correlation: 0.9182
         mse: 0.0052
        rmse: 0.0718
energy_ratio: 0.8678
    max_diff: 1.1452
   mean_diff: 0.0487
         mos: 4.0234
     clarity: 1.0261
  clarity_db: 0.1118

=== Résultat: SUCCÈS ===
SNR: 8.04 dB (seuil: 5 dB)
Corrélation: 0.918 (seuil: 0.8)
MOS: 4.02/5 (seuil: 2.5)
Clarté: 1.026 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:47:58.233196" level="INFO">${test_passed} = True</msg>
<msg time="2025-06-11T11:47:58.233196" level="INFO">${metrics} = {'snr': 8.038291044798502, 'correlation': 0.9181939931144695, 'mse': 0.0051542128021707006, 'rmse': 0.07179284645541435, 'energy_ratio': 0.8677759488530352, 'max_diff': 1.145174778909606, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:47:25.324116" elapsed="32.909080"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:47:58.234212" level="INFO">SNR: 8.038291044798502 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:47:58.233196" elapsed="0.001016"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:47:58.234212" level="INFO">Corrélation: 0.9181939931144695 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:47:58.234212" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:47:58.234748" level="INFO">MOS: 4.023364433529304/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:47:58.234748" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:47:58.234748" level="INFO">Clarté: 1.0260713181493537 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:47:58.234748" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:47:58.235744" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:47:58.234748" elapsed="0.000996"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:47:58.235744" level="INFO">${correlation_ok} = True</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:47:58.235744" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:47:58.236750" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:47:58.235744" elapsed="0.001006"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:47:58.237744" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:47:58.236750" elapsed="0.000994"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:47:58.237744" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:47:58.237744" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:47:58.237744" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:47:58.237744" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:47:58.237744" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:47:58.237744" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:47:58.237744" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:47:58.237744" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:47:58.237744" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:47:58.237744" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:47:58.237744" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:47:25.324116" elapsed="32.913628">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:47:58.238765" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:46:42.171886" elapsed="76.066879">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:47:58.238765" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:46:42.171886" elapsed="76.066879"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:47:58.238765" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:47:58.238765" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:47:58.238765" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:47:58.238765" level="INFO">${attempt} = 8</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:47:58.238765" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:47:58.238765" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 8/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:47:58.238765" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:48:00.240578" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:47:58.238765" elapsed="2.001813"/>
</kw>
<status status="PASS" start="2025-06-11T11:47:58.238765" elapsed="2.001813"/>
</branch>
<status status="PASS" start="2025-06-11T11:47:58.238765" elapsed="2.001813"/>
</if>
<status status="PASS" start="2025-06-11T11:47:58.238765" elapsed="2.001813"/>
</branch>
<status status="PASS" start="2025-06-11T11:47:58.238765" elapsed="2.001813"/>
</if>
<var name="${index}">6</var>
<status status="PASS" start="2025-06-11T11:46:42.171886" elapsed="78.068692"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:48:00.281242" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:48:00.241750" elapsed="0.039492"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:48:00.281242" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:48:00.281242" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:48:00.281888" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:48:00.281888" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:48:00.241750" elapsed="0.040138"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:48:00.281888" elapsed="0.049222"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:48:03.332554" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:48:00.331110" elapsed="3.001444"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:48:03.412035" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:48:03.332554" elapsed="0.079481"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:48:03.412035" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:48:00.281888" elapsed="3.130147"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:48:03.413072" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:48:03.412035" elapsed="0.001157"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:48:03.413711" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:48:03.413711" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:48:03.413192" elapsed="0.001026"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:48:03.414237" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:48:03.414237" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:48:03.414237" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:48:03.414237" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:48:03.413192" elapsed="0.001045"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:48:03.414237" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:48:03.414237" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:48:03.415256" elapsed="0.043946"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:48:03.414237" elapsed="0.044965"/>
</kw>
<status status="PASS" start="2025-06-11T11:48:03.414237" elapsed="0.044965"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:48:03.502531" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:48:03.459202" elapsed="0.043329"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:48:03.502531" elapsed="0.000594"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:48:03.503125" elapsed="0.461476"/>
</kw>
<msg time="2025-06-11T11:48:03.964601" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:48:03.503125" elapsed="0.461476"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:48:03.964601" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:48:03.414237" elapsed="0.550364"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:48:05.964675" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:48:03.964601" elapsed="2.000074"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:48:24.378001" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:48:05.964675" elapsed="18.413326"/>
</kw>
<msg time="2025-06-11T11:48:24.378001" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:48:05.964675" elapsed="18.413326"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:48:24.378001" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:48:42.690128" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:48:24.378001" elapsed="18.312127"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:48:42.777325" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:48:42.690734" elapsed="0.086591"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:48:42.777325" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:48:42.777325" elapsed="0.470074"/>
</kw>
<msg time="2025-06-11T11:48:43.248401" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:48:42.777325" elapsed="0.471076"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:48:43.248401" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:48:42.690128" elapsed="0.558273"/>
</kw>
<status status="PASS" start="2025-06-11T11:48:03.412035" elapsed="39.836366"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:49:16.660219" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_114902.png</msg>
<msg time="2025-06-11T11:49:16.660219" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:48:45

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.17s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.027s
Ajustement: -26.9ms
Corrélation initiale: 0.315
Original length: 802438, Recorded length: 802438
Best lag: 0 samples (0.000 seconds)
Final lengths - Original: 802438, Aligned: 802438
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: -1.0736
 correlation: 0.3149
         mse: 0.0419
        rmse: 0.2046
energy_ratio: 0.8669
    max_diff: 1.2213
   mean_diff: 0.1491
         mos: 2.9350
     clarity: 1.0002
  clarity_db: 0.0009

=== Résultat: ÉCHEC ===
SNR: -1.07 dB (seuil: 5 dB)
Corrélation: 0.315 (seuil: 0.8)
MOS: 2.93/5 (seuil: 2.5)
Clarté: 1.000 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:49:16.660219" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:49:16.660219" level="INFO">${metrics} = {'snr': -1.0735948112582474, 'correlation': 0.31492212297034033, 'mse': 0.04186643136179551, 'rmse': 0.2046128817103056, 'energy_ratio': 0.8668589811917146, 'max_diff': 1.2213083239683504, 'mean_diff'...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:48:43.248401" elapsed="33.412326"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:49:16.661287" level="INFO">SNR: -1.0735948112582474 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:49:16.660743" elapsed="0.000578"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:49:16.661401" level="INFO">Corrélation: 0.31492212297034033 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:49:16.661401" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:49:16.661924" level="INFO">MOS: 2.9349627551140784/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:49:16.661401" elapsed="0.000523"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:49:16.662465" level="INFO">Clarté: 1.000204061959073 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:49:16.661924" elapsed="0.000541"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:49:16.663609" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:49:16.663026" elapsed="0.000583"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:49:16.664185" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:49:16.663609" elapsed="0.000576"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:49:16.664822" level="INFO">${mos_ok} = False</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:49:16.664185" elapsed="0.000637"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:49:16.665410" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:49:16.664822" elapsed="0.000588"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:49:16.665410" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:49:16.665410" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:49:16.665933" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:49:16.665410" elapsed="0.000523"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:49:16.665933" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:49:16.665933" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:49:16.665410" elapsed="0.000523">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:49:16.665933" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:49:16.665933" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:49:16.665410" elapsed="0.000523">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:49:16.665933" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:48:43.248401" elapsed="33.417532">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:49:16.666495" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:48:00.241098" elapsed="76.425397">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:49:16.666495" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:48:00.241098" elapsed="76.425397"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:49:16.666495" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:49:16.666495" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:49:16.666495" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:49:16.667002" level="INFO">${attempt} = 9</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:49:16.666495" elapsed="0.000520"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:49:16.667029" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 9/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:49:16.667029" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:49:18.667190" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:49:16.667029" elapsed="2.000161"/>
</kw>
<status status="PASS" start="2025-06-11T11:49:16.667029" elapsed="2.000161"/>
</branch>
<status status="PASS" start="2025-06-11T11:49:16.667029" elapsed="2.000161"/>
</if>
<status status="PASS" start="2025-06-11T11:49:16.666495" elapsed="2.000695"/>
</branch>
<status status="PASS" start="2025-06-11T11:49:16.666495" elapsed="2.000695"/>
</if>
<var name="${index}">7</var>
<status status="PASS" start="2025-06-11T11:48:00.241098" elapsed="78.426092"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:49:18.710935" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:49:18.668189" elapsed="0.042746"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:49:18.710935" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:49:18.710935" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:49:18.711848" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:49:18.711848" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:49:18.668189" elapsed="0.043659"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:49:18.711848" elapsed="0.072877"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:49:21.785026" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:49:18.784725" elapsed="3.000301"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:49:21.863476" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:49:21.785026" elapsed="0.078450"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:49:21.864476" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:49:18.711848" elapsed="3.152628"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:49:21.865050" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:49:21.865050" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:49:21.865564" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:49:21.865564" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:49:21.865050" elapsed="0.000514"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:49:21.865564" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:49:21.865564" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:49:21.865564" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:49:21.866563" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:49:21.865050" elapsed="0.001513"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:49:21.866563" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:49:21.866563" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:49:21.866563" elapsed="0.046163"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:49:21.866563" elapsed="0.046163"/>
</kw>
<status status="PASS" start="2025-06-11T11:49:21.866563" elapsed="0.046163"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:49:21.956024" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:49:21.912726" elapsed="0.043298"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:49:21.956024" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:49:21.956024" elapsed="0.509555"/>
</kw>
<msg time="2025-06-11T11:49:22.465579" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:49:21.956024" elapsed="0.509555"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:49:22.465579" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:49:21.866563" elapsed="0.599016"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:49:24.465866" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:49:22.465579" elapsed="2.000287"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:49:42.878656" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:49:24.465866" elapsed="18.412790"/>
</kw>
<msg time="2025-06-11T11:49:42.878656" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:49:24.465866" elapsed="18.412790"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:49:42.878656" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:50:01.190991" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:49:42.878656" elapsed="18.312335"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:50:01.257092" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:50:01.191992" elapsed="0.065100"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:50:01.258090" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:50:01.258090" elapsed="1.062619"/>
</kw>
<msg time="2025-06-11T11:50:02.320709" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:50:01.258090" elapsed="1.062619"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:50:02.320709" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:50:01.190991" elapsed="1.130703"/>
</kw>
<status status="PASS" start="2025-06-11T11:49:21.864476" elapsed="40.457218"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:50:34.998437" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_115021.png</msg>
<msg time="2025-06-11T11:50:34.998437" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:50:04

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.86s -&gt; Segment actif: 18.17s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.039s
Ajustement: -38.5ms
Corrélation initiale: 0.521
Original length: 802883, Recorded length: 802883
Best lag: 1 samples (0.000 seconds)
Final lengths - Original: 802882, Aligned: 802882
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 0.4869
 correlation: 0.5215
         mse: 0.0293
        rmse: 0.1711
energy_ratio: 0.8625
    max_diff: 1.1586
   mean_diff: 0.1152
         mos: 3.2452
     clarity: 1.0735
  clarity_db: 0.3081

=== Résultat: ÉCHEC ===
SNR: 0.49 dB (seuil: 5 dB)
Corrélation: 0.521 (seuil: 0.8)
MOS: 3.25/5 (seuil: 2.5)
Clarté: 1.074 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:50:34.999437" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:50:34.999437" level="INFO">${metrics} = {'snr': 0.48693459884416856, 'correlation': 0.5214527990750842, 'mse': 0.02927060063571328, 'rmse': 0.1710865296734763, 'energy_ratio': 0.862481501930444, 'max_diff': 1.1586275912555575, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:50:02.321694" elapsed="32.677743"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:50:34.999437" level="INFO">SNR: 0.48693459884416856 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:50:34.999437" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:50:35.000456" level="INFO">Corrélation: 0.5214527990750842 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:50:34.999437" elapsed="0.001019"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:50:35.000456" level="INFO">MOS: 3.245220742843868/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:50:35.000456" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:50:35.000456" level="INFO">Clarté: 1.0735095479481067 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:50:35.000456" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:50:35.001439" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:50:35.001439" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:50:35.002589" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:50:35.001439" elapsed="0.001150"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:50:35.003512" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:50:35.002589" elapsed="0.000923"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:50:35.003512" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:50:35.003512" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:50:35.004525" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:50:35.003512" elapsed="0.001013"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:50:35.005071" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:50:35.005071" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:50:35.005071" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:50:35.005071" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:50:35.004525" elapsed="0.000546">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:50:35.005071" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:50:35.005071" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:50:35.004525" elapsed="0.000546">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:50:35.005071" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:50:02.321694" elapsed="32.683377">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:50:35.005071" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:49:18.668189" elapsed="76.337869">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:50:35.006058" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:49:18.667190" elapsed="76.338868"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:50:35.006058" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:50:35.006058" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:50:35.006058" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:50:35.006058" level="INFO">${attempt} = 10</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:50:35.006058" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:50:35.006058" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 10/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:50:35.006058" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:50:37.007063" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:50:35.006058" elapsed="2.001005"/>
</kw>
<status status="PASS" start="2025-06-11T11:50:35.006058" elapsed="2.001005"/>
</branch>
<status status="PASS" start="2025-06-11T11:50:35.006058" elapsed="2.001005"/>
</if>
<status status="PASS" start="2025-06-11T11:50:35.006058" elapsed="2.001005"/>
</branch>
<status status="PASS" start="2025-06-11T11:50:35.006058" elapsed="2.001005"/>
</if>
<var name="${index}">8</var>
<status status="PASS" start="2025-06-11T11:49:18.667190" elapsed="78.339873"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:50:37.052900" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:50:37.008138" elapsed="0.044762"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:50:37.052900" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:50:37.052900" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:50:37.052900" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:50:37.052900" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:50:37.008138" elapsed="0.044762"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:50:37.053913" elapsed="0.046498"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:50:40.101609" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:50:37.100411" elapsed="3.001198"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:50:40.180567" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:50:40.101609" elapsed="0.078958"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:50:40.181548" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:50:37.052900" elapsed="3.128648"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:50:40.181548" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:50:40.181548" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:50:40.182569" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:50:40.182569" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:50:40.181548" elapsed="0.001021"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:50:40.182569" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:50:40.182569" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:50:40.182569" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:50:40.182569" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:50:40.181548" elapsed="0.001021"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:50:40.183569" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:50:40.182569" elapsed="0.001000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:50:40.183569" elapsed="0.046152"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:50:40.183569" elapsed="0.046152"/>
</kw>
<status status="PASS" start="2025-06-11T11:50:40.183569" elapsed="0.046152"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:50:40.280324" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:50:40.229721" elapsed="0.050603"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:50:40.280324" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:50:40.281357" elapsed="0.468862"/>
</kw>
<msg time="2025-06-11T11:50:40.751223" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:50:40.281357" elapsed="0.469866"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:50:40.751223" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:50:40.183569" elapsed="0.567654"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:50:42.751904" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:50:40.751223" elapsed="2.000681"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:51:01.161835" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:50:42.751904" elapsed="18.409931"/>
</kw>
<msg time="2025-06-11T11:51:01.161835" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:50:42.751904" elapsed="18.409931"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:51:01.161835" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:51:19.475723" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:51:01.161835" elapsed="18.313888"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:51:19.530312" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:51:19.475723" elapsed="0.054589"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:51:19.531314" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:51:19.531314" elapsed="0.463730"/>
</kw>
<msg time="2025-06-11T11:51:19.995044" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:51:19.531314" elapsed="0.463730"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:51:19.995044" elapsed="0.001161"/>
</kw>
<status status="PASS" start="2025-06-11T11:51:19.475723" elapsed="0.520482"/>
</kw>
<status status="PASS" start="2025-06-11T11:50:40.181548" elapsed="39.814657"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:51:52.915133" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_115139.png</msg>
<msg time="2025-06-11T11:51:52.915133" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:51:22

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.043s
Ajustement: -42.8ms
Corrélation initiale: 0.704
Original length: 802930, Recorded length: 802930
Best lag: 0 samples (0.000 seconds)
Final lengths - Original: 802930, Aligned: 802930
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 2.5393
 correlation: 0.7036
         mse: 0.0182
        rmse: 0.1351
energy_ratio: 0.8693
    max_diff: 1.0368
   mean_diff: 0.0874
         mos: 3.5459
     clarity: 1.0362
  clarity_db: 0.1546

=== Résultat: ÉCHEC ===
SNR: 2.54 dB (seuil: 5 dB)
Corrélation: 0.704 (seuil: 0.8)
MOS: 3.55/5 (seuil: 2.5)
Clarté: 1.036 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:51:52.915133" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:51:52.915133" level="INFO">${metrics} = {'snr': 2.5393282468857903, 'correlation': 0.7036006656564567, 'mse': 0.01824902539650537, 'rmse': 0.13508895364353582, 'energy_ratio': 0.869274915865719, 'max_diff': 1.0368190852934813, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:51:19.996205" elapsed="32.918928"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:51:52.916145" level="INFO">SNR: 2.5393282468857903 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:51:52.916145" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:51:52.916769" level="INFO">Corrélation: 0.7036006656564567 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:51:52.916145" elapsed="0.000624"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:51:52.916769" level="INFO">MOS: 3.5458939286631797/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:51:52.916769" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:51:52.916769" level="INFO">Clarté: 1.0362383461707982 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:51:52.916769" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:51:52.917863" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:51:52.916769" elapsed="0.001094"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:51:52.918855" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:51:52.917863" elapsed="0.000992"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:51:52.919485" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:51:52.918855" elapsed="0.000630"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:51:52.919485" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:51:52.919485" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:51:52.919485" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:51:52.919485" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:51:52.919485" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:51:52.919485" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:51:52.920581" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:51:52.920581" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:51:52.919485" elapsed="0.001096">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:51:52.920581" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:51:52.920581" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:51:52.919485" elapsed="0.001096">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:51:52.920581" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:51:19.996205" elapsed="32.924376">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:51:52.920581" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:50:37.008138" elapsed="75.912443">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:51:52.920581" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:50:37.007063" elapsed="75.913518"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:51:52.920581" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:51:52.920581" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:51:52.920581" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:51:52.920581" level="INFO">${attempt} = 11</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:51:52.920581" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:51:52.921696" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 11/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:51:52.921696" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:51:54.921983" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:51:52.921696" elapsed="2.000287"/>
</kw>
<status status="PASS" start="2025-06-11T11:51:52.921598" elapsed="2.000385"/>
</branch>
<status status="PASS" start="2025-06-11T11:51:52.921598" elapsed="2.000385"/>
</if>
<status status="PASS" start="2025-06-11T11:51:52.920581" elapsed="2.001402"/>
</branch>
<status status="PASS" start="2025-06-11T11:51:52.920581" elapsed="2.001402"/>
</if>
<var name="${index}">9</var>
<status status="PASS" start="2025-06-11T11:50:37.007063" elapsed="77.914920"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:51:54.963846" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:51:54.925576" elapsed="0.038270"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:51:54.963846" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:51:54.963846" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:51:54.964867" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:51:54.964867" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:51:54.924537" elapsed="0.040330"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:51:54.964867" elapsed="0.050848"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:51:58.017276" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:51:55.016706" elapsed="3.000570"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:51:58.098793" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:51:58.017276" elapsed="0.081517"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:51:58.098793" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:51:54.964867" elapsed="3.133926"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:51:58.098793" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:51:58.098793" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:51:58.099796" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:51:58.099796" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:51:58.099796" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:51:58.100811" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:51:58.099796" elapsed="0.001015"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:51:58.100811" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:51:58.100811" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:51:58.099796" elapsed="0.001015"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:51:58.100811" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:51:58.100811" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:51:58.101414" elapsed="0.054129"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:51:58.101414" elapsed="0.054129"/>
</kw>
<status status="PASS" start="2025-06-11T11:51:58.101414" elapsed="0.054129"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:51:58.200657" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:51:58.155543" elapsed="0.045114"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:51:58.200657" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:51:58.200657" elapsed="0.465698"/>
</kw>
<msg time="2025-06-11T11:51:58.666355" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:51:58.200657" elapsed="0.465698"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:51:58.667354" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:51:58.100811" elapsed="0.566543"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:52:00.667806" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:51:58.667354" elapsed="2.000452"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:52:19.095485" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:52:00.667806" elapsed="18.427679"/>
</kw>
<msg time="2025-06-11T11:52:19.095485" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:52:00.667806" elapsed="18.427679"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:52:19.095485" elapsed="0.001085"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:52:37.408857" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:52:19.096570" elapsed="18.312287"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:52:37.454441" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:52:37.408857" elapsed="0.045584"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:52:37.454441" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:52:37.454441" elapsed="0.467784"/>
</kw>
<msg time="2025-06-11T11:52:37.922225" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:52:37.454441" elapsed="0.467784"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:52:37.922225" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:52:37.408857" elapsed="0.513368"/>
</kw>
<status status="PASS" start="2025-06-11T11:51:58.098793" elapsed="39.824433"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:53:11.115273" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_115257.png</msg>
<msg time="2025-06-11T11:53:11.115273" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:52:39

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.17s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.030s
Ajustement: -29.7ms
Corrélation initiale: 0.379
Original length: 802565, Recorded length: 802565
Best lag: -440 samples (-0.010 seconds)
Final lengths - Original: 802565, Aligned: 802565
Décalage temporel final: -0.010 secondes

=== Résultats ===
Décalage temporel: -0.010 secondes
         snr: 0.2869
 correlation: 0.4999
         mse: 0.0306
        rmse: 0.1750
energy_ratio: 0.8672
    max_diff: 1.5520
   mean_diff: 0.1129
         mos: 3.2114
     clarity: 1.0284
  clarity_db: 0.1216

=== Résultat: ÉCHEC ===
SNR: 0.29 dB (seuil: 5 dB)
Corrélation: 0.500 (seuil: 0.8)
MOS: 3.21/5 (seuil: 2.5)
Clarté: 1.028 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:53:11.115273" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:53:11.115273" level="INFO">${metrics} = {'snr': 0.28686952423926615, 'correlation': 0.49993005318160366, 'mse': 0.030631095876309054, 'rmse': 0.17501741592284195, 'energy_ratio': 0.8671689173933697, 'max_diff': 1.5519698302819327, 'mean_dif...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:52:37.923226" elapsed="33.192047"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:53:11.115273" level="INFO">SNR: 0.28686952423926615 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:53:11.115273" elapsed="0.001017"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:53:11.116313" level="INFO">Corrélation: 0.49993005318160366 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:53:11.116313" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:53:11.116313" level="INFO">MOS: 3.211390844787495/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:53:11.116313" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:53:11.116313" level="INFO">Clarté: 1.0284053909919495 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:53:11.116313" elapsed="0.001120"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:53:11.117433" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:53:11.117433" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:53:11.118222" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:53:11.117433" elapsed="0.000789"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:53:11.118890" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:53:11.118222" elapsed="0.000668"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:53:11.118890" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:53:11.118890" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:53:11.120013" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:53:11.118890" elapsed="0.001123"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:53:11.120013" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:53:11.120013" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:53:11.120013" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:53:11.120013" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:53:11.120013" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:53:11.120013" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:53:11.120013" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:53:11.120013" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:53:11.120013" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:52:37.923226" elapsed="33.196787">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:53:11.120013" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:51:54.922547" elapsed="76.198469">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:53:11.121037" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:51:54.922547" elapsed="76.198490"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:53:11.121106" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:53:11.121106" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:53:11.121106" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:53:11.121106" level="INFO">${attempt} = 12</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:53:11.121106" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:53:11.121106" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 12/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:53:11.121106" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:53:13.121467" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:53:11.121106" elapsed="2.000361"/>
</kw>
<status status="PASS" start="2025-06-11T11:53:11.121106" elapsed="2.000361"/>
</branch>
<status status="PASS" start="2025-06-11T11:53:11.121106" elapsed="2.000361"/>
</if>
<status status="PASS" start="2025-06-11T11:53:11.121106" elapsed="2.000361"/>
</branch>
<status status="PASS" start="2025-06-11T11:53:11.121106" elapsed="2.000361"/>
</if>
<var name="${index}">10</var>
<status status="PASS" start="2025-06-11T11:51:54.922528" elapsed="78.198939"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:53:13.167043" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:53:13.123546" elapsed="0.043497"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:53:13.167043" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:53:13.167043" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:53:13.167043" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:53:13.167043" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:53:13.122949" elapsed="0.045093"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:53:13.168042" elapsed="0.073451"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:53:16.242319" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:53:13.241493" elapsed="3.000826"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:53:16.313415" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:53:16.242319" elapsed="0.071096"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:53:16.314429" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:53:13.168042" elapsed="3.146387"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:53:16.314964" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:53:16.314964" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:53:16.314964" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:53:16.315981" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:53:16.314964" elapsed="0.001017"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:53:16.315981" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:53:16.315981" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:53:16.315981" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:53:16.315981" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:53:16.314964" elapsed="0.001017"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:53:16.315981" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:53:16.315981" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:53:16.316988" elapsed="0.041676"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:53:16.315981" elapsed="0.042683"/>
</kw>
<status status="PASS" start="2025-06-11T11:53:16.315981" elapsed="0.042683"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:53:16.399857" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:53:16.359659" elapsed="0.040198"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:53:16.399857" elapsed="0.000992"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:53:16.400849" elapsed="0.462526"/>
</kw>
<msg time="2025-06-11T11:53:16.863375" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:53:16.400849" elapsed="0.462526"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:53:16.863375" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:53:16.315981" elapsed="0.547394"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:53:18.863429" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:53:16.863375" elapsed="2.000054"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:53:37.264618" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:53:18.863429" elapsed="18.401189"/>
</kw>
<msg time="2025-06-11T11:53:37.264618" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:53:18.863429" elapsed="18.401189"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:53:37.264618" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:53:55.576887" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:53:37.264618" elapsed="18.312269"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:53:55.622545" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:53:55.576887" elapsed="0.046657"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:53:55.623544" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:53:55.623544" elapsed="0.463644"/>
</kw>
<msg time="2025-06-11T11:53:56.087188" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:53:55.623544" elapsed="0.463644"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:53:56.087188" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:53:55.576887" elapsed="0.510301"/>
</kw>
<status status="PASS" start="2025-06-11T11:53:16.314429" elapsed="39.772759"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:54:29.203149" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_115415.png</msg>
<msg time="2025-06-11T11:54:29.203149" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:53:58

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.043s
Ajustement: -43.3ms
Corrélation initiale: 0.678
Original length: 802949, Recorded length: 802949
Best lag: 0 samples (0.000 seconds)
Final lengths - Original: 802949, Aligned: 802949
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 2.1711
 correlation: 0.6781
         mse: 0.0199
        rmse: 0.1410
energy_ratio: 0.8760
    max_diff: 0.9700
   mean_diff: 0.0947
         mos: 3.5006
     clarity: 1.0316
  clarity_db: 0.1352

=== Résultat: ÉCHEC ===
SNR: 2.17 dB (seuil: 5 dB)
Corrélation: 0.678 (seuil: 0.8)
MOS: 3.50/5 (seuil: 2.5)
Clarté: 1.032 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:54:29.204121" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:54:29.204121" level="INFO">${metrics} = {'snr': 2.171059146237841, 'correlation': 0.6781443693781679, 'mse': 0.01986792128148258, 'rmse': 0.1409536139355163, 'energy_ratio': 0.8760183444570444, 'max_diff': 0.9700058560564928, 'mean_diff': 0...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:53:56.087720" elapsed="33.116401"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:54:29.204121" level="INFO">SNR: 2.171059146237841 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:54:29.204121" elapsed="0.001002"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:54:29.205123" level="INFO">Corrélation: 0.6781443693781679 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:54:29.205123" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:54:29.206195" level="INFO">MOS: 3.500615609103315/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:54:29.206195" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:54:29.207165" level="INFO">Clarté: 1.0316306845736827 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:54:29.206195" elapsed="0.000970"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:54:29.207165" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:54:29.207165" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:54:29.208810" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:54:29.207165" elapsed="0.001692"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:54:29.209384" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:54:29.208857" elapsed="0.000527"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:54:29.209384" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:54:29.209384" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:54:29.210378" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:54:29.209384" elapsed="0.000994"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:54:29.210378" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:54:29.210378" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:54:29.210378" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:54:29.210378" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:54:29.210378" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:54:29.210378" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:54:29.210378" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:54:29.210378" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:54:29.210378" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:53:56.087720" elapsed="33.122658">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:54:29.211378" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:53:13.122427" elapsed="76.088951">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:54:29.218440" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:53:13.121991" elapsed="76.096449"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:54:29.220497" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:54:29.220497" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:54:29.219436" elapsed="0.001061"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:54:29.221482" level="INFO">${attempt} = 13</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:54:29.221482" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:54:29.222275" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 13/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:54:29.222161" elapsed="0.000114"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:54:31.222889" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:54:29.222275" elapsed="2.000614"/>
</kw>
<status status="PASS" start="2025-06-11T11:54:29.221482" elapsed="2.001407"/>
</branch>
<status status="PASS" start="2025-06-11T11:54:29.221482" elapsed="2.001407"/>
</if>
<status status="PASS" start="2025-06-11T11:54:29.220497" elapsed="2.002392"/>
</branch>
<status status="PASS" start="2025-06-11T11:54:29.219436" elapsed="2.003453"/>
</if>
<var name="${index}">11</var>
<status status="PASS" start="2025-06-11T11:53:13.121467" elapsed="78.101422"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:54:31.259871" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:54:31.224503" elapsed="0.035368"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:54:31.259871" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:54:31.259871" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:54:31.259871" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:54:31.259871" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:54:31.224503" elapsed="0.035368"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:54:31.260869" elapsed="0.042420"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:54:34.303658" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:54:31.303289" elapsed="3.000369"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:54:34.381295" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:54:34.303658" elapsed="0.077637"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:54:34.381295" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:54:31.259871" elapsed="3.122389"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:54:34.382260" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:54:34.382260" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:54:34.383341" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:54:34.383341" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:54:34.382260" elapsed="0.001081"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:54:34.383341" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:54:34.383341" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:54:34.383341" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:54:34.383341" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:54:34.382260" elapsed="0.001081"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:54:34.383341" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:54:34.383341" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:54:34.384353" elapsed="0.045831"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:54:34.384353" elapsed="0.045831"/>
</kw>
<status status="PASS" start="2025-06-11T11:54:34.384353" elapsed="0.045831"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:54:34.472077" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:54:34.430184" elapsed="0.041893"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:54:34.473066" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:54:34.473066" elapsed="0.456567"/>
</kw>
<msg time="2025-06-11T11:54:34.929633" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:54:34.473066" elapsed="0.456567"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:54:34.929633" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:54:34.383341" elapsed="0.547292"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:54:36.931588" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:54:34.930633" elapsed="2.000955"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:54:55.339073" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:54:36.931588" elapsed="18.408485"/>
</kw>
<msg time="2025-06-11T11:54:55.340073" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:54:36.931588" elapsed="18.408485"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:54:55.340073" elapsed="0.001000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:55:13.653293" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:54:55.341073" elapsed="18.312220"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:55:13.706278" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:55:13.653293" elapsed="0.052985"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:55:13.706278" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:55:13.706278" elapsed="0.461138"/>
</kw>
<msg time="2025-06-11T11:55:14.167416" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:55:13.706278" elapsed="0.461138"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:55:14.167416" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:55:13.653293" elapsed="0.514123"/>
</kw>
<status status="PASS" start="2025-06-11T11:54:34.382260" elapsed="39.785156"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:55:51.029951" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_115534.png</msg>
<msg time="2025-06-11T11:55:51.029951" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:55:16

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.043s
Ajustement: -43.0ms
Corrélation initiale: 0.334
Original length: 802888, Recorded length: 802888
Best lag: -137 samples (-0.003 seconds)
Final lengths - Original: 802888, Aligned: 802888
Décalage temporel final: -0.003 secondes

=== Résultats ===
Décalage temporel: -0.003 secondes
         snr: -0.2732
 correlation: 0.4302
         mse: 0.0349
        rmse: 0.1867
energy_ratio: 0.8654
    max_diff: 1.7598
   mean_diff: 0.1121
         mos: 3.1054
     clarity: 1.0690
  clarity_db: 0.2897

=== Résultat: ÉCHEC ===
SNR: -0.27 dB (seuil: 5 dB)
Corrélation: 0.430 (seuil: 0.8)
MOS: 3.11/5 (seuil: 2.5)
Clarté: 1.069 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:55:51.029951" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:55:51.029951" level="INFO">${metrics} = {'snr': -0.27320518289372386, 'correlation': 0.4302395291317124, 'mse': 0.034869505215095034, 'rmse': 0.1867337816654904, 'energy_ratio': 0.8654103015527436, 'max_diff': 1.7598299155269186, 'mean_diff...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:55:14.168510" elapsed="36.861441"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:55:51.030974" level="INFO">SNR: -0.27320518289372386 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:55:51.029951" elapsed="0.001023"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:55:51.030974" level="INFO">Corrélation: 0.4302395291317124 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:55:51.030974" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:55:51.031969" level="INFO">MOS: 3.105359227642306/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:55:51.030974" elapsed="0.000995"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:55:51.031969" level="INFO">Clarté: 1.068976109867098 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:55:51.031969" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:55:51.032968" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:55:51.031969" elapsed="0.000999"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:55:51.032968" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:55:51.032968" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:55:51.033986" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:55:51.032968" elapsed="0.001018"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:55:51.034509" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:55:51.034509" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:55:51.034509" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:55:51.034509" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:55:51.035522" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:55:51.034509" elapsed="0.001013"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:55:51.035522" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:55:51.035522" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:55:51.034509" elapsed="0.001013">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:55:51.035522" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:55:51.035522" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:55:51.034509" elapsed="0.001013">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:55:51.035522" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:55:14.167416" elapsed="36.868106">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:55:51.035522" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:54:31.223890" elapsed="79.811632">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:55:51.035522" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:54:31.222889" elapsed="79.812633"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:55:51.035522" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:55:51.035522" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:55:51.035522" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:55:51.036540" level="INFO">${attempt} = 14</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:55:51.036540" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:55:51.037070" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 14/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:55:51.037070" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:55:53.037344" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:55:51.037070" elapsed="2.000274"/>
</kw>
<status status="PASS" start="2025-06-11T11:55:51.037070" elapsed="2.000274"/>
</branch>
<status status="PASS" start="2025-06-11T11:55:51.037070" elapsed="2.000274"/>
</if>
<status status="PASS" start="2025-06-11T11:55:51.035522" elapsed="2.001822"/>
</branch>
<status status="PASS" start="2025-06-11T11:55:51.035522" elapsed="2.001822"/>
</if>
<var name="${index}">12</var>
<status status="PASS" start="2025-06-11T11:54:31.222889" elapsed="81.814455"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:55:53.081922" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:55:53.038331" elapsed="0.043591"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:55:53.081922" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:55:53.081922" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:55:53.081922" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:55:53.081922" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:55:53.038331" elapsed="0.044591"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:55:53.082922" elapsed="0.054524"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:55:56.138239" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:55:53.137446" elapsed="3.000793"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:55:56.223675" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:55:56.138779" elapsed="0.084896"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:55:56.223675" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:55:53.082922" elapsed="3.140753"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:55:56.225559" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:55:56.224625" elapsed="0.000934"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:55:56.226558" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:55:56.226558" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:55:56.225559" elapsed="0.000999"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:55:56.226558" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:55:56.226558" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:55:56.226558" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:55:56.226558" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:55:56.225559" elapsed="0.000999"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:55:56.227561" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:55:56.227561" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:55:56.228083" elapsed="0.055005"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:55:56.227561" elapsed="0.055527"/>
</kw>
<status status="PASS" start="2025-06-11T11:55:56.227561" elapsed="0.055527"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:55:56.331121" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:55:56.283088" elapsed="0.048033"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:55:56.331121" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:55:56.331121" elapsed="0.480080"/>
</kw>
<msg time="2025-06-11T11:55:56.811201" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:55:56.331121" elapsed="0.480080"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:55:56.811201" elapsed="0.000770"/>
</kw>
<status status="PASS" start="2025-06-11T11:55:56.227561" elapsed="0.584410"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:55:58.812489" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:55:56.811971" elapsed="2.000518"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:56:17.244049" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:55:58.812489" elapsed="18.431560"/>
</kw>
<msg time="2025-06-11T11:56:17.244049" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:55:58.812489" elapsed="18.431560"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:56:17.245048" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:56:35.557458" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:56:17.245048" elapsed="18.312410"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:56:35.608734" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:56:35.557458" elapsed="0.051276"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:56:35.608734" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:56:35.609729" elapsed="0.475715"/>
</kw>
<msg time="2025-06-11T11:56:36.085444" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:56:35.609729" elapsed="0.475715"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:56:36.085444" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:56:35.557458" elapsed="0.527986"/>
</kw>
<status status="PASS" start="2025-06-11T11:55:56.223675" elapsed="39.861769"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:57:12.093316" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_115656.png</msg>
<msg time="2025-06-11T11:57:12.093316" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:56:38

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.17s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.034s
Ajustement: -33.9ms
Corrélation initiale: 0.732
Original length: 802884, Recorded length: 802884
Best lag: 1 samples (0.000 seconds)
Final lengths - Original: 802883, Aligned: 802883
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 3.0050
 correlation: 0.7337
         mse: 0.0164
        rmse: 0.1280
energy_ratio: 0.8665
    max_diff: 1.3406
   mean_diff: 0.0815
         mos: 3.6006
     clarity: 1.0168
  clarity_db: 0.0722

=== Résultat: ÉCHEC ===
SNR: 3.00 dB (seuil: 5 dB)
Corrélation: 0.734 (seuil: 0.8)
MOS: 3.60/5 (seuil: 2.5)
Clarté: 1.017 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:57:12.093316" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:57:12.093316" level="INFO">${metrics} = {'snr': 3.0049781586080835, 'correlation': 0.7336688371140677, 'mse': 0.016391837291201146, 'rmse': 0.12803061075852581, 'energy_ratio': 0.8664942977182185, 'max_diff': 1.3405989696088143, 'mean_diff'...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:56:36.085444" elapsed="36.007872"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:57:12.094314" level="INFO">SNR: 3.0049781586080835 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:57:12.093316" elapsed="0.000998"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:57:12.094314" level="INFO">Corrélation: 0.7336688371140677 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:57:12.094314" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:57:12.094314" level="INFO">MOS: 3.6006017308812046/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:57:12.094314" elapsed="0.001002"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:57:12.095316" level="INFO">Clarté: 1.0167523470636979 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:57:12.095316" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:57:12.095316" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:57:12.095316" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:57:12.096315" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:57:12.096315" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:57:12.097440" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:57:12.096315" elapsed="0.001125"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:57:12.097440" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:57:12.097440" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:57:12.098423" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:57:12.097440" elapsed="0.000983"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:57:12.098423" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:57:12.098423" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:57:12.098423" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:57:12.098423" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:57:12.098423" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:57:12.098423" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:57:12.098423" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:57:12.098423" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:57:12.098423" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:56:36.085444" elapsed="36.012979">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:57:12.098423" elapsed="0.001001"/>
</kw>
<status status="FAIL" start="2025-06-11T11:55:53.037344" elapsed="79.062080">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:57:12.099424" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:55:53.037344" elapsed="79.062080"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:57:12.099424" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:57:12.099424" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:57:12.099424" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:57:12.099424" level="INFO">${attempt} = 15</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:57:12.099424" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:57:12.099424" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 15/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:57:12.099424" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:57:14.099635" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:57:12.099424" elapsed="2.000211"/>
</kw>
<status status="PASS" start="2025-06-11T11:57:12.099424" elapsed="2.000211"/>
</branch>
<status status="PASS" start="2025-06-11T11:57:12.099424" elapsed="2.000211"/>
</if>
<status status="PASS" start="2025-06-11T11:57:12.099424" elapsed="2.000211"/>
</branch>
<status status="PASS" start="2025-06-11T11:57:12.099424" elapsed="2.000211"/>
</if>
<var name="${index}">13</var>
<status status="PASS" start="2025-06-11T11:55:53.037344" elapsed="81.062291"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:57:14.149878" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:57:14.101234" elapsed="0.048644"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:57:14.150879" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:57:14.150879" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:57:14.150879" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:57:14.150879" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:57:14.100635" elapsed="0.051247"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:57:14.151882" elapsed="0.069448"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:57:17.222055" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:57:14.221961" elapsed="3.000622"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:57:17.311730" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:57:17.222583" elapsed="0.089147"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:57:17.312715" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:57:14.151882" elapsed="3.160833"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:57:17.312715" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:57:17.312715" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:57:17.313716" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:57:17.313716" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:57:17.312715" elapsed="0.001001"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:57:17.314716" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:57:17.313716" elapsed="0.001000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:57:17.314716" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:57:17.314716" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:57:17.312715" elapsed="0.002001"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:57:17.314716" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:57:17.314716" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:57:17.315716" elapsed="0.063493"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:57:17.314716" elapsed="0.064493"/>
</kw>
<status status="PASS" start="2025-06-11T11:57:17.314716" elapsed="0.064493"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:57:17.434978" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:57:17.379209" elapsed="0.055769"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:57:17.434978" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:57:17.434978" elapsed="0.487533"/>
</kw>
<msg time="2025-06-11T11:57:17.923512" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:57:17.434978" elapsed="0.488534"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:57:17.923512" elapsed="0.001337"/>
</kw>
<status status="PASS" start="2025-06-11T11:57:17.314716" elapsed="0.610133"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:57:19.925555" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:57:17.924849" elapsed="2.000706"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:57:38.329960" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:57:19.926084" elapsed="18.403876"/>
</kw>
<msg time="2025-06-11T11:57:38.330530" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:57:19.926084" elapsed="18.404446"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:57:38.330530" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:57:56.642820" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:57:38.330530" elapsed="18.312290"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:57:56.686833" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:57:56.642820" elapsed="0.044013"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:57:56.687367" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:57:56.687367" elapsed="0.470059"/>
</kw>
<msg time="2025-06-11T11:57:57.157426" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:57:56.687367" elapsed="0.470059"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:57:57.157426" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:57:56.642820" elapsed="0.515606"/>
</kw>
<status status="PASS" start="2025-06-11T11:57:17.312715" elapsed="39.845711"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:58:33.016241" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_115817.png</msg>
<msg time="2025-06-11T11:58:33.017231" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:57:59

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: 0.038s
Ajustement: 38.5ms
Corrélation initiale: 0.161
Original length: 799356, Recorded length: 799356
Best lag: -3821 samples (-0.087 seconds)
Final lengths - Original: 799356, Aligned: 799356
Décalage temporel final: -0.087 secondes

=== Résultats ===
Décalage temporel: -0.087 secondes
         snr: -1.4703
 correlation: 0.2532
         mse: 0.0454
        rmse: 0.2131
energy_ratio: 0.8772
    max_diff: 1.3563
   mean_diff: 0.1569
         mos: 2.8450
     clarity: 1.0516
  clarity_db: 0.2183

=== Résultat: ÉCHEC ===
SNR: -1.47 dB (seuil: 5 dB)
Corrélation: 0.253 (seuil: 0.8)
MOS: 2.85/5 (seuil: 2.5)
Clarté: 1.052 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:58:33.017231" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:58:33.017231" level="INFO">${metrics} = {'snr': -1.470279205382981, 'correlation': 0.25319060111127395, 'mse': 0.04542082585853735, 'rmse': 0.2131216222220011, 'energy_ratio': 0.8771663537963188, 'max_diff': 1.356341287571739, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:57:57.158426" elapsed="35.858805"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:58:33.018232" level="INFO">SNR: -1.470279205382981 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:58:33.017231" elapsed="0.001001"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:58:33.018232" level="INFO">Corrélation: 0.25319060111127395 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:58:33.018232" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:58:33.018232" level="INFO">MOS: 2.8450175531182094/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:58:33.018232" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:58:33.019234" level="INFO">Clarté: 1.05156010152249 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:58:33.019234" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:58:33.019749" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:58:33.019234" elapsed="0.000515"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:58:33.020748" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:58:33.019749" elapsed="0.000999"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:58:33.020748" level="INFO">${mos_ok} = False</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:58:33.020748" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:58:33.020748" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:58:33.020748" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:58:33.022190" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:58:33.020748" elapsed="0.001442"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:58:33.022190" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:58:33.022190" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:58:33.022190" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:58:33.022190" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:58:33.022190" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:58:33.022190" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:58:33.022190" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:58:33.022190" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:58:33.023101" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:57:57.158426" elapsed="35.864675">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:58:33.023101" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:57:14.100635" elapsed="78.922466">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:58:33.023101" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:57:14.099635" elapsed="78.923466"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:58:33.023101" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:58:33.024102" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:58:33.023101" elapsed="0.001001"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:58:33.024102" level="INFO">${attempt} = 16</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:58:33.024102" elapsed="0.001001"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:58:33.025103" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 16/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:58:33.025103" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:58:35.025646" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:58:33.025103" elapsed="2.000543"/>
</kw>
<status status="PASS" start="2025-06-11T11:58:33.025103" elapsed="2.000543"/>
</branch>
<status status="PASS" start="2025-06-11T11:58:33.025103" elapsed="2.000543"/>
</if>
<status status="PASS" start="2025-06-11T11:58:33.024102" elapsed="2.001544"/>
</branch>
<status status="PASS" start="2025-06-11T11:58:33.023101" elapsed="2.002545"/>
</if>
<var name="${index}">14</var>
<status status="PASS" start="2025-06-11T11:57:14.099635" elapsed="80.926011"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:58:35.068039" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:58:35.027225" elapsed="0.040814"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:58:35.069049" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:58:35.068039" elapsed="0.001547"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:58:35.069586" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:58:35.069586" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:58:35.027225" elapsed="0.042361"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:58:35.069586" elapsed="0.054298"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:58:38.125569" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:58:35.124859" elapsed="3.000710"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:58:38.226128" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:58:38.125569" elapsed="0.100559"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:58:38.226128" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:58:35.069586" elapsed="3.156542"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:58:38.227128" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:58:38.227128" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:58:38.228130" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:58:38.228130" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:58:38.227128" elapsed="0.001002"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:58:38.229133" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:58:38.228130" elapsed="0.001003"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:58:38.229133" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:58:38.229133" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:58:38.227128" elapsed="0.002005"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:58:38.229664" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:58:38.229133" elapsed="0.000531"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:58:38.230657" elapsed="0.056442"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:58:38.229664" elapsed="0.057435"/>
</kw>
<status status="PASS" start="2025-06-11T11:58:38.229664" elapsed="0.057435"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:58:38.333779" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:58:38.287099" elapsed="0.046680"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:58:38.333779" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:58:38.333779" elapsed="0.454354"/>
</kw>
<msg time="2025-06-11T11:58:38.788133" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:58:38.333779" elapsed="0.454354"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:58:38.788133" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:58:38.229664" elapsed="0.559133"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:58:40.789576" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:58:38.788797" elapsed="2.000779"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:58:59.202110" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:58:40.790565" elapsed="18.411545"/>
</kw>
<msg time="2025-06-11T11:58:59.202110" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:58:40.789576" elapsed="18.412534"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:58:59.202110" elapsed="0.000952"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:59:17.515487" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:58:59.203062" elapsed="18.312425"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:59:17.568261" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:59:17.515487" elapsed="0.052774"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:59:17.568261" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:59:17.568261" elapsed="0.465542"/>
</kw>
<msg time="2025-06-11T11:59:18.033803" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:59:17.568261" elapsed="0.465542"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:59:18.033803" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:59:17.515487" elapsed="0.518316"/>
</kw>
<status status="PASS" start="2025-06-11T11:58:38.226128" elapsed="39.807675"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:59:53.086325" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_115938.png</msg>
<msg time="2025-06-11T11:59:53.086325" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:59:20

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.17s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.041s
Ajustement: -40.7ms
Corrélation initiale: 0.229
Original length: 802896, Recorded length: 802896
Best lag: 0 samples (0.000 seconds)
Final lengths - Original: 802896, Aligned: 802896
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: -1.6003
 correlation: 0.2289
         mse: 0.0473
        rmse: 0.2176
energy_ratio: 0.8735
    max_diff: 1.5083
   mean_diff: 0.1461
         mos: 2.8107
     clarity: 1.0495
  clarity_db: 0.2099

=== Résultat: ÉCHEC ===
SNR: -1.60 dB (seuil: 5 dB)
Corrélation: 0.229 (seuil: 0.8)
MOS: 2.81/5 (seuil: 2.5)
Clarté: 1.050 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:59:53.086325" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:59:53.087340" level="INFO">${metrics} = {'snr': -1.6003061307098432, 'correlation': 0.22894982597728725, 'mse': 0.04733168297167801, 'rmse': 0.2175584587454094, 'energy_ratio': 0.8735007025157466, 'max_diff': 1.5082564759505166, 'mean_diff'...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:59:18.033803" elapsed="35.053537"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:59:53.087898" level="INFO">SNR: -1.6003061307098432 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:59:53.087340" elapsed="0.000558"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:59:53.087898" level="INFO">Corrélation: 0.22894982597728725 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:59:53.087898" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:59:53.087898" level="INFO">MOS: 2.810727545944351/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:59:53.087898" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:59:53.088897" level="INFO">Clarté: 1.0495074639122193 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:59:53.087898" elapsed="0.000999"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:59:53.090138" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:59:53.088897" elapsed="0.001241"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:59:53.090138" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:59:53.090138" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:59:53.091132" level="INFO">${mos_ok} = False</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:59:53.091132" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:59:53.092137" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:59:53.091132" elapsed="0.001005"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:59:53.092137" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:59:53.092137" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:59:53.093134" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:59:53.092137" elapsed="0.000997"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:59:53.093134" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:59:53.093134" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:59:53.092137" elapsed="0.000997">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:59:53.093134" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:59:53.093134" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:59:53.092137" elapsed="0.000997">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:59:53.093134" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:59:18.033803" elapsed="35.059331">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:59:53.093134" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:58:35.027225" elapsed="78.065909">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:59:53.093134" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:58:35.026648" elapsed="78.066486"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:59:53.094132" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:59:53.094132" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:59:53.093134" elapsed="0.000998"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:59:53.094132" level="INFO">${attempt} = 17</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:59:53.094132" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:59:53.094132" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 17/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:59:53.094132" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:59:55.095042" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:59:53.094775" elapsed="2.000267"/>
</kw>
<status status="PASS" start="2025-06-11T11:59:53.094132" elapsed="2.000910"/>
</branch>
<status status="PASS" start="2025-06-11T11:59:53.094132" elapsed="2.000910"/>
</if>
<status status="PASS" start="2025-06-11T11:59:53.094132" elapsed="2.000910"/>
</branch>
<status status="PASS" start="2025-06-11T11:59:53.093134" elapsed="2.001908"/>
</if>
<var name="${index}">15</var>
<status status="PASS" start="2025-06-11T11:58:35.026648" elapsed="80.068394"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:59:55.133354" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:59:55.095819" elapsed="0.037535"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:59:55.134379" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:59:55.134379" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:59:55.134379" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:59:55.134379" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:59:55.095819" elapsed="0.038560"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:59:55.134379" elapsed="0.052756"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:59:58.187546" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:59:55.187135" elapsed="3.000411"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:59:58.270727" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:59:58.187546" elapsed="0.083181"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:59:58.270727" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:59:55.134379" elapsed="3.136348"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:59:58.271996" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:59:58.271996" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:59:58.273952" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:59:58.273952" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:59:58.272952" elapsed="0.001000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:59:58.273952" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:59:58.273952" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:59:58.275399" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:59:58.275531" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:59:58.272952" elapsed="0.002579"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:59:58.275531" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:59:58.275531" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:59:58.276418" elapsed="0.050817"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:59:58.276418" elapsed="0.050817"/>
</kw>
<status status="PASS" start="2025-06-11T11:59:58.275531" elapsed="0.051704"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:59:58.376262" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:59:58.327235" elapsed="0.049027"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:59:58.376262" elapsed="0.000992"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:59:58.377254" elapsed="0.476167"/>
</kw>
<msg time="2025-06-11T11:59:58.853421" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:59:58.377254" elapsed="0.476167"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:59:58.854422" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:59:58.275531" elapsed="0.578891"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:00:00.854680" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:59:58.854422" elapsed="2.000258"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:00:19.260961" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:00:00.854680" elapsed="18.406281"/>
</kw>
<msg time="2025-06-11T12:00:19.260961" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:00:00.854680" elapsed="18.406281"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:00:19.260961" elapsed="0.001000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:00:37.575021" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:00:19.261961" elapsed="18.313060"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:00:37.631944" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:00:37.575021" elapsed="0.056923"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:00:37.631944" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:00:37.631944" elapsed="0.467399"/>
</kw>
<msg time="2025-06-11T12:00:38.099343" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:00:37.631944" elapsed="0.467399"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:00:38.099343" elapsed="0.000994"/>
</kw>
<status status="PASS" start="2025-06-11T12:00:37.575021" elapsed="0.525316"/>
</kw>
<status status="PASS" start="2025-06-11T11:59:58.271996" elapsed="39.828341"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:01:12.705238" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_120057.png</msg>
<msg time="2025-06-11T12:01:12.706240" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:00:40

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.089s
Ajustement: -88.5ms
Corrélation initiale: 0.476
Original length: 804577, Recorded length: 804577
Best lag: 2131 samples (0.048 seconds)
Final lengths - Original: 802446, Aligned: 802446
Décalage temporel final: 0.048 secondes

=== Résultats ===
Décalage temporel: 0.048 secondes
         snr: 5.2646
 correlation: 0.8430
         mse: 0.0097
        rmse: 0.0986
energy_ratio: 0.8717
    max_diff: 0.9876
   mean_diff: 0.0650
         mos: 3.8222
     clarity: 1.0204
  clarity_db: 0.0877

=== Résultat: SUCCÈS ===
SNR: 5.26 dB (seuil: 5 dB)
Corrélation: 0.843 (seuil: 0.8)
MOS: 3.82/5 (seuil: 2.5)
Clarté: 1.020 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:01:12.706240" level="INFO">${test_passed} = True</msg>
<msg time="2025-06-11T12:01:12.706240" level="INFO">${metrics} = {'snr': 5.264550257916253, 'correlation': 0.843016135783573, 'mse': 0.009729739955346645, 'rmse': 0.0986394442165336, 'energy_ratio': 0.8717131579260651, 'max_diff': 0.987625656439563, 'mean_diff': 0....</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:00:38.100337" elapsed="34.605903"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:01:12.707240" level="INFO">SNR: 5.264550257916253 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:01:12.707240" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:01:12.708272" level="INFO">Corrélation: 0.843016135783573 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:01:12.708272" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:01:12.708272" level="INFO">MOS: 3.822201373256938/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:01:12.708272" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:01:12.708272" level="INFO">Clarté: 1.020395516819059 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:01:12.708272" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:01:12.710748" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:01:12.709716" elapsed="0.001032"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:01:12.710748" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:01:12.710748" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:01:12.711763" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:01:12.710748" elapsed="0.001015"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:01:12.711763" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:01:12.711763" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:01:12.712783" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:01:12.711763" elapsed="0.001020"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:01:12.712783" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:01:12.712783" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:01:12.712783" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:01:12.712783" elapsed="0.000529">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:01:12.712783" elapsed="0.000577">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:01:12.713360" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:01:12.713360" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T12:01:12.712783" elapsed="0.000577">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:01:12.713360" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:00:38.100337" elapsed="34.613023">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:01:12.713360" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:59:55.095819" elapsed="77.617541">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:01:12.713360" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:59:55.095042" elapsed="77.618318"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:01:12.713360" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:01:12.713360" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:01:12.713360" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:01:12.713360" level="INFO">${attempt} = 18</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:01:12.713360" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:01:12.714354" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 18/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:01:12.713360" elapsed="0.000994"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:01:14.714741" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:01:12.714354" elapsed="2.000387"/>
</kw>
<status status="PASS" start="2025-06-11T12:01:12.713360" elapsed="2.001381"/>
</branch>
<status status="PASS" start="2025-06-11T12:01:12.713360" elapsed="2.001381"/>
</if>
<status status="PASS" start="2025-06-11T12:01:12.713360" elapsed="2.001381"/>
</branch>
<status status="PASS" start="2025-06-11T12:01:12.713360" elapsed="2.001381"/>
</if>
<var name="${index}">16</var>
<status status="PASS" start="2025-06-11T11:59:55.095042" elapsed="79.619699"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:01:14.757700" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:01:14.715751" elapsed="0.041949"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:01:14.758694" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:01:14.757700" elapsed="0.000994"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:01:14.758694" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:01:14.758694" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:01:14.715751" elapsed="0.042943"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:01:14.759692" elapsed="0.048756"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:01:17.808974" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:01:14.808448" elapsed="3.000526"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:01:17.896085" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:01:17.808974" elapsed="0.087111"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:01:17.896085" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:01:14.758694" elapsed="3.137391"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:01:17.897473" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:01:17.897473" elapsed="0.186924"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:01:18.085412" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:01:18.085412" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:01:18.084397" elapsed="0.001015"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:01:18.085412" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:01:18.085412" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:01:18.085412" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:01:18.085412" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:01:18.084397" elapsed="0.001015"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:01:18.086417" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:01:18.085412" elapsed="0.001005"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:01:18.086417" elapsed="0.048790"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:01:18.086417" elapsed="0.048790"/>
</kw>
<status status="PASS" start="2025-06-11T12:01:18.086417" elapsed="0.048790"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:01:18.185053" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:01:18.135207" elapsed="0.049846"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:01:18.185053" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:01:18.185053" elapsed="0.464063"/>
</kw>
<msg time="2025-06-11T12:01:18.649116" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:01:18.185053" elapsed="0.464063"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:01:18.649116" elapsed="0.001003"/>
</kw>
<status status="PASS" start="2025-06-11T12:01:18.086417" elapsed="0.563702"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:01:20.650570" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:01:18.650119" elapsed="2.000451"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:01:39.061096" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:01:20.650570" elapsed="18.410526"/>
</kw>
<msg time="2025-06-11T12:01:39.061096" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:01:20.650570" elapsed="18.410526"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:01:39.061096" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:01:57.373738" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:01:39.061096" elapsed="18.313175"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:01:57.428348" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:01:57.374271" elapsed="0.054077"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:01:57.429347" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:01:57.429347" elapsed="0.461275"/>
</kw>
<msg time="2025-06-11T12:01:57.891458" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:01:57.429347" elapsed="0.462111"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:01:57.891458" elapsed="0.000512"/>
</kw>
<status status="PASS" start="2025-06-11T12:01:57.374271" elapsed="0.517811"/>
</kw>
<status status="PASS" start="2025-06-11T12:01:17.896085" elapsed="39.995997"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:02:32.827882" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_120217.png</msg>
<msg time="2025-06-11T12:02:32.828797" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:01:59

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.064s
Ajustement: -63.7ms
Corrélation initiale: 0.386
Original length: 803752, Recorded length: 803752
Best lag: 855 samples (0.019 seconds)
Final lengths - Original: 802897, Aligned: 802897
Décalage temporel final: 0.019 secondes

=== Résultats ===
Décalage temporel: 0.019 secondes
         snr: 1.1240
 correlation: 0.5871
         mse: 0.0253
        rmse: 0.1590
energy_ratio: 0.8624
    max_diff: 0.9865
   mean_diff: 0.1160
         mos: 3.3495
     clarity: 1.0746
  clarity_db: 0.3124

=== Résultat: ÉCHEC ===
SNR: 1.12 dB (seuil: 5 dB)
Corrélation: 0.587 (seuil: 0.8)
MOS: 3.35/5 (seuil: 2.5)
Clarté: 1.075 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:02:32.828797" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T12:02:32.828797" level="INFO">${metrics} = {'snr': 1.1239512472757522, 'correlation': 0.5871032871233837, 'mse': 0.025277014013374934, 'rmse': 0.15898746495675353, 'energy_ratio': 0.8624292040734868, 'max_diff': 0.9865016807935443, 'mean_diff'...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:01:57.892082" elapsed="34.936715"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:02:32.828797" level="INFO">SNR: 1.1239512472757522 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:02:32.828797" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:02:32.829882" level="INFO">Corrélation: 0.5871032871233837 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:02:32.828797" elapsed="0.001085"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:02:32.829882" level="INFO">MOS: 3.34948199443909/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:02:32.829882" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:02:32.830881" level="INFO">Clarté: 1.0745710481640394 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:02:32.829882" elapsed="0.000999"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:02:32.831571" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:02:32.830881" elapsed="0.000690"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:02:32.831571" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:02:32.831571" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:02:32.832607" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:02:32.831571" elapsed="0.001036"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:02:32.832607" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:02:32.832607" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:02:32.833604" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:02:32.832607" elapsed="0.000997"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:02:32.833604" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:02:32.833604" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:02:32.833604" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:02:32.833604" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:02:32.833604" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:02:32.834236" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:02:32.834212" elapsed="0.000024"/>
</branch>
<status status="FAIL" start="2025-06-11T12:02:32.833604" elapsed="0.000632">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:02:32.834236" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:01:57.892082" elapsed="34.942154">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:02:32.834236" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:01:14.714741" elapsed="78.119495">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:02:32.834236" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:01:14.714741" elapsed="78.119495"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:02:32.834236" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:02:32.834236" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:02:32.834236" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:02:32.834236" level="INFO">${attempt} = 19</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:02:32.834236" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:02:32.834236" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 19/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:02:32.834236" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:02:34.835738" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:02:32.835322" elapsed="2.000416"/>
</kw>
<status status="PASS" start="2025-06-11T12:02:32.834236" elapsed="2.001502"/>
</branch>
<status status="PASS" start="2025-06-11T12:02:32.834236" elapsed="2.001502"/>
</if>
<status status="PASS" start="2025-06-11T12:02:32.834236" elapsed="2.001502"/>
</branch>
<status status="PASS" start="2025-06-11T12:02:32.834236" elapsed="2.001502"/>
</if>
<var name="${index}">17</var>
<status status="PASS" start="2025-06-11T12:01:14.714741" elapsed="80.120997"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:02:34.886012" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:02:34.836755" elapsed="0.049257"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:02:34.886012" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:02:34.886012" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:02:34.887021" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:02:34.887021" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:02:34.835738" elapsed="0.051283"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:02:34.887547" elapsed="0.048453"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:02:37.937623" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:02:34.936000" elapsed="3.001623"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:02:38.025218" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:02:37.937623" elapsed="0.087595"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:02:38.025218" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:02:34.887021" elapsed="3.138197"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:02:38.026291" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:02:38.026291" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:02:38.027242" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:02:38.027242" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:02:38.026291" elapsed="0.000951"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:02:38.027242" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:02:38.027242" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:02:38.027242" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:02:38.028232" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:02:38.026291" elapsed="0.001941"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:02:38.028232" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:02:38.028232" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:02:38.028232" elapsed="0.050760"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:02:38.028232" elapsed="0.051268"/>
</kw>
<status status="PASS" start="2025-06-11T12:02:38.028232" elapsed="0.051290"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:02:38.131459" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:02:38.079522" elapsed="0.051937"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:02:38.131459" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:02:38.131459" elapsed="0.467331"/>
</kw>
<msg time="2025-06-11T12:02:38.598790" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:02:38.131459" elapsed="0.467331"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:02:38.598790" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:02:38.028232" elapsed="0.570558"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:02:40.599008" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:02:38.598790" elapsed="2.000218"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:02:58.988347" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:02:40.599008" elapsed="18.389339"/>
</kw>
<msg time="2025-06-11T12:02:58.988347" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:02:40.599008" elapsed="18.389339"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:02:58.988347" elapsed="0.000982"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:03:17.302157" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:02:58.989329" elapsed="18.312828"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:03:17.361694" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:03:17.302710" elapsed="0.058984"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:03:17.361694" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:03:17.362801" elapsed="0.474536"/>
</kw>
<msg time="2025-06-11T12:03:17.837919" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:03:17.361694" elapsed="0.476249"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:03:17.837943" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:03:17.302157" elapsed="0.535786"/>
</kw>
<status status="PASS" start="2025-06-11T12:02:38.026291" elapsed="39.811652"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:03:53.078421" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_120338.png</msg>
<msg time="2025-06-11T12:03:53.079076" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:03:19

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.21s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.063s
Ajustement: -63.4ms
Corrélation initiale: 0.212
Original length: 805641, Recorded length: 805641
Best lag: 440 samples (0.010 seconds)
Final lengths - Original: 805201, Aligned: 805201
Décalage temporel final: 0.010 secondes

=== Résultats ===
Décalage temporel: 0.010 secondes
         snr: -1.3486
 correlation: 0.2660
         mse: 0.0449
        rmse: 0.2120
energy_ratio: 0.8566
    max_diff: 1.3799
   mean_diff: 0.1562
         mos: 2.8653
     clarity: 1.0310
  clarity_db: 0.1324

=== Résultat: ÉCHEC ===
SNR: -1.35 dB (seuil: 5 dB)
Corrélation: 0.266 (seuil: 0.8)
MOS: 2.87/5 (seuil: 2.5)
Clarté: 1.031 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:03:53.079093" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T12:03:53.079093" level="INFO">${metrics} = {'snr': -1.3486449370591111, 'correlation': 0.26604833923998067, 'mse': 0.04493154552817694, 'rmse': 0.21197062421047153, 'energy_ratio': 0.8566382319448929, 'max_diff': 1.3799308594161213, 'mean_diff...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:03:17.838504" elapsed="35.240589"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:03:53.079093" level="INFO">SNR: -1.3486449370591111 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:03:53.079093" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:03:53.080232" level="INFO">Corrélation: 0.26604833923998067 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:03:53.079093" elapsed="0.001139"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:03:53.080232" level="INFO">MOS: 2.8653122096056123/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:03:53.080232" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:03:53.081236" level="INFO">Clarté: 1.0309553989865887 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:03:53.080232" elapsed="0.001004"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:03:53.081997" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:03:53.081236" elapsed="0.000761"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:03:53.081997" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:03:53.081997" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:03:53.083020" level="INFO">${mos_ok} = False</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:03:53.081997" elapsed="0.001023"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:03:53.083020" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:03:53.083020" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:03:53.084027" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:03:53.084027" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:03:53.084027" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:03:53.084027" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:03:53.084027" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:03:53.084027" elapsed="0.000663">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:03:53.084027" elapsed="0.000663">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:03:53.084690" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:03:53.084690" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T12:03:53.084027" elapsed="0.000663">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:03:53.084690" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:03:17.838504" elapsed="35.246186">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:03:53.084690" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:02:34.835738" elapsed="78.248952">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:03:53.084690" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:02:34.835738" elapsed="78.248952"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:03:53.084690" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:03:53.084690" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:03:53.084690" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:03:53.084690" level="INFO">${attempt} = 20</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:03:53.084690" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:03:53.085820" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 20/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:03:53.084690" elapsed="0.001130"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:03:55.086380" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:03:53.085820" elapsed="2.000560"/>
</kw>
<status status="PASS" start="2025-06-11T12:03:53.084690" elapsed="2.001690"/>
</branch>
<status status="PASS" start="2025-06-11T12:03:53.084690" elapsed="2.001690"/>
</if>
<status status="PASS" start="2025-06-11T12:03:53.084690" elapsed="2.001690"/>
</branch>
<status status="PASS" start="2025-06-11T12:03:53.084690" elapsed="2.001690"/>
</if>
<var name="${index}">18</var>
<status status="PASS" start="2025-06-11T12:02:34.835738" elapsed="80.250642"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:03:55.133858" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:03:55.087397" elapsed="0.046461"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:03:55.135009" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:03:55.135009" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:03:55.135009" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:03:55.135009" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:03:55.086380" elapsed="0.048629"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:03:55.135009" elapsed="0.056061"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:03:58.192000" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:03:55.191070" elapsed="3.000930"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:03:58.280919" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:03:58.192000" elapsed="0.088919"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:03:58.280919" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:03:55.135009" elapsed="3.145910"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:03:58.281902" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:03:58.281902" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:03:58.281902" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:03:58.282917" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:03:58.281902" elapsed="0.001015"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:03:58.282917" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:03:58.282917" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:03:58.282917" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:03:58.282917" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:03:58.281902" elapsed="0.001015"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:03:58.282917" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:03:58.282917" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:03:58.283939" elapsed="0.052559"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:03:58.282917" elapsed="0.053581"/>
</kw>
<status status="PASS" start="2025-06-11T12:03:58.282917" elapsed="0.053581"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:03:58.383679" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:03:58.336498" elapsed="0.047181"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:03:58.383679" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:03:58.383679" elapsed="0.468037"/>
</kw>
<msg time="2025-06-11T12:03:58.851716" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:03:58.383679" elapsed="0.468037"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:03:58.852652" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:03:58.282917" elapsed="0.569735"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:04:00.853360" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:03:58.852652" elapsed="2.000708"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:04:19.255076" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:04:00.853360" elapsed="18.401716"/>
</kw>
<msg time="2025-06-11T12:04:19.255076" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:04:00.853360" elapsed="18.401716"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:04:19.255076" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:04:37.568318" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:04:19.256060" elapsed="18.312258"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:04:37.618060" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:04:37.568318" elapsed="0.049742"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:04:37.618060" elapsed="0.000997"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:04:37.619057" elapsed="0.466076"/>
</kw>
<msg time="2025-06-11T12:04:38.085133" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:04:37.619057" elapsed="0.466076"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:04:38.085133" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:04:37.568318" elapsed="0.516815"/>
</kw>
<status status="PASS" start="2025-06-11T12:03:58.280919" elapsed="39.804214"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:05:13.436916" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_120458.png</msg>
<msg time="2025-06-11T12:05:13.436916" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:04:40

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.041s
Ajustement: -41.1ms
Corrélation initiale: 0.839
Original length: 802491, Recorded length: 802491
Best lag: 1 samples (0.000 seconds)
Final lengths - Original: 802490, Aligned: 802490
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 5.1561
 correlation: 0.8389
         mse: 0.0100
        rmse: 0.0999
energy_ratio: 0.8694
    max_diff: 1.0458
   mean_diff: 0.0674
         mos: 3.8129
     clarity: 1.0467
  clarity_db: 0.1983

=== Résultat: SUCCÈS ===
SNR: 5.16 dB (seuil: 5 dB)
Corrélation: 0.839 (seuil: 0.8)
MOS: 3.81/5 (seuil: 2.5)
Clarté: 1.047 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:05:13.436916" level="INFO">${test_passed} = True</msg>
<msg time="2025-06-11T12:05:13.436916" level="INFO">${metrics} = {'snr': 5.1561174667411365, 'correlation': 0.8388642583981261, 'mse': 0.00997698353832811, 'rmse': 0.09988485139563512, 'energy_ratio': 0.8694337714939767, 'max_diff': 1.045827467172737, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:04:38.085133" elapsed="35.351783"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:05:13.437534" level="INFO">SNR: 5.1561174667411365 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:05:13.436916" elapsed="0.000618"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:05:13.437534" level="INFO">Corrélation: 0.8388642583981261 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:05:13.437534" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:05:13.438548" level="INFO">MOS: 3.8128818087473966/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:05:13.437534" elapsed="0.001014"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:05:13.439131" level="INFO">Clarté: 1.0467280096849412 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:05:13.438548" elapsed="0.000583"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:05:13.439657" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:05:13.439131" elapsed="0.000526"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:05:13.440655" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:05:13.439657" elapsed="0.000998"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:05:13.441701" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:05:13.440655" elapsed="0.001139"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:05:13.441794" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:05:13.441794" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:05:13.442690" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:05:13.441794" elapsed="0.000896"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:05:13.442690" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:05:13.442690" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:05:13.442690" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:05:13.442690" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:05:13.442690" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:05:13.442690" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:05:13.442690" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T12:05:13.442690" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:05:13.442690" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:04:38.085133" elapsed="35.357557">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:05:13.442690" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:03:55.086380" elapsed="78.357330">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:05:13.443710" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:03:55.086380" elapsed="78.357330"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:05:13.443710" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:05:13.443710" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:05:13.443710" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:05:13.443710" level="INFO">${attempt} = 21</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:05:13.443710" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:05:13.443710" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 21/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:05:13.443710" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:05:15.444669" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:05:13.443710" elapsed="2.000959"/>
</kw>
<status status="PASS" start="2025-06-11T12:05:13.443710" elapsed="2.000959"/>
</branch>
<status status="PASS" start="2025-06-11T12:05:13.443710" elapsed="2.000959"/>
</if>
<status status="PASS" start="2025-06-11T12:05:13.443710" elapsed="2.000959"/>
</branch>
<status status="PASS" start="2025-06-11T12:05:13.443710" elapsed="2.000959"/>
</if>
<var name="${index}">19</var>
<status status="PASS" start="2025-06-11T12:03:55.086380" elapsed="80.358289"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:05:15.485959" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:05:15.445636" elapsed="0.040323"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:05:15.487060" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:05:15.485959" elapsed="0.001101"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:05:15.487060" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:05:15.487060" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:05:15.445636" elapsed="0.041424"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:05:15.487060" elapsed="0.048195"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:05:18.535553" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:05:15.535255" elapsed="3.000298"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:05:18.619778" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:05:18.535553" elapsed="0.084225"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:05:18.620798" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:05:15.487060" elapsed="3.133738"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:05:18.621310" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:05:18.620798" elapsed="0.000607"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:05:18.622321" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:05:18.622321" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:05:18.621405" elapsed="0.000916"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:05:18.623321" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:05:18.622321" elapsed="0.001000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:05:18.623321" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:05:18.623321" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:05:18.621405" elapsed="0.001916"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:05:18.623321" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:05:18.623321" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:05:18.624323" elapsed="0.045698"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:05:18.624323" elapsed="0.045698"/>
</kw>
<status status="PASS" start="2025-06-11T12:05:18.624323" elapsed="0.045698"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:05:18.717433" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:05:18.670021" elapsed="0.047412"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:05:18.717433" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:05:18.718454" elapsed="0.467032"/>
</kw>
<msg time="2025-06-11T12:05:19.185486" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:05:18.718454" elapsed="0.467032"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:05:19.185486" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:05:18.623321" elapsed="0.562165"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:05:21.186092" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:05:19.185486" elapsed="2.000606"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:05:39.581955" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:05:21.186092" elapsed="18.396427"/>
</kw>
<msg time="2025-06-11T12:05:39.582519" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:05:21.186092" elapsed="18.396427"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:05:39.582519" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:05:57.895220" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:05:39.582519" elapsed="18.312701"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:05:57.943314" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:05:57.895220" elapsed="0.048094"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:05:57.943314" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:05:57.944298" elapsed="0.473766"/>
</kw>
<msg time="2025-06-11T12:05:58.418064" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:05:57.943314" elapsed="0.474750"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:05:58.418064" elapsed="0.001020"/>
</kw>
<status status="PASS" start="2025-06-11T12:05:57.895220" elapsed="0.523864"/>
</kw>
<status status="PASS" start="2025-06-11T12:05:18.620798" elapsed="39.798286"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:06:33.222514" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_120618.png</msg>
<msg time="2025-06-11T12:06:33.223514" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:06:00

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.041s
Ajustement: -41.0ms
Corrélation initiale: 0.375
Original length: 802717, Recorded length: 802717
Best lag: 0 samples (0.000 seconds)
Final lengths - Original: 802717, Aligned: 802717
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: -0.6940
 correlation: 0.3752
         mse: 0.0384
        rmse: 0.1960
energy_ratio: 0.8754
    max_diff: 1.8063
   mean_diff: 0.1221
         mos: 3.0225
     clarity: 1.0681
  clarity_db: 0.2861

=== Résultat: ÉCHEC ===
SNR: -0.69 dB (seuil: 5 dB)
Corrélation: 0.375 (seuil: 0.8)
MOS: 3.02/5 (seuil: 2.5)
Clarté: 1.068 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:06:33.223514" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T12:06:33.223514" level="INFO">${metrics} = {'snr': -0.6939700322731274, 'correlation': 0.3752084043854674, 'mse': 0.038403245290312985, 'rmse': 0.19596745977409868, 'energy_ratio': 0.875364012006396, 'max_diff': 1.8062993162013408, 'mean_diff'...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:05:58.419084" elapsed="34.804430"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:06:33.224515" level="INFO">SNR: -0.6939700322731274 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:06:33.223514" elapsed="0.001001"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:06:33.225568" level="INFO">Corrélation: 0.3752084043854674 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:06:33.224515" elapsed="0.001053"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:06:33.225568" level="INFO">MOS: 3.022491283971636/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:06:33.225568" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:06:33.226571" level="INFO">Clarté: 1.0681047302351887 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:06:33.226571" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:06:33.227158" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:06:33.226571" elapsed="0.000587"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:06:33.228149" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:06:33.227158" elapsed="0.000991"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:06:33.229121" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:06:33.228149" elapsed="0.000972"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:06:33.229121" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:06:33.229121" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:06:33.230204" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:06:33.229121" elapsed="0.001083"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:06:33.230204" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:06:33.230204" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:06:33.230204" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:06:33.230204" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:06:33.230204" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:06:33.230204" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:06:33.230204" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T12:06:33.230204" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:06:33.230204" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:05:58.419084" elapsed="34.811120">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:06:33.231499" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:05:15.445636" elapsed="77.785863">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:06:33.231579" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:05:15.444669" elapsed="77.786910"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:06:33.231579" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:06:33.231579" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:06:33.231579" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:06:33.231579" level="INFO">${attempt} = 22</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:06:33.231579" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:06:33.231579" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 22/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:06:33.231579" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:06:35.231913" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:06:33.231579" elapsed="2.000334"/>
</kw>
<status status="PASS" start="2025-06-11T12:06:33.231579" elapsed="2.000334"/>
</branch>
<status status="PASS" start="2025-06-11T12:06:33.231579" elapsed="2.000334"/>
</if>
<status status="PASS" start="2025-06-11T12:06:33.231579" elapsed="2.000334"/>
</branch>
<status status="PASS" start="2025-06-11T12:06:33.231579" elapsed="2.000334"/>
</if>
<var name="${index}">20</var>
<status status="PASS" start="2025-06-11T12:05:15.444669" elapsed="79.787244"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:06:35.275421" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:06:35.232896" elapsed="0.042525"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:06:35.275421" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:06:35.275421" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:06:35.276419" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:06:35.275421" elapsed="0.000998"/>
</kw>
<status status="PASS" start="2025-06-11T12:06:35.232896" elapsed="0.043523"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:06:35.276419" elapsed="0.046387"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:06:38.324713" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:06:35.323807" elapsed="3.000906"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:06:38.400370" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:06:38.324713" elapsed="0.075657"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:06:38.401387" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:06:35.276419" elapsed="3.124968"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:06:38.401387" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:06:38.401387" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:06:38.402423" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:06:38.402423" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:06:38.401387" elapsed="0.001036"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:06:38.402974" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:06:38.402974" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:06:38.402974" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:06:38.402974" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:06:38.401387" elapsed="0.001587"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:06:38.402974" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:06:38.402974" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:06:38.402974" elapsed="0.053125"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:06:38.402974" elapsed="0.053125"/>
</kw>
<status status="PASS" start="2025-06-11T12:06:38.402974" elapsed="0.053125"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:06:38.499780" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:06:38.456099" elapsed="0.043681"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:06:38.500774" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:06:38.500774" elapsed="0.452668"/>
</kw>
<msg time="2025-06-11T12:06:38.953442" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:06:38.500774" elapsed="0.452668"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:06:38.953442" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:06:38.402974" elapsed="0.551491"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:06:40.954779" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:06:38.954465" elapsed="2.000314"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:06:59.364128" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:06:40.954779" elapsed="18.409349"/>
</kw>
<msg time="2025-06-11T12:06:59.364128" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:06:40.954779" elapsed="18.409349"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:06:59.364128" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:07:17.676651" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:06:59.364128" elapsed="18.312523"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:07:17.723965" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:07:17.677271" elapsed="0.046694"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:07:17.723965" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:07:17.725089" elapsed="0.467915"/>
</kw>
<msg time="2025-06-11T12:07:18.193004" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:07:17.725089" elapsed="0.467915"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:07:18.193004" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:07:17.676651" elapsed="0.516353"/>
</kw>
<status status="PASS" start="2025-06-11T12:06:38.401387" elapsed="39.791617"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:07:52.894307" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_120738.png</msg>
<msg time="2025-06-11T12:07:52.894307" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:07:20

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.17s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.030s
Ajustement: -29.7ms
Corrélation initiale: 0.519
Original length: 802451, Recorded length: 802451
Best lag: -430 samples (-0.010 seconds)
Final lengths - Original: 802451, Aligned: 802451
Décalage temporel final: -0.010 secondes

=== Résultats ===
Décalage temporel: -0.010 secondes
         snr: 5.3693
 correlation: 0.8467
         mse: 0.0095
        rmse: 0.0975
energy_ratio: 0.8691
    max_diff: 1.0458
   mean_diff: 0.0608
         mos: 3.8308
     clarity: 1.0177
  clarity_db: 0.0762

=== Résultat: SUCCÈS ===
SNR: 5.37 dB (seuil: 5 dB)
Corrélation: 0.847 (seuil: 0.8)
MOS: 3.83/5 (seuil: 2.5)
Clarté: 1.018 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:07:52.894307" level="INFO">${test_passed} = True</msg>
<msg time="2025-06-11T12:07:52.894307" level="INFO">${metrics} = {'snr': 5.369337671669289, 'correlation': 0.8466864711013592, 'mse': 0.00949832412127078, 'rmse': 0.09745934599242281, 'energy_ratio': 0.8691275249273702, 'max_diff': 1.0457766421345172, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:07:18.193999" elapsed="34.700308"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:07:52.896172" level="INFO">SNR: 5.369337671669289 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:07:52.895398" elapsed="0.000774"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:07:52.896172" level="INFO">Corrélation: 0.8466864711013592 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:07:52.896172" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:07:52.896791" level="INFO">MOS: 3.830797272188403/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:07:52.896791" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:07:52.896791" level="INFO">Clarté: 1.017707893829415 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:07:52.896791" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:07:52.897883" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:07:52.896791" elapsed="0.001092"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:07:52.897883" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:07:52.897883" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:07:52.898887" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:07:52.897883" elapsed="0.001004"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:07:52.899509" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:07:52.898887" elapsed="0.000622"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:07:52.899509" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:07:52.899509" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:07:52.900602" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:07:52.899509" elapsed="0.001093"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:07:52.900602" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:07:52.900602" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:07:52.899509" elapsed="0.001093">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:07:52.900602" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:07:52.900602" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T12:07:52.899509" elapsed="0.001093">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:07:52.900602" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:07:18.193999" elapsed="34.706603">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:07:52.900602" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:06:35.231913" elapsed="77.668689">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:07:52.900602" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:06:35.231913" elapsed="77.668689"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:07:52.900602" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:07:52.900602" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:07:52.900602" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:07:52.901622" level="INFO">${attempt} = 23</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:07:52.900602" elapsed="0.001020"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:07:52.901687" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 23/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:07:52.901687" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:07:54.902448" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:07:52.901687" elapsed="2.000761"/>
</kw>
<status status="PASS" start="2025-06-11T12:07:52.901687" elapsed="2.000761"/>
</branch>
<status status="PASS" start="2025-06-11T12:07:52.901622" elapsed="2.000826"/>
</if>
<status status="PASS" start="2025-06-11T12:07:52.900602" elapsed="2.001846"/>
</branch>
<status status="PASS" start="2025-06-11T12:07:52.900602" elapsed="2.001846"/>
</if>
<var name="${index}">21</var>
<status status="PASS" start="2025-06-11T12:06:35.231913" elapsed="79.670535"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:07:54.946498" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:07:54.903063" elapsed="0.044533"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:07:54.947596" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:07:54.947596" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:07:54.947596" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:07:54.947596" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:07:54.903063" elapsed="0.044533"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:07:54.948620" elapsed="0.049969"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:07:57.998602" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:07:54.998589" elapsed="3.000013"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:07:58.078299" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:07:57.998602" elapsed="0.079697"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:07:58.078299" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:07:54.948620" elapsed="3.129679"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:07:58.079330" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:07:58.079330" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:07:58.080336" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:07:58.080336" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:07:58.079330" elapsed="0.001006"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:07:58.080336" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:07:58.080336" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:07:58.080336" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:07:58.080866" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:07:58.079330" elapsed="0.001536"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:07:58.080958" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:07:58.080866" elapsed="0.000092"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:07:58.080958" elapsed="0.045174"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:07:58.080958" elapsed="0.045174"/>
</kw>
<status status="PASS" start="2025-06-11T12:07:58.080958" elapsed="0.045174"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:07:58.168169" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:07:58.126132" elapsed="0.042037"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:07:58.168169" elapsed="0.001069"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:07:58.169238" elapsed="0.464913"/>
</kw>
<msg time="2025-06-11T12:07:58.634151" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:07:58.169238" elapsed="0.464913"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:07:58.634151" elapsed="0.000999"/>
</kw>
<status status="PASS" start="2025-06-11T12:07:58.080958" elapsed="0.554192"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:08:00.635394" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:07:58.635150" elapsed="2.000244"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:08:19.045103" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:08:00.635394" elapsed="18.409709"/>
</kw>
<msg time="2025-06-11T12:08:19.045103" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:08:00.635394" elapsed="18.409709"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:08:19.045103" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:08:37.358244" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:08:19.045103" elapsed="18.313141"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:08:37.403759" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:08:37.358244" elapsed="0.045515"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:08:37.403759" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:08:37.403759" elapsed="0.465652"/>
</kw>
<msg time="2025-06-11T12:08:37.869411" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:08:37.403759" elapsed="0.465652"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:08:37.869411" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:08:37.358244" elapsed="0.511167"/>
</kw>
<status status="PASS" start="2025-06-11T12:07:58.078299" elapsed="39.791112"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:09:13.569123" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_120858.png</msg>
<msg time="2025-06-11T12:09:13.569123" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:08:39

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.15s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.036s
Ajustement: -36.1ms
Corrélation initiale: 0.580
Original length: 802015, Recorded length: 802015
Best lag: -432 samples (-0.010 seconds)
Final lengths - Original: 802015, Aligned: 802015
Décalage temporel final: -0.010 secondes

=== Résultats ===
Décalage temporel: -0.010 secondes
         snr: 8.5204
 correlation: 0.9271
         mse: 0.0046
        rmse: 0.0678
energy_ratio: 0.8675
    max_diff: 1.0208
   mean_diff: 0.0468
         mos: 4.0533
     clarity: 1.0472
  clarity_db: 0.2003

=== Résultat: SUCCÈS ===
SNR: 8.52 dB (seuil: 5 dB)
Corrélation: 0.927 (seuil: 0.8)
MOS: 4.05/5 (seuil: 2.5)
Clarté: 1.047 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:09:13.569654" level="INFO">${test_passed} = True</msg>
<msg time="2025-06-11T12:09:13.569654" level="INFO">${metrics} = {'snr': 8.520401350685235, 'correlation': 0.9270528693046843, 'mse': 0.004591287911471864, 'rmse': 0.06775904302358368, 'energy_ratio': 0.8674570888116233, 'max_diff': 1.020845800730529, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:08:37.869411" elapsed="35.700243"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:09:13.569654" level="INFO">SNR: 8.520401350685235 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:09:13.569654" elapsed="0.000999"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:09:13.570653" level="INFO">Corrélation: 0.9270528693046843 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:09:13.570653" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:09:13.571655" level="INFO">MOS: 4.053279497193031/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:09:13.570653" elapsed="0.001002"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:09:13.572295" level="INFO">Clarté: 1.047193879529935 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:09:13.571655" elapsed="0.000640"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:09:13.573840" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:09:13.572295" elapsed="0.001545"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:09:13.574410" level="INFO">${correlation_ok} = True</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:09:13.573840" elapsed="0.000570"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:09:13.575362" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:09:13.575362" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:09:13.576362" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:09:13.575362" elapsed="0.001000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:09:13.576362" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:09:13.576362" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:09:13.577361" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:09:13.577361" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:09:13.577361" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:09:13.577361" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:09:13.577361" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:09:13.577361" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:09:13.577361" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T12:09:13.577361" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:09:13.577361" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:08:37.869411" elapsed="35.708950">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:09:13.578361" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:07:54.903063" elapsed="78.675298">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:09:13.578361" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:07:54.903063" elapsed="78.675298"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:09:13.578361" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:09:13.578361" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:09:13.578361" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:09:13.578361" level="INFO">${attempt} = 24</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:09:13.578361" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:09:13.579361" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 24/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:09:13.579361" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:09:15.580239" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:09:13.579361" elapsed="2.000878"/>
</kw>
<status status="PASS" start="2025-06-11T12:09:13.578361" elapsed="2.001878"/>
</branch>
<status status="PASS" start="2025-06-11T12:09:13.578361" elapsed="2.001878"/>
</if>
<status status="PASS" start="2025-06-11T12:09:13.578361" elapsed="2.001878"/>
</branch>
<status status="PASS" start="2025-06-11T12:09:13.578361" elapsed="2.001878"/>
</if>
<var name="${index}">22</var>
<status status="PASS" start="2025-06-11T12:07:54.902448" elapsed="80.677791"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:09:15.621120" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:09:15.583163" elapsed="0.037957"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:09:15.621120" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:09:15.621120" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:09:15.621120" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:09:15.621120" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:09:15.581216" elapsed="0.039904"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:09:15.622520" elapsed="0.047293"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:09:18.669962" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:09:15.669813" elapsed="3.000149"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:09:18.754941" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:09:18.669962" elapsed="0.084979"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:09:18.754941" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:09:15.622520" elapsed="3.132421"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:09:18.755867" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:09:18.754941" elapsed="0.000926"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:09:18.755867" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:09:18.756868" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:09:18.755867" elapsed="0.001001"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:09:18.756868" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:09:18.756868" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:09:18.756868" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:09:18.756868" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:09:18.755867" elapsed="0.001001"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:09:18.756868" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:09:18.756868" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:09:18.757899" elapsed="0.051632"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:09:18.756868" elapsed="0.052663"/>
</kw>
<status status="PASS" start="2025-06-11T12:09:18.756868" elapsed="0.052663"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:09:18.867710" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:09:18.809531" elapsed="0.058179"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:09:18.867710" elapsed="0.000518"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:09:18.868228" elapsed="0.467939"/>
</kw>
<msg time="2025-06-11T12:09:19.336167" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:09:18.868228" elapsed="0.467939"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:09:19.336167" elapsed="0.000999"/>
</kw>
<status status="PASS" start="2025-06-11T12:09:18.756868" elapsed="0.580298"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:09:21.337391" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:09:19.337166" elapsed="2.000225"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:09:39.763488" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:09:21.337391" elapsed="18.426097"/>
</kw>
<msg time="2025-06-11T12:09:39.763488" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:09:21.337391" elapsed="18.426097"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:09:39.764490" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:09:58.076611" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:09:39.764490" elapsed="18.312121"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:09:58.146907" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:09:58.076611" elapsed="0.070296"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:09:58.146907" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:09:58.146907" elapsed="0.469599"/>
</kw>
<msg time="2025-06-11T12:09:58.616506" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:09:58.146907" elapsed="0.469599"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:09:58.616506" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:09:58.076611" elapsed="0.539895"/>
</kw>
<status status="PASS" start="2025-06-11T12:09:18.754941" elapsed="39.861565"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:10:33.165660" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_121018.png</msg>
<msg time="2025-06-11T12:10:33.165660" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:10:00

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.041s
Ajustement: -40.8ms
Corrélation initiale: 0.661
Original length: 802466, Recorded length: 802466
Best lag: 0 samples (0.000 seconds)
Final lengths - Original: 802466, Aligned: 802466
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 1.9613
 correlation: 0.6605
         mse: 0.0208
        rmse: 0.1443
energy_ratio: 0.8659
    max_diff: 1.0123
   mean_diff: 0.1002
         mos: 3.4711
     clarity: 1.0309
  clarity_db: 0.1320

=== Résultat: ÉCHEC ===
SNR: 1.96 dB (seuil: 5 dB)
Corrélation: 0.661 (seuil: 0.8)
MOS: 3.47/5 (seuil: 2.5)
Clarté: 1.031 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:10:33.165660" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T12:10:33.165660" level="INFO">${metrics} = {'snr': 1.9612887457899044, 'correlation': 0.6605239926691903, 'mse': 0.020819842395821485, 'rmse': 0.14429082575070906, 'energy_ratio': 0.8658700650678526, 'max_diff': 1.0122805918353313, 'mean_diff'...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:09:58.617490" elapsed="34.548170"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:10:33.165660" level="INFO">SNR: 1.9612887457899044 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:10:33.165660" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:10:33.166675" level="INFO">Corrélation: 0.6605239926691903 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:10:33.165660" elapsed="0.001015"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:10:33.167238" level="INFO">MOS: 3.4710803410346243/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:10:33.166675" elapsed="0.000563"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:10:33.167238" level="INFO">Clarté: 1.0308698207087217 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:10:33.167238" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:10:33.168249" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:10:33.167238" elapsed="0.001011"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:10:33.168249" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:10:33.168249" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:10:33.169264" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:10:33.168249" elapsed="0.001015"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:10:33.169831" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:10:33.169264" elapsed="0.000567"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:10:33.170353" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:10:33.169831" elapsed="0.000522"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:10:33.170388" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:10:33.170388" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:10:33.170388" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:10:33.170388" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:10:33.170388" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:10:33.170910" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:10:33.170388" elapsed="0.000522"/>
</branch>
<status status="FAIL" start="2025-06-11T12:10:33.170388" elapsed="0.000618">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:10:33.171006" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:09:58.617490" elapsed="34.553516">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:10:33.171006" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:09:15.580239" elapsed="77.590767">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:10:33.171006" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:09:15.580239" elapsed="77.590767"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:10:33.171006" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:10:33.171006" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:10:33.171006" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:10:33.171006" level="INFO">${attempt} = 25</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:10:33.171006" elapsed="0.000946"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:10:33.171952" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 25/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:10:33.171952" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:10:35.172132" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:10:33.171952" elapsed="2.000180"/>
</kw>
<status status="PASS" start="2025-06-11T12:10:33.171952" elapsed="2.000180"/>
</branch>
<status status="PASS" start="2025-06-11T12:10:33.171952" elapsed="2.000180"/>
</if>
<status status="PASS" start="2025-06-11T12:10:33.171006" elapsed="2.001126"/>
</branch>
<status status="PASS" start="2025-06-11T12:10:33.171006" elapsed="2.001126"/>
</if>
<var name="${index}">23</var>
<status status="PASS" start="2025-06-11T12:09:15.580239" elapsed="79.592432"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:10:35.217833" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:10:35.173664" elapsed="0.044169"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:10:35.218802" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:10:35.217833" elapsed="0.000969"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:10:35.218802" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:10:35.218802" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:10:35.173664" elapsed="0.045138"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:10:35.219361" elapsed="0.057876"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:10:38.278847" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:10:35.277237" elapsed="3.001610"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:10:38.349044" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:10:38.278847" elapsed="0.070197"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:10:38.350014" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:10:35.219361" elapsed="3.130653"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:10:38.350014" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:10:38.350014" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:10:38.351029" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:10:38.351029" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:10:38.350014" elapsed="0.001015"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:10:38.351029" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:10:38.351029" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:10:38.351029" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:10:38.351029" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:10:38.350014" elapsed="0.001015"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:10:38.351029" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:10:38.351029" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:10:38.352055" elapsed="0.051213"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:10:38.352055" elapsed="0.051213"/>
</kw>
<status status="PASS" start="2025-06-11T12:10:38.352055" elapsed="0.051213"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:10:38.451460" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:10:38.403268" elapsed="0.048192"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:10:38.451460" elapsed="0.001053"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:10:38.452513" elapsed="0.460432"/>
</kw>
<msg time="2025-06-11T12:10:38.912945" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:10:38.452513" elapsed="0.460432"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:10:38.912945" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:10:38.352055" elapsed="0.560890"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:10:40.913422" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:10:38.912945" elapsed="2.000477"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:10:59.340214" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:10:40.913422" elapsed="18.427836"/>
</kw>
<msg time="2025-06-11T12:10:59.341369" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:10:40.913422" elapsed="18.427947"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:10:59.341369" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:11:17.653515" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:10:59.341369" elapsed="18.312146"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:11:17.726891" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:11:17.654229" elapsed="0.072662"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:11:17.726891" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:11:17.726891" elapsed="0.457889"/>
</kw>
<msg time="2025-06-11T12:11:18.184780" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:11:17.726891" elapsed="0.457889"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:11:18.184780" elapsed="0.000644"/>
</kw>
<status status="PASS" start="2025-06-11T12:11:17.653515" elapsed="0.531909"/>
</kw>
<status status="PASS" start="2025-06-11T12:10:38.350014" elapsed="39.835410"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:11:51.787594" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_121137.png</msg>
<msg time="2025-06-11T12:11:51.787594" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:11:20

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.034s
Ajustement: -34.1ms
Corrélation initiale: 0.526
Original length: 802445, Recorded length: 802445
Best lag: -437 samples (-0.010 seconds)
Final lengths - Original: 802445, Aligned: 802445
Décalage temporel final: -0.010 secondes

=== Résultats ===
Décalage temporel: -0.010 secondes
         snr: 5.8793
 correlation: 0.8641
         mse: 0.0084
        rmse: 0.0919
energy_ratio: 0.8739
    max_diff: 1.1573
   mean_diff: 0.0589
         mos: 3.8721
     clarity: 1.0426
  clarity_db: 0.1810

=== Résultat: SUCCÈS ===
SNR: 5.88 dB (seuil: 5 dB)
Corrélation: 0.864 (seuil: 0.8)
MOS: 3.87/5 (seuil: 2.5)
Clarté: 1.043 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:11:51.788119" level="INFO">${test_passed} = True</msg>
<msg time="2025-06-11T12:11:51.788119" level="INFO">${metrics} = {'snr': 5.879317727958105, 'correlation': 0.8641355819121244, 'mse': 0.008445371809946206, 'rmse': 0.09189870407109235, 'energy_ratio': 0.8738949386578806, 'max_diff': 1.157270973892205, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:11:18.185946" elapsed="33.602173"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:11:51.788119" level="INFO">SNR: 5.879317727958105 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:11:51.788119" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:11:51.789117" level="INFO">Corrélation: 0.8641355819121244 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:11:51.789117" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:11:51.789117" level="INFO">MOS: 3.8721354074128733/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:11:51.789117" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:11:51.790118" level="INFO">Clarté: 1.042567143027497 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:11:51.789117" elapsed="0.001001"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:11:51.791118" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:11:51.790118" elapsed="0.001000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:11:51.791118" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:11:51.791118" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:11:51.792117" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:11:51.791118" elapsed="0.000999"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:11:51.792646" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:11:51.792117" elapsed="0.000529"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:11:51.792646" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:11:51.792646" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:11:51.793638" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:11:51.792646" elapsed="0.000992"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:11:51.793638" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:11:51.793638" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:11:51.792646" elapsed="0.000992">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:11:51.793638" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:11:51.793638" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T12:11:51.792646" elapsed="0.000992">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:11:51.793638" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:11:18.185424" elapsed="33.608214">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:11:51.793638" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:10:35.173664" elapsed="76.619974">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:11:51.793638" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:10:35.172671" elapsed="76.620967"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:11:51.793638" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:11:51.793638" elapsed="0.001001"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:11:51.793638" elapsed="0.001001"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:11:51.794639" level="INFO">${attempt} = 26</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:11:51.794639" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:11:51.794639" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 26/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:11:51.794639" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:11:53.795104" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:11:51.794639" elapsed="2.000465"/>
</kw>
<status status="PASS" start="2025-06-11T12:11:51.794639" elapsed="2.000465"/>
</branch>
<status status="PASS" start="2025-06-11T12:11:51.794639" elapsed="2.000465"/>
</if>
<status status="PASS" start="2025-06-11T12:11:51.794639" elapsed="2.000465"/>
</branch>
<status status="PASS" start="2025-06-11T12:11:51.793638" elapsed="2.001466"/>
</if>
<var name="${index}">24</var>
<status status="PASS" start="2025-06-11T12:10:35.172671" elapsed="78.622433"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:11:53.834900" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:11:53.795675" elapsed="0.039225"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:11:53.834900" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:11:53.834900" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:11:53.834900" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:11:53.834900" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:11:53.795675" elapsed="0.040236"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:11:53.835911" elapsed="0.045961"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:11:56.883461" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:11:53.881872" elapsed="3.001589"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:11:56.953791" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:11:56.883461" elapsed="0.070330"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:11:56.953791" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:11:53.835911" elapsed="3.117880"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:11:56.954774" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:11:56.953791" elapsed="0.000983"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:11:56.955297" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:11:56.955297" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:11:56.954774" elapsed="0.000523"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:11:56.955297" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:11:56.955297" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:11:56.955297" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:11:56.956296" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:11:56.954774" elapsed="0.001522"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:11:56.956296" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:11:56.956296" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:11:56.956296" elapsed="0.044023"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:11:56.956296" elapsed="0.044023"/>
</kw>
<status status="PASS" start="2025-06-11T12:11:56.956296" elapsed="0.044023"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:11:57.037461" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:11:57.000319" elapsed="0.037142"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:11:57.037461" elapsed="0.001064"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:11:57.038525" elapsed="0.448774"/>
</kw>
<msg time="2025-06-11T12:11:57.487299" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:11:57.038525" elapsed="0.448774"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:11:57.488284" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:11:56.956296" elapsed="0.531988"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:11:59.488827" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:11:57.488284" elapsed="2.000543"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:12:17.883163" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:11:59.488827" elapsed="18.394336"/>
</kw>
<msg time="2025-06-11T12:12:17.884177" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:11:59.488827" elapsed="18.395350"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:12:17.884177" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:12:36.196845" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:12:17.884177" elapsed="18.312668"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:12:36.299051" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:12:36.197843" elapsed="0.101208"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:12:36.300052" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:12:36.300052" elapsed="0.462176"/>
</kw>
<msg time="2025-06-11T12:12:36.762228" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:12:36.300052" elapsed="0.462176"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:12:36.762228" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:12:36.196845" elapsed="0.565383"/>
</kw>
<status status="PASS" start="2025-06-11T12:11:56.953791" elapsed="39.809437"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:13:14.328993" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_121258.png</msg>
<msg time="2025-06-11T12:13:14.328993" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:12:38

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.17s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.052s
Ajustement: -51.9ms
Corrélation initiale: 0.575
Original length: 803368, Recorded length: 803368
Best lag: 432 samples (0.010 seconds)
Final lengths - Original: 802936, Aligned: 802936
Décalage temporel final: 0.010 secondes

=== Résultats ===
Décalage temporel: 0.010 secondes
         snr: 5.8037
 correlation: 0.8616
         mse: 0.0086
        rmse: 0.0928
energy_ratio: 0.8724
    max_diff: 0.8526
   mean_diff: 0.0636
         mos: 3.8661
     clarity: 1.0184
  clarity_db: 0.0792

=== Résultat: SUCCÈS ===
SNR: 5.80 dB (seuil: 5 dB)
Corrélation: 0.862 (seuil: 0.8)
MOS: 3.87/5 (seuil: 2.5)
Clarté: 1.018 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:13:14.328993" level="INFO">${test_passed} = True</msg>
<msg time="2025-06-11T12:13:14.328993" level="INFO">${metrics} = {'snr': 5.803673260443568, 'correlation': 0.8616464895597334, 'mse': 0.008606604294007614, 'rmse': 0.09277178608826939, 'energy_ratio': 0.8724086346134169, 'max_diff': 0.85255257100986, 'mean_diff': 0...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:12:36.763228" elapsed="37.565765"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:13:14.329990" level="INFO">SNR: 5.803673260443568 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:13:14.328993" elapsed="0.000997"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:13:14.330578" level="INFO">Corrélation: 0.8616464895597334 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:13:14.329990" elapsed="0.000588"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:13:14.330578" level="INFO">MOS: 3.866122717889423/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:13:14.330578" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:13:14.330578" level="INFO">Clarté: 1.018392323792128 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:13:14.330578" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:13:14.331584" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:13:14.331584" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:13:14.332584" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:13:14.331584" elapsed="0.001000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:13:14.333158" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:13:14.332584" elapsed="0.000574"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:13:14.333158" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:13:14.333158" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:13:14.333158" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:13:14.333158" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:13:14.334166" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:13:14.334166" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:13:14.334166" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:13:14.334166" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:13:14.333158" elapsed="0.001008">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:13:14.334166" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:13:14.334166" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T12:13:14.333158" elapsed="0.001008">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:13:14.334166" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:12:36.763228" elapsed="37.577502">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:13:14.341745" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:11:53.795675" elapsed="80.546070">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:13:14.341745" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:11:53.795626" elapsed="80.546119"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:13:14.342729" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:13:14.342729" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:13:14.341745" elapsed="0.000984"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:13:14.343266" level="INFO">${attempt} = 27</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:13:14.342729" elapsed="0.000537"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:13:14.343266" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 27/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:13:14.343266" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:13:16.343856" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:13:14.343266" elapsed="2.000590"/>
</kw>
<status status="PASS" start="2025-06-11T12:13:14.343266" elapsed="2.000590"/>
</branch>
<status status="PASS" start="2025-06-11T12:13:14.343266" elapsed="2.000590"/>
</if>
<status status="PASS" start="2025-06-11T12:13:14.342729" elapsed="2.001127"/>
</branch>
<status status="PASS" start="2025-06-11T12:13:14.341745" elapsed="2.002111"/>
</if>
<var name="${index}">25</var>
<status status="PASS" start="2025-06-11T12:11:53.795104" elapsed="82.548752"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:13:16.426142" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:13:16.343856" elapsed="0.082286"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:13:16.427139" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:13:16.426142" elapsed="0.000997"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:13:16.427139" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:13:16.427139" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:13:16.343856" elapsed="0.083283"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:13:16.428139" elapsed="0.047572"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:13:19.476265" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:13:16.475711" elapsed="3.000554"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:13:19.551941" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:13:19.476265" elapsed="0.076623"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:13:19.552888" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:13:16.427139" elapsed="3.125749"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:13:19.552888" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:13:19.552888" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:13:19.559186" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:13:19.559186" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:13:19.552888" elapsed="0.006298"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:13:19.560181" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:13:19.559186" elapsed="0.000995"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:13:19.560181" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:13:19.560181" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:13:19.552888" elapsed="0.007293"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:13:19.560181" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:13:19.560181" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:13:19.561197" elapsed="0.044897"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:13:19.560181" elapsed="0.045913"/>
</kw>
<status status="PASS" start="2025-06-11T12:13:19.560181" elapsed="0.045913"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:13:19.693716" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:13:19.606094" elapsed="0.087622"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:13:19.693716" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:13:19.693716" elapsed="0.532676"/>
</kw>
<msg time="2025-06-11T12:13:20.226392" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:13:19.693716" elapsed="0.532676"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:13:20.226392" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:13:19.560181" elapsed="0.667165"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:13:22.227532" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:13:20.227346" elapsed="2.000186"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:13:41.764248" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:13:22.227532" elapsed="19.536716"/>
</kw>
<msg time="2025-06-11T12:13:41.764248" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:13:22.227532" elapsed="19.536716"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:13:41.764248" elapsed="0.001095"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:14:00.077617" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:13:41.765343" elapsed="18.312274"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:14:00.128164" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:14:00.077617" elapsed="0.050547"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:14:00.128164" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:14:00.128164" elapsed="0.460035"/>
</kw>
<msg time="2025-06-11T12:14:00.588199" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:14:00.128164" elapsed="0.460035"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:14:00.588199" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:14:00.077617" elapsed="0.511118"/>
</kw>
<status status="PASS" start="2025-06-11T12:13:19.552888" elapsed="41.035847"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:14:22.244357" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_121413.png</msg>
<msg time="2025-06-11T12:14:22.244357" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:14:02

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 40.35s -&gt; Segment actif: 12.03s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: 0.322s
Ajustement: 321.8ms
Corrélation initiale: 0.099
Original length: 516489, Recorded length: 516489
Best lag: -288043 samples (-6.532 seconds)
Final lengths - Original: 516489, Aligned: 516489
Décalage temporel final: -6.532 secondes

=== Résultats ===
Décalage temporel: -6.532 secondes
         snr: 3.3206
 correlation: 0.7323
         mse: 0.0134
        rmse: 0.1159
energy_ratio: 0.6014
    max_diff: 0.8696
   mean_diff: 0.0819
         mos: 3.4463
     clarity: 0.8622
  clarity_db: -0.6440

=== Résultat: ÉCHEC ===
SNR: 3.32 dB (seuil: 5 dB)
Corrélation: 0.732 (seuil: 0.8)
MOS: 3.45/5 (seuil: 2.5)
Clarté: 0.862 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:14:22.244357" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T12:14:22.244357" level="INFO">${metrics} = {'snr': 3.320554032790354, 'correlation': 0.732349876995044, 'mse': 0.013432127957095422, 'rmse': 0.11589705758601218, 'energy_ratio': 0.6014205210400588, 'max_diff': 0.8696165931942396, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:14:00.588735" elapsed="21.655622"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:14:22.245355" level="INFO">SNR: 3.320554032790354 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:14:22.244357" elapsed="0.000998"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:14:22.245355" level="INFO">Corrélation: 0.732349876995044 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:14:22.245355" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:14:22.246351" level="INFO">MOS: 3.446259610457638/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:14:22.245355" elapsed="0.000996"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:14:22.246351" level="INFO">Clarté: 0.8621813306266428 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:14:22.246351" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:14:22.247355" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:14:22.246351" elapsed="0.001004"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:14:22.248361" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:14:22.247355" elapsed="0.001006"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:14:22.248361" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:14:22.248361" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:14:22.249365" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:14:22.248361" elapsed="0.001004"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:14:22.249365" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:14:22.249365" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:14:22.249927" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:14:22.249927" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:14:22.249927" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:14:22.249927" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:14:22.249927" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:14:22.249927" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:14:22.249927" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T12:14:22.249927" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:14:22.249927" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:14:00.588735" elapsed="21.661192">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:14:22.249927" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:13:16.343856" elapsed="65.906071">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:14:22.249927" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:13:16.343856" elapsed="65.906071"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:14:22.249927" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:14:22.249927" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:14:22.249927" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:14:22.251024" level="INFO">${attempt} = 28</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:14:22.251024" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:14:22.251024" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 28/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:14:22.251024" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:14:24.251732" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:14:22.251024" elapsed="2.000708"/>
</kw>
<status status="PASS" start="2025-06-11T12:14:22.251024" elapsed="2.000708"/>
</branch>
<status status="PASS" start="2025-06-11T12:14:22.251024" elapsed="2.000708"/>
</if>
<status status="PASS" start="2025-06-11T12:14:22.249927" elapsed="2.001805"/>
</branch>
<status status="PASS" start="2025-06-11T12:14:22.249927" elapsed="2.001805"/>
</if>
<var name="${index}">26</var>
<status status="PASS" start="2025-06-11T12:13:16.343856" elapsed="67.907876"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:14:24.288971" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:14:24.252692" elapsed="0.036279"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:14:24.288971" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:14:24.288971" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:14:24.289971" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:14:24.288971" elapsed="0.001000"/>
</kw>
<status status="PASS" start="2025-06-11T12:14:24.252692" elapsed="0.037279"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:14:24.289971" elapsed="0.046707"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:14:27.337163" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:14:24.336678" elapsed="3.000485"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:14:27.405019" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:14:27.337163" elapsed="0.067856"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:14:27.405019" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:14:24.289971" elapsed="3.115048"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:14:27.405019" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:14:27.405019" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:14:27.406019" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:14:27.406019" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:14:27.406019" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:14:27.407044" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:14:27.406019" elapsed="0.001025"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:14:27.407044" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:14:27.407044" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:14:27.405019" elapsed="0.002025"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:14:27.407044" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:14:27.407044" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:14:27.408024" elapsed="0.045422"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:14:27.408024" elapsed="0.045422"/>
</kw>
<status status="PASS" start="2025-06-11T12:14:27.407044" elapsed="0.047455"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:14:27.493495" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:14:27.454499" elapsed="0.038996"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:14:27.493495" elapsed="0.000737"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:14:27.494232" elapsed="0.465932"/>
</kw>
<msg time="2025-06-11T12:14:27.960164" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:14:27.494232" elapsed="0.465932"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:14:27.960164" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:14:27.407044" elapsed="0.553120"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:14:29.960378" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:14:27.960164" elapsed="2.000214"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:14:48.382507" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:14:29.960378" elapsed="18.422129"/>
</kw>
<msg time="2025-06-11T12:14:48.383070" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:14:29.960378" elapsed="18.422692"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:14:48.383070" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:15:06.695522" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:14:48.383070" elapsed="18.312452"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:15:06.734121" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:15:06.695522" elapsed="0.038599"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:15:06.735225" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:15:06.735225" elapsed="0.453286"/>
</kw>
<msg time="2025-06-11T12:15:07.189512" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:15:06.735225" elapsed="0.454287"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:15:07.189512" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:15:06.695522" elapsed="0.493990"/>
</kw>
<status status="PASS" start="2025-06-11T12:14:27.405019" elapsed="39.784493"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:15:39.176954" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_121525.png</msg>
<msg time="2025-06-11T12:15:39.176954" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:15:09

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.21s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.041s
Ajustement: -41.0ms
Corrélation initiale: 0.708
Original length: 804924, Recorded length: 804924
Best lag: 0 samples (0.000 seconds)
Final lengths - Original: 804924, Aligned: 804924
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 2.6006
 correlation: 0.7081
         mse: 0.0181
        rmse: 0.1345
energy_ratio: 0.8717
    max_diff: 1.1233
   mean_diff: 0.0890
         mos: 3.5538
     clarity: 1.0439
  clarity_db: 0.1867

=== Résultat: ÉCHEC ===
SNR: 2.60 dB (seuil: 5 dB)
Corrélation: 0.708 (seuil: 0.8)
MOS: 3.55/5 (seuil: 2.5)
Clarté: 1.044 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:15:39.176954" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T12:15:39.176954" level="INFO">${metrics} = {'snr': 2.600643252529353, 'correlation': 0.7081067978208633, 'mse': 0.01807972236532286, 'rmse': 0.13446085811611816, 'energy_ratio': 0.8717214672232008, 'max_diff': 1.1232709299615324, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:15:07.190510" elapsed="31.986444"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:15:39.177943" level="INFO">SNR: 2.600643252529353 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:15:39.176954" elapsed="0.000989"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:15:39.177943" level="INFO">Corrélation: 0.7081067978208633 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:15:39.177943" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:15:39.178577" level="INFO">MOS: 3.5537538874862102/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:15:39.177943" elapsed="0.000634"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:15:39.178577" level="INFO">Clarté: 1.0439364354444767 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:15:39.178577" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:15:39.179673" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:15:39.178577" elapsed="0.001096"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:15:39.179673" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:15:39.179673" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:15:39.180664" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:15:39.179673" elapsed="0.000991"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:15:39.180664" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:15:39.180664" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:15:39.181665" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:15:39.180664" elapsed="0.001001"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:15:39.181665" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:15:39.181665" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:15:39.181665" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:15:39.181665" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:15:39.181665" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:15:39.181665" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:15:39.181665" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T12:15:39.181665" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:15:39.181665" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:15:07.189512" elapsed="31.992153">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:15:39.181665" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:14:24.252692" elapsed="74.928973">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:15:39.182694" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:14:24.251732" elapsed="74.930962"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:15:39.182694" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:15:39.182694" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:15:39.182694" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:15:39.182694" level="INFO">${attempt} = 29</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:15:39.182694" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:15:39.182694" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 29/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:15:39.182694" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:15:41.182910" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:15:39.182694" elapsed="2.000216"/>
</kw>
<status status="PASS" start="2025-06-11T12:15:39.182694" elapsed="2.000216"/>
</branch>
<status status="PASS" start="2025-06-11T12:15:39.182694" elapsed="2.000216"/>
</if>
<status status="PASS" start="2025-06-11T12:15:39.182694" elapsed="2.000216"/>
</branch>
<status status="PASS" start="2025-06-11T12:15:39.182694" elapsed="2.000216"/>
</if>
<var name="${index}">27</var>
<status status="PASS" start="2025-06-11T12:14:24.251732" elapsed="76.931178"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:15:41.226069" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:15:41.183888" elapsed="0.042181"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:15:41.227100" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:15:41.226069" elapsed="0.001031"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:15:41.227100" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:15:41.227100" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:15:41.183888" elapsed="0.043212"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:15:41.227100" elapsed="0.053705"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:15:44.281184" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:15:41.280805" elapsed="3.000379"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:15:44.351284" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:15:44.281184" elapsed="0.070100"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:15:44.351284" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:15:41.227100" elapsed="3.124184"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:15:44.352299" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:15:44.352299" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:15:44.352917" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:15:44.352917" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:15:44.352917" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:15:44.352917" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:15:44.352917" elapsed="0.000961"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:15:44.353878" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:15:44.353878" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:15:44.352299" elapsed="0.001579"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:15:44.353878" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:15:44.353878" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:15:44.353878" elapsed="0.042631"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:15:44.353878" elapsed="0.042646"/>
</kw>
<status status="PASS" start="2025-06-11T12:15:44.353878" elapsed="0.042646"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:15:44.443091" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:15:44.396524" elapsed="0.046567"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:15:44.443091" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:15:44.443091" elapsed="0.460296"/>
</kw>
<msg time="2025-06-11T12:15:44.904773" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:15:44.443091" elapsed="0.461682"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:15:44.904773" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:15:44.353878" elapsed="0.550895"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:15:46.905174" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:15:44.904773" elapsed="2.000401"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:16:05.306062" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:15:46.905174" elapsed="18.400888"/>
</kw>
<msg time="2025-06-11T12:16:05.306062" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:15:46.905174" elapsed="18.400888"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:16:05.306062" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:16:23.618611" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:16:05.306062" elapsed="18.312549"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:16:23.660913" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:16:23.619160" elapsed="0.041753"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:16:23.661931" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:16:23.661931" elapsed="0.448526"/>
</kw>
<msg time="2025-06-11T12:16:24.110457" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:16:23.661931" elapsed="0.448526"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:16:24.111457" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:16:23.618611" elapsed="0.492846"/>
</kw>
<status status="PASS" start="2025-06-11T12:15:44.351284" elapsed="39.760173"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:16:55.771980" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_121642.png</msg>
<msg time="2025-06-11T12:16:55.771980" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:16:26

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.17s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.021s
Ajustement: -20.6ms
Corrélation initiale: 0.560
Original length: 802053, Recorded length: 802053
Best lag: -436 samples (-0.010 seconds)
Final lengths - Original: 802053, Aligned: 802053
Décalage temporel final: -0.010 secondes

=== Résultats ===
Décalage temporel: -0.010 secondes
         snr: 6.9996
 correlation: 0.8954
         mse: 0.0065
        rmse: 0.0807
energy_ratio: 0.8688
    max_diff: 1.0661
   mean_diff: 0.0527
         mos: 3.9545
     clarity: 1.0334
  clarity_db: 0.1427

=== Résultat: SUCCÈS ===
SNR: 7.00 dB (seuil: 5 dB)
Corrélation: 0.895 (seuil: 0.8)
MOS: 3.95/5 (seuil: 2.5)
Clarté: 1.033 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:16:55.771980" level="INFO">${test_passed} = True</msg>
<msg time="2025-06-11T12:16:55.772491" level="INFO">${metrics} = {'snr': 6.999577256043777, 'correlation': 0.8954311175830595, 'mse': 0.0065177390543144625, 'rmse': 0.08073251547124283, 'energy_ratio': 0.8687581152751332, 'max_diff': 1.066076636912274, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:16:24.111457" elapsed="31.661054"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:16:55.772511" level="INFO">SNR: 6.999577256043777 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:16:55.772511" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:16:55.772511" level="INFO">Corrélation: 0.8954311175830595 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:16:55.772511" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:16:55.773539" level="INFO">MOS: 3.9545004313414225/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:16:55.773539" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:16:55.773539" level="INFO">Clarté: 1.0333985715739473 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:16:55.773539" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:16:55.774557" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:16:55.773539" elapsed="0.001018"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:16:55.775605" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:16:55.774557" elapsed="0.001048"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:16:55.775605" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:16:55.775605" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:16:55.776606" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:16:55.775605" elapsed="0.001001"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:16:55.776606" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:16:55.776606" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:16:55.777191" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:16:55.777191" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:16:55.777191" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:16:55.777191" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:16:55.776606" elapsed="0.000585">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:16:55.777191" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:16:55.777191" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T12:16:55.776606" elapsed="0.000585">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:16:55.777191" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:16:24.111457" elapsed="31.665734">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:16:55.777831" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:15:41.182910" elapsed="74.594921">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:16:55.777831" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:15:41.182910" elapsed="74.594921"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:16:55.777831" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:16:55.777831" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:16:55.777831" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:16:55.777831" level="INFO">${attempt} = 30</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:16:55.777831" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:16:55.778447" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 30/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:16:55.778447" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:16:57.778820" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:16:55.778447" elapsed="2.000373"/>
</kw>
<status status="PASS" start="2025-06-11T12:16:55.777831" elapsed="2.000989"/>
</branch>
<status status="PASS" start="2025-06-11T12:16:55.777831" elapsed="2.000989"/>
</if>
<status status="PASS" start="2025-06-11T12:16:55.777831" elapsed="2.000989"/>
</branch>
<status status="PASS" start="2025-06-11T12:16:55.777831" elapsed="2.000989"/>
</if>
<var name="${index}">28</var>
<status status="PASS" start="2025-06-11T12:15:41.182910" elapsed="76.595910"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:16:57.815502" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:16:57.779881" elapsed="0.035621"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:16:57.816517" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:16:57.816517" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:16:57.816517" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:16:57.816517" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:16:57.779881" elapsed="0.036636"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:16:57.816517" elapsed="0.046294"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:17:00.863378" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:16:57.862811" elapsed="3.000567"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:17:00.944615" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:17:00.863378" elapsed="0.081237"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:17:00.944615" elapsed="0.001016"/>
</kw>
<status status="PASS" start="2025-06-11T12:16:57.816517" elapsed="3.129114"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:17:00.945631" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:17:00.945631" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:17:00.946628" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:17:00.946628" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:17:00.945631" elapsed="0.000997"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:17:00.946628" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:17:00.946628" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:17:00.946628" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:17:00.946628" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:17:00.945631" elapsed="0.000997"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:17:00.946628" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:17:00.946628" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:17:00.947637" elapsed="0.040413"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:17:00.947637" elapsed="0.040413"/>
</kw>
<status status="PASS" start="2025-06-11T12:17:00.947637" elapsed="0.040413"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:17:01.035405" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:17:00.988050" elapsed="0.047355"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:17:01.035405" elapsed="0.001018"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:17:01.036423" elapsed="0.457399"/>
</kw>
<msg time="2025-06-11T12:17:01.494340" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:17:01.036423" elapsed="0.457917"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:17:01.494340" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:17:00.947637" elapsed="0.546703"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:17:03.494924" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:17:01.494340" elapsed="2.000584"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:17:21.909911" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:17:03.494924" elapsed="18.415650"/>
</kw>
<msg time="2025-06-11T12:17:21.910644" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:17:03.494924" elapsed="18.415720"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:17:21.910644" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:17:40.222793" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:17:21.910644" elapsed="18.312149"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:17:40.268144" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:17:40.222793" elapsed="0.045351"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:17:40.268144" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:17:40.268144" elapsed="0.462456"/>
</kw>
<msg time="2025-06-11T12:17:40.730600" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:17:40.268144" elapsed="0.462456"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:17:40.730600" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:17:40.222793" elapsed="0.507807"/>
</kw>
<status status="PASS" start="2025-06-11T12:17:00.945631" elapsed="39.784969"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:18:12.840963" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_121759.png</msg>
<msg time="2025-06-11T12:18:12.840963" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:17:42

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.17s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.054s
Ajustement: -54.4ms
Corrélation initiale: 0.284
Original length: 803535, Recorded length: 803535
Best lag: 439 samples (0.010 seconds)
Final lengths - Original: 803096, Aligned: 803096
Décalage temporel final: 0.010 secondes

=== Résultats ===
Décalage temporel: 0.010 secondes
         snr: 0.0050
 correlation: 0.4645
         mse: 0.0327
        rmse: 0.1809
energy_ratio: 0.8607
    max_diff: 1.2861
   mean_diff: 0.1143
         mos: 3.1576
     clarity: 1.0248
  clarity_db: 0.1065

=== Résultat: ÉCHEC ===
SNR: 0.01 dB (seuil: 5 dB)
Corrélation: 0.464 (seuil: 0.8)
MOS: 3.16/5 (seuil: 2.5)
Clarté: 1.025 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:18:12.840963" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T12:18:12.840963" level="INFO">${metrics} = {'snr': 0.005005603583234345, 'correlation': 0.4644782202636269, 'mse': 0.032730068111854575, 'rmse': 0.18091453261652193, 'energy_ratio': 0.8606548316699948, 'max_diff': 1.2860846825997658, 'mean_dif...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:17:40.731608" elapsed="32.109355"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:18:12.841965" level="INFO">SNR: 0.005005603583234345 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:18:12.840963" elapsed="0.001002"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:18:12.841965" level="INFO">Corrélation: 0.4644782202636269 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:18:12.841965" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:18:12.842966" level="INFO">MOS: 3.1575740884596817/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:18:12.841965" elapsed="0.001001"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:18:12.842966" level="INFO">Clarté: 1.024823576037069 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:18:12.842966" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:18:12.843964" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:18:12.842966" elapsed="0.000998"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:18:12.843964" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:18:12.843964" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:18:12.845267" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:18:12.843964" elapsed="0.001303"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:18:12.846253" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:18:12.845267" elapsed="0.000986"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:18:12.846253" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:18:12.846253" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:18:12.846253" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:18:12.846253" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:18:12.846253" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:18:12.846253" elapsed="0.001016">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:18:12.846253" elapsed="0.001016">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:18:12.847269" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:18:12.847269" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T12:18:12.846253" elapsed="0.001016">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:18:12.847269" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:17:40.731608" elapsed="32.115661">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:18:12.847269" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:16:57.779881" elapsed="75.067388">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:18:12.847269" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:16:57.778820" elapsed="75.068449"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:18:12.847269" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:18:12.847269" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:18:12.847269" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:18:12.847269" level="INFO">${attempt} = 31</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:18:12.847269" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:18:12.848288" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 31/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:18:12.848288" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:18:14.848531" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:18:12.848288" elapsed="2.000243"/>
</kw>
<status status="PASS" start="2025-06-11T12:18:12.847269" elapsed="2.001262"/>
</branch>
<status status="PASS" start="2025-06-11T12:18:12.847269" elapsed="2.001262"/>
</if>
<status status="PASS" start="2025-06-11T12:18:12.847269" elapsed="2.001262"/>
</branch>
<status status="PASS" start="2025-06-11T12:18:12.847269" elapsed="2.001262"/>
</if>
<var name="${index}">29</var>
<status status="PASS" start="2025-06-11T12:16:57.778820" elapsed="77.069711"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:18:14.886788" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:18:14.849468" elapsed="0.037320"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:18:14.886788" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:18:14.886788" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:18:14.886788" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:18:14.886788" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:18:14.849468" elapsed="0.037320"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:18:14.886788" elapsed="0.049342"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:18:17.936463" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:18:14.936130" elapsed="3.000333"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:18:18.013577" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:18:17.936463" elapsed="0.077114"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:18:18.013577" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:18:14.886788" elapsed="3.126789"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:18:18.014592" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:18:18.014592" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:18:18.015604" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:18:18.015604" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:18:18.014592" elapsed="0.001012"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:18:18.015604" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:18:18.015604" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:18:18.015604" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:18:18.015604" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:18:18.014592" elapsed="0.001012"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:18:18.015604" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:18:18.015604" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:18:18.016598" elapsed="0.047821"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:18:18.016598" elapsed="0.048342"/>
</kw>
<status status="PASS" start="2025-06-11T12:18:18.016598" elapsed="0.048342"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:18:18.105546" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:18:18.064940" elapsed="0.040606"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:18:18.105546" elapsed="0.000944"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:18:18.106490" elapsed="0.449240"/>
</kw>
<msg time="2025-06-11T12:18:18.555730" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:18:18.106490" elapsed="0.449240"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:18:18.555730" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:18:18.015604" elapsed="0.540126"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:18:20.556062" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:18:18.555730" elapsed="2.000332"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:18:38.965923" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:18:20.556062" elapsed="18.409861"/>
</kw>
<msg time="2025-06-11T12:18:38.965923" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:18:20.556062" elapsed="18.409861"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:18:38.965923" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:18:57.278432" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:18:38.965923" elapsed="18.312509"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:18:57.316952" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:18:57.278945" elapsed="0.038007"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:18:57.316952" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:18:57.316952" elapsed="0.453806"/>
</kw>
<msg time="2025-06-11T12:18:57.770758" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:18:57.316952" elapsed="0.454826"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:18:57.771778" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:18:57.278432" elapsed="0.493346"/>
</kw>
<status status="PASS" start="2025-06-11T12:18:18.014592" elapsed="39.757186"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:19:31.389971" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_121917.png</msg>
<msg time="2025-06-11T12:19:31.390972" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:19:00

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.17s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.043s
Ajustement: -43.0ms
Corrélation initiale: 0.707
Original length: 802985, Recorded length: 802985
Best lag: 1 samples (0.000 seconds)
Final lengths - Original: 802984, Aligned: 802984
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 2.6151
 correlation: 0.7082
         mse: 0.0179
        rmse: 0.1339
energy_ratio: 0.8647
    max_diff: 0.9186
   mean_diff: 0.0880
         mos: 3.5544
     clarity: 1.0128
  clarity_db: 0.0552

=== Résultat: ÉCHEC ===
SNR: 2.62 dB (seuil: 5 dB)
Corrélation: 0.708 (seuil: 0.8)
MOS: 3.55/5 (seuil: 2.5)
Clarté: 1.013 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:19:31.390972" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T12:19:31.390972" level="INFO">${metrics} = {'snr': 2.6151325139882724, 'correlation': 0.7081866935014025, 'mse': 0.01793815794963761, 'rmse': 0.13393340863891134, 'energy_ratio': 0.8647172602021505, 'max_diff': 0.918621268422652, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:18:57.771778" elapsed="33.619194"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:19:31.390972" level="INFO">SNR: 2.6151325139882724 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:19:31.390972" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:19:31.391955" level="INFO">Corrélation: 0.7081866935014025 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:19:31.390972" elapsed="0.000983"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:19:31.391955" level="INFO">MOS: 3.554429332761214/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:19:31.391955" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:19:31.391955" level="INFO">Clarté: 1.0127938719694605 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:19:31.391955" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:19:31.392991" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:19:31.391955" elapsed="0.001036"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:19:31.394021" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:19:31.392991" elapsed="0.001030"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:19:31.394021" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:19:31.394021" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:19:31.395008" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:19:31.394021" elapsed="0.000987"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:19:31.395008" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:19:31.395008" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:19:31.395008" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:19:31.395008" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:19:31.396014" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:19:31.396014" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:19:31.395008" elapsed="0.001006">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:19:31.396014" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:19:31.396014" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T12:19:31.395008" elapsed="0.001006">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:19:31.396014" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:18:57.771778" elapsed="33.624236">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:19:31.396014" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:18:14.848531" elapsed="76.547483">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:19:31.396014" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:18:14.848531" elapsed="76.547483"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:19:31.396014" elapsed="0.001019"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:19:31.397033" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:19:31.396014" elapsed="0.001019"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:19:31.397033" level="INFO">${attempt} = 32</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:19:31.397033" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:19:31.397550" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 32/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:19:31.397033" elapsed="0.000517"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:19:33.398245" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:19:31.397550" elapsed="2.000695"/>
</kw>
<status status="PASS" start="2025-06-11T12:19:31.397033" elapsed="2.001212"/>
</branch>
<status status="PASS" start="2025-06-11T12:19:31.397033" elapsed="2.001212"/>
</if>
<status status="PASS" start="2025-06-11T12:19:31.397033" elapsed="2.001212"/>
</branch>
<status status="PASS" start="2025-06-11T12:19:31.396014" elapsed="2.002231"/>
</if>
<var name="${index}">30</var>
<status status="PASS" start="2025-06-11T12:18:14.848531" elapsed="78.549714"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:19:33.433578" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:19:33.398868" elapsed="0.034710"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:19:33.433578" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:19:33.433578" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:19:33.433578" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:19:33.433578" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:19:33.398868" elapsed="0.034710"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:19:33.433578" elapsed="0.047192"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:19:36.481946" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:19:33.481280" elapsed="3.000666"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:19:36.555120" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:19:36.481946" elapsed="0.073174"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:19:36.555639" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:19:33.433578" elapsed="3.122061"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:19:36.555639" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:19:36.555639" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:19:36.556657" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:19:36.556657" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:19:36.556657" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:19:36.556657" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:19:36.556657" elapsed="0.000981"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:19:36.557638" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:19:36.557638" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:19:36.556657" elapsed="0.000981"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:19:36.557638" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:19:36.557638" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:19:36.557638" elapsed="0.039166"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:19:36.557638" elapsed="0.040153"/>
</kw>
<status status="PASS" start="2025-06-11T12:19:36.557638" elapsed="0.040153"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:19:36.637982" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:19:36.597791" elapsed="0.040191"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:19:36.638507" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:19:36.638507" elapsed="0.447619"/>
</kw>
<msg time="2025-06-11T12:19:37.086126" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:19:36.638507" elapsed="0.447619"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:19:37.086126" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:19:36.557638" elapsed="0.528488"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:19:39.086603" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:19:37.086126" elapsed="2.000477"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:19:57.497786" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:19:39.086603" elapsed="18.411183"/>
</kw>
<msg time="2025-06-11T12:19:57.498788" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:19:39.086603" elapsed="18.412185"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:19:57.498788" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:20:15.811310" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:19:57.498788" elapsed="18.312522"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:20:15.851555" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:20:15.811310" elapsed="0.040245"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:20:15.851555" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:20:15.851555" elapsed="0.456876"/>
</kw>
<msg time="2025-06-11T12:20:16.308431" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:20:15.851555" elapsed="0.456876"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:20:16.308431" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:20:15.811310" elapsed="0.497121"/>
</kw>
<status status="PASS" start="2025-06-11T12:19:36.555639" elapsed="39.752792"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:20:47.915719" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_122034.png</msg>
<msg time="2025-06-11T12:20:47.915719" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:20:18

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.031s
Ajustement: -31.4ms
Corrélation initiale: 0.477
Original length: 802060, Recorded length: 802060
Best lag: -438 samples (-0.010 seconds)
Final lengths - Original: 802060, Aligned: 802060
Décalage temporel final: -0.010 secondes

=== Résultats ===
Décalage temporel: -0.010 secondes
         snr: 3.2824
 correlation: 0.7502
         mse: 0.0153
        rmse: 0.1239
energy_ratio: 0.8651
    max_diff: 1.0613
   mean_diff: 0.0789
         mos: 3.6315
     clarity: 1.0152
  clarity_db: 0.0653

=== Résultat: ÉCHEC ===
SNR: 3.28 dB (seuil: 5 dB)
Corrélation: 0.750 (seuil: 0.8)
MOS: 3.63/5 (seuil: 2.5)
Clarté: 1.015 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:20:47.915719" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T12:20:47.915719" level="INFO">${metrics} = {'snr': 3.2824239826665904, 'correlation': 0.7501658174465536, 'mse': 0.01533987876256283, 'rmse': 0.12385426420823317, 'energy_ratio': 0.8651087945382417, 'max_diff': 1.0613476057986426, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:20:16.309429" elapsed="31.606290"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:20:47.915719" level="INFO">SNR: 3.2824239826665904 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:20:47.915719" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:20:47.916712" level="INFO">Corrélation: 0.7501658174465536 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:20:47.916712" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:20:47.916712" level="INFO">MOS: 3.6314959402425275/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:20:47.916712" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:20:47.917730" level="INFO">Clarté: 1.0151505988197485 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:20:47.916712" elapsed="0.001018"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:20:47.918248" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:20:47.917730" elapsed="0.000518"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:20:47.918803" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:20:47.918248" elapsed="0.000555"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:20:47.919353" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:20:47.918803" elapsed="0.000550"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:20:47.919353" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:20:47.919353" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:20:47.920365" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:20:47.919353" elapsed="0.001012"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:20:47.920365" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:20:47.920365" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:20:47.920365" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:20:47.920365" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:20:47.920365" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:20:47.920365" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:20:47.920365" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T12:20:47.920365" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:20:47.920365" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:20:16.308431" elapsed="31.611934">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:20:47.920365" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:19:33.398868" elapsed="74.521497">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:20:47.920365" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:19:33.398868" elapsed="74.521497"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:20:47.921381" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:20:47.921381" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:20:47.920365" elapsed="0.001016"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:20:47.921381" level="INFO">${attempt} = 33</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:20:47.921381" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:20:47.921381" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 33/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:20:47.921381" elapsed="0.000536"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:20:49.922611" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:20:47.921917" elapsed="2.000694"/>
</kw>
<status status="PASS" start="2025-06-11T12:20:47.921381" elapsed="2.001230"/>
</branch>
<status status="PASS" start="2025-06-11T12:20:47.921381" elapsed="2.001230"/>
</if>
<status status="PASS" start="2025-06-11T12:20:47.921381" elapsed="2.001230"/>
</branch>
<status status="PASS" start="2025-06-11T12:20:47.920365" elapsed="2.002246"/>
</if>
<var name="${index}">31</var>
<status status="PASS" start="2025-06-11T12:19:33.398245" elapsed="76.524366"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:20:49.958549" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:20:49.923595" elapsed="0.034954"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:20:49.958549" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:20:49.958549" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:20:49.958549" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:20:49.958549" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:20:49.923595" elapsed="0.034954"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:20:49.959548" elapsed="0.043022"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:20:53.002839" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:20:50.002570" elapsed="3.000269"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:20:53.094124" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:20:53.002839" elapsed="0.091285"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:20:53.095146" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:20:49.958549" elapsed="3.136597"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:20:53.095766" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:20:53.095754" elapsed="0.000012"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:20:53.096324" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:20:53.096324" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:20:53.095766" elapsed="0.000558"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:20:53.096324" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:20:53.096324" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:20:53.096324" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:20:53.096324" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:20:53.095766" elapsed="0.000558"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:20:53.096324" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:20:53.096324" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:20:53.097329" elapsed="0.042018"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:20:53.097329" elapsed="0.042018"/>
</kw>
<status status="PASS" start="2025-06-11T12:20:53.097329" elapsed="0.042018"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:20:53.177059" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:20:53.139347" elapsed="0.037712"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:20:53.178077" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:20:53.178077" elapsed="0.451912"/>
</kw>
<msg time="2025-06-11T12:20:53.629989" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:20:53.178077" elapsed="0.451912"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:20:53.630990" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:20:53.096324" elapsed="0.534666"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:20:55.631350" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:20:53.630990" elapsed="2.000360"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:21:14.035657" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:20:55.631350" elapsed="18.404307"/>
</kw>
<msg time="2025-06-11T12:21:14.035657" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:20:55.631350" elapsed="18.404307"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:21:14.035657" elapsed="0.001013"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:21:32.349291" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:21:14.036670" elapsed="18.312621"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:21:32.394119" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:21:32.349811" elapsed="0.044308"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:21:32.394119" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:21:32.394119" elapsed="0.456813"/>
</kw>
<msg time="2025-06-11T12:21:32.850932" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:21:32.394119" elapsed="0.456813"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:21:32.850932" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:21:32.349291" elapsed="0.501641"/>
</kw>
<status status="PASS" start="2025-06-11T12:20:53.095146" elapsed="39.755786"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:22:04.814127" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_122151.png</msg>
<msg time="2025-06-11T12:22:04.814127" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:21:34

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.043s
Ajustement: -43.4ms
Corrélation initiale: 0.876
Original length: 802571, Recorded length: 802571
Best lag: 1 samples (0.000 seconds)
Final lengths - Original: 802570, Aligned: 802570
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 6.2886
 correlation: 0.8765
         mse: 0.0077
        rmse: 0.0877
energy_ratio: 0.8727
    max_diff: 0.8254
   mean_diff: 0.0569
         mos: 3.9034
     clarity: 1.0041
  clarity_db: 0.0180

=== Résultat: SUCCÈS ===
SNR: 6.29 dB (seuil: 5 dB)
Corrélation: 0.877 (seuil: 0.8)
MOS: 3.90/5 (seuil: 2.5)
Clarté: 1.004 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:22:04.814127" level="INFO">${test_passed} = True</msg>
<msg time="2025-06-11T12:22:04.814127" level="INFO">${metrics} = {'snr': 6.28861738166081, 'correlation': 0.8765210253797705, 'mse': 0.007691233515463875, 'rmse': 0.08769967796670564, 'energy_ratio': 0.8727299167118323, 'max_diff': 0.8254137259757433, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:21:32.851934" elapsed="31.962193"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:22:04.815123" level="INFO">SNR: 6.28861738166081 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:22:04.815123" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:22:04.815123" level="INFO">Corrélation: 0.8765210253797705 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:22:04.815123" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:22:04.816122" level="INFO">MOS: 3.9033699257221572/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:22:04.815123" elapsed="0.000999"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:22:04.816122" level="INFO">Clarté: 1.004143745979354 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:22:04.816122" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:22:04.817125" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:22:04.816122" elapsed="0.001003"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:22:04.817125" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:22:04.817125" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:22:04.818121" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:22:04.817125" elapsed="0.000996"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:22:04.819133" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:22:04.818121" elapsed="0.001012"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:22:04.819133" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:22:04.819133" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:22:04.819133" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:22:04.819133" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:22:04.819752" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:22:04.819133" elapsed="0.000619">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:22:04.819133" elapsed="0.000619">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:22:04.819752" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:22:04.819752" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T12:22:04.819133" elapsed="0.000619">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:22:04.819752" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:21:32.851934" elapsed="31.967818">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:22:04.819752" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:20:49.923595" elapsed="74.896157">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:22:04.819752" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:20:49.922611" elapsed="74.897141"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:22:04.819752" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:22:04.819752" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:22:04.819752" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:22:04.819752" level="INFO">${attempt} = 34</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:22:04.819752" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:22:04.820850" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 34/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:22:04.820850" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:22:06.821221" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:22:04.820850" elapsed="2.000371"/>
</kw>
<status status="PASS" start="2025-06-11T12:22:04.819752" elapsed="2.001469"/>
</branch>
<status status="PASS" start="2025-06-11T12:22:04.819752" elapsed="2.001469"/>
</if>
<status status="PASS" start="2025-06-11T12:22:04.819752" elapsed="2.001469"/>
</branch>
<status status="PASS" start="2025-06-11T12:22:04.819752" elapsed="2.001469"/>
</if>
<var name="${index}">32</var>
<status status="PASS" start="2025-06-11T12:20:49.922611" elapsed="76.898610"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:22:06.859952" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:22:06.823736" elapsed="0.036216"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:22:06.860946" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:22:06.859952" elapsed="0.000994"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:22:06.860946" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:22:06.860946" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:22:06.821769" elapsed="0.039177"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:22:06.860946" elapsed="0.043571"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:22:09.905043" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:22:06.904517" elapsed="3.000526"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:22:09.974768" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:22:09.905043" elapsed="0.069725"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:22:09.975768" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:22:06.860946" elapsed="3.114822"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:22:09.975768" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:22:09.975768" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:22:09.976799" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:22:09.976799" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:22:09.975768" elapsed="0.001031"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:22:09.976799" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:22:09.976799" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:22:09.976799" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:22:09.976799" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:22:09.975768" elapsed="0.001031"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:22:09.976799" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:22:09.976799" elapsed="0.000969"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:22:09.977768" elapsed="0.039432"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:22:09.977768" elapsed="0.039432"/>
</kw>
<status status="PASS" start="2025-06-11T12:22:09.977768" elapsed="0.039432"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:22:10.061167" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:22:10.017200" elapsed="0.043967"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:22:10.061167" elapsed="0.001066"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:22:10.062233" elapsed="0.449487"/>
</kw>
<msg time="2025-06-11T12:22:10.511720" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:22:10.062233" elapsed="0.449487"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:22:10.511720" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:22:09.977768" elapsed="0.533952"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:22:12.512412" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:22:10.511720" elapsed="2.000692"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:22:30.926522" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:22:12.512936" elapsed="18.413586"/>
</kw>
<msg time="2025-06-11T12:22:30.926522" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:22:12.512412" elapsed="18.414110"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:22:30.926522" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:22:49.238775" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:22:30.926522" elapsed="18.312253"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:22:49.294317" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:22:49.238775" elapsed="0.055542"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:22:49.294317" elapsed="0.000994"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:22:49.295311" elapsed="0.449188"/>
</kw>
<msg time="2025-06-11T12:22:49.745525" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:22:49.295311" elapsed="0.450214"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:22:49.745525" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:22:49.238775" elapsed="0.506750"/>
</kw>
<status status="PASS" start="2025-06-11T12:22:09.975768" elapsed="39.769757"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:23:22.388521" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_122308.png</msg>
<msg time="2025-06-11T12:23:22.388521" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:22:51

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.17s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.032s
Ajustement: -32.0ms
Corrélation initiale: 0.324
Original length: 802586, Recorded length: 802586
Best lag: -440 samples (-0.010 seconds)
Final lengths - Original: 802586, Aligned: 802586
Décalage temporel final: -0.010 secondes

=== Résultats ===
Décalage temporel: -0.010 secondes
         snr: -0.4824
 correlation: 0.4022
         mse: 0.0366
        rmse: 0.1912
energy_ratio: 0.8659
    max_diff: 1.1184
   mean_diff: 0.1417
         mos: 3.0633
     clarity: 1.0247
  clarity_db: 0.1062

=== Résultat: ÉCHEC ===
SNR: -0.48 dB (seuil: 5 dB)
Corrélation: 0.402 (seuil: 0.8)
MOS: 3.06/5 (seuil: 2.5)
Clarté: 1.025 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:23:22.388521" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T12:23:22.388521" level="INFO">${metrics} = {'snr': -0.48235688358603307, 'correlation': 0.4021620140859244, 'mse': 0.036572021641426165, 'rmse': 0.1912381281058413, 'energy_ratio': 0.8659409127391272, 'max_diff': 1.118424835983226, 'mean_diff'...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:22:49.745525" elapsed="32.642996"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:23:22.389521" level="INFO">SNR: -0.48235688358603307 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:23:22.389521" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:23:22.389521" level="INFO">Corrélation: 0.4021620140859244 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:23:22.389521" elapsed="0.001041"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:23:22.390578" level="INFO">MOS: 3.063300141559668/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:23:22.390578" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:23:22.390578" level="INFO">Clarté: 1.0247464557594563 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:23:22.390578" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:23:22.392570" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:23:22.391570" elapsed="0.001000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:23:22.392570" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:23:22.392570" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:23:22.393570" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:23:22.392570" elapsed="0.001000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:23:22.394571" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:23:22.393570" elapsed="0.001001"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:23:22.394571" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:23:22.394571" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:23:22.394571" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:23:22.394571" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:23:22.395595" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:23:22.394571" elapsed="0.001024">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:23:22.394571" elapsed="0.001024">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:23:22.395595" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:23:22.395595" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T12:23:22.394571" elapsed="0.001024">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:23:22.395595" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:22:49.745525" elapsed="32.650070">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:23:22.395595" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:22:06.821769" elapsed="75.573826">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:23:22.395595" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:22:06.821769" elapsed="75.573826"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:23:22.395595" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:23:22.395595" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:23:22.395595" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:23:22.395595" level="INFO">${attempt} = 35</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:23:22.395595" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:23:22.396609" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 35/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:23:22.396609" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:23:24.396733" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:23:22.396609" elapsed="2.000124"/>
</kw>
<status status="PASS" start="2025-06-11T12:23:22.395595" elapsed="2.001138"/>
</branch>
<status status="PASS" start="2025-06-11T12:23:22.395595" elapsed="2.001138"/>
</if>
<status status="PASS" start="2025-06-11T12:23:22.395595" elapsed="2.001138"/>
</branch>
<status status="PASS" start="2025-06-11T12:23:22.395595" elapsed="2.001138"/>
</if>
<var name="${index}">33</var>
<status status="PASS" start="2025-06-11T12:22:06.821221" elapsed="77.575512"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:23:24.434388" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:23:24.397755" elapsed="0.036633"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:23:24.435419" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:23:24.434388" elapsed="0.001031"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:23:24.435419" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:23:24.435419" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:23:24.397755" elapsed="0.037664"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:23:24.435419" elapsed="0.049951"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:23:27.485637" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:23:24.485370" elapsed="3.000267"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:23:27.558889" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:23:27.485637" elapsed="0.073252"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:23:27.558889" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:23:24.435419" elapsed="3.123470"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:23:27.558889" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:23:27.558889" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:23:27.559886" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:23:27.559886" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:23:27.559886" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:23:27.559886" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:23:27.559886" elapsed="0.001016"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:23:27.560902" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:23:27.560902" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:23:27.559886" elapsed="0.001016"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:23:27.560902" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:23:27.560902" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:23:27.560902" elapsed="0.040705"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:23:27.560902" elapsed="0.040705"/>
</kw>
<status status="PASS" start="2025-06-11T12:23:27.560902" elapsed="0.040705"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:23:27.638833" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:23:27.601607" elapsed="0.038285"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:23:27.639892" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:23:27.639892" elapsed="0.450415"/>
</kw>
<msg time="2025-06-11T12:23:28.090307" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:23:27.639892" elapsed="0.450415"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:23:28.090307" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:23:27.560902" elapsed="0.529912"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:23:30.091250" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:23:28.090863" elapsed="2.000387"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:23:48.496593" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:23:30.091250" elapsed="18.405343"/>
</kw>
<msg time="2025-06-11T12:23:48.496593" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:23:30.091250" elapsed="18.405343"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:23:48.496593" elapsed="0.001090"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:24:06.810374" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:23:48.497683" elapsed="18.312691"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:24:06.851020" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:24:06.810374" elapsed="0.040646"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:24:06.851020" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:24:06.851020" elapsed="0.448403"/>
</kw>
<msg time="2025-06-11T12:24:07.299423" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:24:06.851020" elapsed="0.448403"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:24:07.300443" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:24:06.810374" elapsed="0.490069"/>
</kw>
<status status="PASS" start="2025-06-11T12:23:27.558889" elapsed="39.741554"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:24:39.364214" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_122426.png</msg>
<msg time="2025-06-11T12:24:39.364214" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:24:09

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.043s
Ajustement: -43.2ms
Corrélation initiale: 0.545
Original length: 802973, Recorded length: 802973
Best lag: 0 samples (0.000 seconds)
Final lengths - Original: 802973, Aligned: 802973
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 0.7027
 correlation: 0.5446
         mse: 0.0279
        rmse: 0.1669
energy_ratio: 0.8619
    max_diff: 1.3029
   mean_diff: 0.1008
         mos: 3.2817
     clarity: 1.0187
  clarity_db: 0.0804

=== Résultat: ÉCHEC ===
SNR: 0.70 dB (seuil: 5 dB)
Corrélation: 0.545 (seuil: 0.8)
MOS: 3.28/5 (seuil: 2.5)
Clarté: 1.019 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:24:39.364214" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T12:24:39.364214" level="INFO">${metrics} = {'snr': 0.7027365165450152, 'correlation': 0.5446466107789862, 'mse': 0.027862633984453364, 'rmse': 0.16692104116753334, 'energy_ratio': 0.8618663345439193, 'max_diff': 1.3028680248637474, 'mean_diff'...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:24:07.300443" elapsed="32.063771"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:24:39.364736" level="INFO">SNR: 0.7027365165450152 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:24:39.364736" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:24:39.364736" level="INFO">Corrélation: 0.5446466107789862 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:24:39.364736" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:24:39.365752" level="INFO">MOS: 3.281685393596584/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:24:39.364736" elapsed="0.001016"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:24:39.365752" level="INFO">Clarté: 1.0186832969131072 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:24:39.365752" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:24:39.367300" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:24:39.366739" elapsed="0.000561"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:24:39.367300" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:24:39.367300" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:24:39.368311" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:24:39.367300" elapsed="0.001011"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:24:39.368311" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:24:39.368311" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:24:39.369325" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:24:39.368311" elapsed="0.001014"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:24:39.369325" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:24:39.369325" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:24:39.369325" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:24:39.369325" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:24:39.369325" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:24:39.369325" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:24:39.369325" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T12:24:39.369325" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:24:39.369325" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:24:07.300443" elapsed="32.068882">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:24:39.369325" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:23:24.396733" elapsed="74.973595">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:24:39.370328" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:23:24.396733" elapsed="74.973595"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:24:39.370328" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:24:39.370328" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:24:39.370328" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:24:39.370328" level="INFO">${attempt} = 36</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:24:39.370328" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:24:39.370328" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 36/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:24:39.370328" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:24:41.370553" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:24:39.370328" elapsed="2.000225"/>
</kw>
<status status="PASS" start="2025-06-11T12:24:39.370328" elapsed="2.000225"/>
</branch>
<status status="PASS" start="2025-06-11T12:24:39.370328" elapsed="2.000225"/>
</if>
<status status="PASS" start="2025-06-11T12:24:39.370328" elapsed="2.000225"/>
</branch>
<status status="PASS" start="2025-06-11T12:24:39.370328" elapsed="2.000225"/>
</if>
<var name="${index}">34</var>
<status status="PASS" start="2025-06-11T12:23:24.396733" elapsed="76.973820"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:24:41.413406" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:24:41.371114" elapsed="0.042292"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:24:41.413406" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:24:41.413406" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:24:41.413406" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:24:41.413406" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:24:41.371114" elapsed="0.042292"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:24:41.414443" elapsed="0.052807"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:24:44.468817" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:24:41.468249" elapsed="3.000568"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:24:44.539180" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:24:44.468817" elapsed="0.070363"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:24:44.539180" elapsed="0.000996"/>
</kw>
<status status="PASS" start="2025-06-11T12:24:41.413406" elapsed="3.126770"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:24:44.540176" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:24:44.540176" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:24:44.541178" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:24:44.541178" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:24:44.540176" elapsed="0.001002"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:24:44.541178" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:24:44.541178" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:24:44.541178" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:24:44.541178" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:24:44.540176" elapsed="0.001002"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:24:44.541178" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:24:44.541178" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:24:44.542176" elapsed="0.039021"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:24:44.542176" elapsed="0.039021"/>
</kw>
<status status="PASS" start="2025-06-11T12:24:44.542176" elapsed="0.039021"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:24:44.628461" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:24:44.581197" elapsed="0.047264"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:24:44.628461" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:24:44.628461" elapsed="0.451450"/>
</kw>
<msg time="2025-06-11T12:24:45.080902" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:24:44.628461" elapsed="0.452441"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:24:45.080902" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:24:44.542176" elapsed="0.538726"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:24:47.081075" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:24:45.080902" elapsed="2.000173"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:25:05.477333" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:24:47.081075" elapsed="18.396258"/>
</kw>
<msg time="2025-06-11T12:25:05.477333" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:24:47.081075" elapsed="18.396258"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:25:05.478339" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:25:23.791035" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:25:05.478339" elapsed="18.312696"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:25:23.832879" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:25:23.791035" elapsed="0.041844"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:25:23.833887" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:25:23.833887" elapsed="0.451587"/>
</kw>
<msg time="2025-06-11T12:25:24.285474" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:25:23.833887" elapsed="0.451587"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:25:24.285474" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:25:23.791035" elapsed="0.494439"/>
</kw>
<status status="PASS" start="2025-06-11T12:24:44.540176" elapsed="39.745822"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:25:56.458926" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_122542.png</msg>
<msg time="2025-06-11T12:25:56.458926" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:25:26

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.061s
Ajustement: -61.5ms
Corrélation initiale: 0.224
Original length: 803369, Recorded length: 803369
Best lag: 865 samples (0.020 seconds)
Final lengths - Original: 802504, Aligned: 802504
Décalage temporel final: 0.020 secondes

=== Résultats ===
Décalage temporel: 0.020 secondes
         snr: -0.8249
 correlation: 0.3534
         mse: 0.0396
        rmse: 0.1989
energy_ratio: 0.8676
    max_diff: 1.2484
   mean_diff: 0.1485
         mos: 2.9911
     clarity: 1.0126
  clarity_db: 0.0545

=== Résultat: ÉCHEC ===
SNR: -0.82 dB (seuil: 5 dB)
Corrélation: 0.353 (seuil: 0.8)
MOS: 2.99/5 (seuil: 2.5)
Clarté: 1.013 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:25:56.458926" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T12:25:56.459914" level="INFO">${metrics} = {'snr': -0.8249121983110803, 'correlation': 0.3534358309094244, 'mse': 0.039551710021855854, 'rmse': 0.19887611727368334, 'energy_ratio': 0.8675949190984998, 'max_diff': 1.2484250801249244, 'mean_diff...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:25:24.286033" elapsed="32.173881"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:25:56.459914" level="INFO">SNR: -0.8249121983110803 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:25:56.459914" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:25:56.459914" level="INFO">Corrélation: 0.3534358309094244 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:25:56.459914" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:25:56.460946" level="INFO">MOS: 2.9911265091588657/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:25:56.460946" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:25:56.460946" level="INFO">Clarté: 1.0126264361467854 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:25:56.460946" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:25:56.462009" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:25:56.460946" elapsed="0.001063"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:25:56.462009" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:25:56.462009" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:25:56.462987" level="INFO">${mos_ok} = False</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:25:56.462009" elapsed="0.000978"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:25:56.463986" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:25:56.462987" elapsed="0.000999"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:25:56.463986" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:25:56.463986" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:25:56.463986" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:25:56.463986" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:25:56.463986" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:25:56.463986" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:25:56.463986" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:25:56.463986" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:25:56.463986" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T12:25:56.463986" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:25:56.463986" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:25:24.286033" elapsed="32.178966">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:25:56.464999" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:24:41.371114" elapsed="75.093885">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:25:56.464999" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:24:41.371114" elapsed="75.093885"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:25:56.464999" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:25:56.464999" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:25:56.464999" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:25:56.464999" level="INFO">${attempt} = 37</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:25:56.464999" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:25:56.465991" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 37/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:25:56.464999" elapsed="0.000992"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:25:58.466579" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:25:56.465991" elapsed="2.000588"/>
</kw>
<status status="PASS" start="2025-06-11T12:25:56.464999" elapsed="2.001580"/>
</branch>
<status status="PASS" start="2025-06-11T12:25:56.464999" elapsed="2.001580"/>
</if>
<status status="PASS" start="2025-06-11T12:25:56.464999" elapsed="2.001580"/>
</branch>
<status status="PASS" start="2025-06-11T12:25:56.464999" elapsed="2.001580"/>
</if>
<var name="${index}">35</var>
<status status="PASS" start="2025-06-11T12:24:41.371114" elapsed="77.095465"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:25:58.511678" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:25:58.467096" elapsed="0.044582"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:25:58.512924" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:25:58.511678" elapsed="0.001246"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:25:58.512924" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:25:58.512924" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:25:58.467096" elapsed="0.046355"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:25:58.513451" elapsed="0.044588"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:26:01.558280" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:25:58.558039" elapsed="3.000241"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:26:01.629063" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:26:01.558280" elapsed="0.070783"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:26:01.629063" elapsed="0.000561"/>
</kw>
<status status="PASS" start="2025-06-11T12:25:58.513451" elapsed="3.116173"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:26:01.629624" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:26:01.629624" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:26:01.630202" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:26:01.630202" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:26:01.630202" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:26:01.630202" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:26:01.630202" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:26:01.631193" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:26:01.631193" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:26:01.630202" elapsed="0.000991"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:26:01.631193" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:26:01.631193" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:26:01.631193" elapsed="0.242658"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:26:01.631193" elapsed="0.242658"/>
</kw>
<status status="PASS" start="2025-06-11T12:26:01.631193" elapsed="0.242658"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:26:01.915679" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:26:01.874849" elapsed="0.040830"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:26:01.915679" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:26:01.915679" elapsed="0.450709"/>
</kw>
<msg time="2025-06-11T12:26:02.366388" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:26:01.915679" elapsed="0.450709"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:26:02.366388" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:26:01.631193" elapsed="0.735195"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:26:04.366494" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:26:02.366388" elapsed="2.000106"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:26:22.773788" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:26:04.366494" elapsed="18.408294"/>
</kw>
<msg time="2025-06-11T12:26:22.774788" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:26:04.366494" elapsed="18.408294"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:26:22.774788" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:26:41.086938" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:26:22.774788" elapsed="18.312150"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:26:41.129001" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:26:41.086938" elapsed="0.042063"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:26:41.129001" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:26:41.129001" elapsed="0.451425"/>
</kw>
<msg time="2025-06-11T12:26:41.580426" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:26:41.129001" elapsed="0.451425"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:26:41.580426" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:26:41.086938" elapsed="0.493488"/>
</kw>
<status status="PASS" start="2025-06-11T12:26:01.629624" elapsed="39.950802"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:27:12.966226" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_122659.png</msg>
<msg time="2025-06-11T12:27:12.966226" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:26:43

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.032s
Ajustement: -31.7ms
Corrélation initiale: 0.471
Original length: 802131, Recorded length: 802131
Best lag: -439 samples (-0.010 seconds)
Final lengths - Original: 802131, Aligned: 802131
Décalage temporel final: -0.010 secondes

=== Résultats ===
Décalage temporel: -0.010 secondes
         snr: 3.7118
 correlation: 0.7745
         mse: 0.0139
        rmse: 0.1179
energy_ratio: 0.8718
    max_diff: 1.1030
   mean_diff: 0.0766
         mos: 3.6779
     clarity: 1.0432
  clarity_db: 0.1838

=== Résultat: ÉCHEC ===
SNR: 3.71 dB (seuil: 5 dB)
Corrélation: 0.775 (seuil: 0.8)
MOS: 3.68/5 (seuil: 2.5)
Clarté: 1.043 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:27:12.966226" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T12:27:12.967227" level="INFO">${metrics} = {'snr': 3.7117999479495563, 'correlation': 0.7745426620801725, 'mse': 0.013903587432361532, 'rmse': 0.11791347434607095, 'energy_ratio': 0.871838234099312, 'max_diff': 1.1030244232778748, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:26:41.581419" elapsed="31.385808"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:27:12.967227" level="INFO">SNR: 3.7117999479495563 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:27:12.967227" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:27:12.967853" level="INFO">Corrélation: 0.7745426620801725 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:27:12.967853" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:27:12.967853" level="INFO">MOS: 3.6779231924141893/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:27:12.967853" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:27:12.967853" level="INFO">Clarté: 1.0432267705571006 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:27:12.967853" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:27:12.968947" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:27:12.968947" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:27:12.970016" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:27:12.968947" elapsed="0.001069"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:27:12.970016" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:27:12.970016" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:27:12.971071" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:27:12.970016" elapsed="0.001055"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:27:12.971071" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:27:12.971071" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:27:12.972071" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:27:12.972071" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:27:12.972071" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:27:12.972071" elapsed="0.000576">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:27:12.971071" elapsed="0.001576">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:27:12.972647" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:27:12.972647" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T12:27:12.971071" elapsed="0.001576">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:27:12.972647" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:26:41.580426" elapsed="31.392221">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:27:12.972647" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:25:58.467096" elapsed="74.505551">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:27:12.972647" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:25:58.467096" elapsed="74.505551"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:27:12.972647" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:27:12.972647" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:27:12.972647" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:27:12.972647" level="INFO">${attempt} = 38</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:27:12.972647" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:27:12.973700" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 38/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:27:12.973700" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:27:14.974128" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:27:12.973700" elapsed="2.000428"/>
</kw>
<status status="PASS" start="2025-06-11T12:27:12.973700" elapsed="2.000428"/>
</branch>
<status status="PASS" start="2025-06-11T12:27:12.973700" elapsed="2.000428"/>
</if>
<status status="PASS" start="2025-06-11T12:27:12.972647" elapsed="2.001481"/>
</branch>
<status status="PASS" start="2025-06-11T12:27:12.972647" elapsed="2.001481"/>
</if>
<var name="${index}">36</var>
<status status="PASS" start="2025-06-11T12:25:58.467096" elapsed="76.507032"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:27:15.010128" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:27:14.975097" elapsed="0.035031"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:27:15.010128" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:27:15.010128" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:27:15.011235" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:27:15.010128" elapsed="0.001107"/>
</kw>
<status status="PASS" start="2025-06-11T12:27:14.975097" elapsed="0.036138"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:27:15.011235" elapsed="0.046013"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:27:18.057699" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:27:15.057248" elapsed="3.000451"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:27:18.134688" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:27:18.057699" elapsed="0.076989"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:27:18.134688" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:27:15.011235" elapsed="3.123453"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:27:18.135716" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:27:18.135716" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:27:18.135716" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:27:18.135716" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:27:18.135716" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:27:18.136756" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:27:18.136756" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:27:18.136756" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:27:18.136756" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:27:18.135716" elapsed="0.001040"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:27:18.136756" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:27:18.136756" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:27:18.136756" elapsed="0.042175"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:27:18.136756" elapsed="0.042175"/>
</kw>
<status status="PASS" start="2025-06-11T12:27:18.136756" elapsed="0.042175"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:27:18.217676" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:27:18.178931" elapsed="0.038745"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:27:18.217676" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:27:18.218195" elapsed="0.451188"/>
</kw>
<msg time="2025-06-11T12:27:18.669383" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:27:18.218195" elapsed="0.451188"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:27:18.669383" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:27:18.136756" elapsed="0.532627"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:27:20.669821" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:27:18.669383" elapsed="2.000438"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:27:39.086118" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:27:20.669821" elapsed="18.416297"/>
</kw>
<msg time="2025-06-11T12:27:39.086118" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:27:20.669821" elapsed="18.416297"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:27:39.086118" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:27:57.398385" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:27:39.086118" elapsed="18.312267"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:27:57.441408" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:27:57.398385" elapsed="0.043023"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:27:57.441408" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:27:57.441408" elapsed="0.450989"/>
</kw>
<msg time="2025-06-11T12:27:57.892397" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:27:57.441408" elapsed="0.450989"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:27:57.892397" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:27:57.398385" elapsed="0.494012"/>
</kw>
<status status="PASS" start="2025-06-11T12:27:18.134688" elapsed="39.757709"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:28:30.027708" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_122816.png</msg>
<msg time="2025-06-11T12:28:30.027708" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:27:59

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.17s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.043s
Ajustement: -42.7ms
Corrélation initiale: 0.771
Original length: 803008, Recorded length: 803008
Best lag: 1 samples (0.000 seconds)
Final lengths - Original: 803007, Aligned: 803007
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 3.6592
 correlation: 0.7714
         mse: 0.0141
        rmse: 0.1188
energy_ratio: 0.8679
    max_diff: 1.1189
   mean_diff: 0.0783
         mos: 3.6721
     clarity: 1.0266
  clarity_db: 0.1141

=== Résultat: ÉCHEC ===
SNR: 3.66 dB (seuil: 5 dB)
Corrélation: 0.771 (seuil: 0.8)
MOS: 3.67/5 (seuil: 2.5)
Clarté: 1.027 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:28:30.027708" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T12:28:30.027708" level="INFO">${metrics} = {'snr': 3.65923718110205, 'correlation': 0.7714021749586165, 'mse': 0.014106142232828195, 'rmse': 0.11876928152021546, 'energy_ratio': 0.8678794705691, 'max_diff': 1.1189265815095686, 'mean_diff': 0.0...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:27:57.893394" elapsed="32.134314"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:28:30.028696" level="INFO">SNR: 3.65923718110205 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:28:30.027708" elapsed="0.000988"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:28:30.028696" level="INFO">Corrélation: 0.7714021749586165 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:28:30.028696" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:28:30.028696" level="INFO">MOS: 3.672052097194422/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:28:30.028696" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:28:30.029712" level="INFO">Clarté: 1.0266110132220947 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:28:30.028696" elapsed="0.001016"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:28:30.029712" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:28:30.029712" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:28:30.030717" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:28:30.029712" elapsed="0.001005"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:28:30.031707" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:28:30.030717" elapsed="0.000990"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:28:30.032736" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:28:30.031707" elapsed="0.001029"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:28:30.032736" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:28:30.032736" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:28:30.032736" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:28:30.032736" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:28:30.033259" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:28:30.033259" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:28:30.032736" elapsed="0.000523">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:28:30.033259" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:28:30.033259" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T12:28:30.032736" elapsed="0.000523">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:28:30.033259" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:27:57.892397" elapsed="32.140862">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:28:30.033259" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:27:14.975097" elapsed="75.058162">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:28:30.033259" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:27:14.974128" elapsed="75.059131"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:28:30.033259" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:28:30.033259" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:28:30.033259" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:28:30.034274" level="INFO">${attempt} = 39</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:28:30.033259" elapsed="0.001015"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:28:30.034274" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 39/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:28:30.034274" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:28:32.034429" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:28:30.034274" elapsed="2.000155"/>
</kw>
<status status="PASS" start="2025-06-11T12:28:30.034274" elapsed="2.000155"/>
</branch>
<status status="PASS" start="2025-06-11T12:28:30.034274" elapsed="2.000155"/>
</if>
<status status="PASS" start="2025-06-11T12:28:30.033259" elapsed="2.001170"/>
</branch>
<status status="PASS" start="2025-06-11T12:28:30.033259" elapsed="2.001170"/>
</if>
<var name="${index}">37</var>
<status status="PASS" start="2025-06-11T12:27:14.974128" elapsed="77.060301"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:28:32.069328" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:28:32.035441" elapsed="0.033887"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:28:32.069952" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:28:32.069952" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:28:32.069952" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:28:32.069952" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:28:32.034429" elapsed="0.035523"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:28:32.069952" elapsed="0.046183"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:28:35.116860" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:28:32.116135" elapsed="3.000725"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:28:35.184823" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:28:35.116860" elapsed="0.067963"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:28:35.184823" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:28:32.069952" elapsed="3.114871"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:28:35.185821" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:28:35.185821" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:28:35.185821" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:28:35.186891" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:28:35.185821" elapsed="0.001070"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:28:35.186891" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:28:35.186891" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:28:35.186891" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:28:35.186891" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:28:35.185821" elapsed="0.001070"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:28:35.186891" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:28:35.186891" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:28:35.187901" elapsed="0.047455"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:28:35.186891" elapsed="0.048465"/>
</kw>
<status status="PASS" start="2025-06-11T12:28:35.186891" elapsed="0.048465"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:28:35.281777" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:28:35.235356" elapsed="0.046421"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:28:35.282813" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:28:35.282813" elapsed="0.454504"/>
</kw>
<msg time="2025-06-11T12:28:35.738315" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:28:35.282813" elapsed="0.455502"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:28:35.738315" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:28:35.186891" elapsed="0.551424"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:28:37.738714" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:28:35.738315" elapsed="2.000399"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:28:56.153068" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:28:37.738714" elapsed="18.414354"/>
</kw>
<msg time="2025-06-11T12:28:56.153068" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:28:37.738714" elapsed="18.414354"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:28:56.153068" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:29:14.465664" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:28:56.153068" elapsed="18.312596"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:29:14.505135" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:29:14.465664" elapsed="0.039471"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:29:14.505135" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:29:14.505135" elapsed="0.459380"/>
</kw>
<msg time="2025-06-11T12:29:14.964515" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:29:14.505135" elapsed="0.459380"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:29:14.965543" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:29:14.465664" elapsed="0.499879"/>
</kw>
<status status="PASS" start="2025-06-11T12:28:35.184823" elapsed="39.780720"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:29:46.827339" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_122933.png</msg>
<msg time="2025-06-11T12:29:46.827339" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:29:17

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.016s
Ajustement: -15.5ms
Corrélation initiale: 0.218
Original length: 801744, Recorded length: 801744
Best lag: -1259 samples (-0.029 seconds)
Final lengths - Original: 801744, Aligned: 801744
Décalage temporel final: -0.029 secondes

=== Résultats ===
Décalage temporel: -0.029 secondes
         snr: -0.8912
 correlation: 0.3440
         mse: 0.0401
        rmse: 0.2002
energy_ratio: 0.8691
    max_diff: 1.5774
   mean_diff: 0.1298
         mos: 2.9771
     clarity: 1.0586
  clarity_db: 0.2473

=== Résultat: ÉCHEC ===
SNR: -0.89 dB (seuil: 5 dB)
Corrélation: 0.344 (seuil: 0.8)
MOS: 2.98/5 (seuil: 2.5)
Clarté: 1.059 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:29:46.827339" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T12:29:46.827339" level="INFO">${metrics} = {'snr': -0.8912358418506504, 'correlation': 0.3439551502041942, 'mse': 0.040074923728613834, 'rmse': 0.20018722169163006, 'energy_ratio': 0.8690947259306991, 'max_diff': 1.5774078796942756, 'mean_diff...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:29:14.965543" elapsed="31.861796"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:29:46.828337" level="INFO">SNR: -0.8912358418506504 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:29:46.827339" elapsed="0.000998"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:29:46.828337" level="INFO">Corrélation: 0.3439551502041942 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:29:46.828337" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:29:46.828337" level="INFO">MOS: 2.977096746571007/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:29:46.828337" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:29:46.829357" level="INFO">Clarté: 1.0585874671720785 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:29:46.828337" elapsed="0.001020"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:29:46.829357" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:29:46.829357" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:29:46.830373" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:29:46.830373" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:29:46.831250" level="INFO">${mos_ok} = False</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:29:46.830373" elapsed="0.000877"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:29:46.831250" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:29:46.831250" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:29:46.832217" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:29:46.832217" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:29:46.832217" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:29:46.832217" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:29:46.832217" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:29:46.832217" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:29:46.832217" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:29:46.832217" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:29:46.832217" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T12:29:46.832217" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:29:46.832217" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:29:14.965543" elapsed="31.867673">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:29:46.833216" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:28:32.034429" elapsed="74.798787">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:29:46.833216" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:28:32.034429" elapsed="74.798787"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:29:46.833216" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:29:46.833216" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:29:46.833216" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:29:46.833216" level="INFO">${attempt} = 40</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:29:46.833216" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:29:46.833216" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 40/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:29:46.833216" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:29:48.834322" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:29:46.833216" elapsed="2.001106"/>
</kw>
<status status="PASS" start="2025-06-11T12:29:46.833216" elapsed="2.001106"/>
</branch>
<status status="PASS" start="2025-06-11T12:29:46.833216" elapsed="2.001106"/>
</if>
<status status="PASS" start="2025-06-11T12:29:46.833216" elapsed="2.001106"/>
</branch>
<status status="PASS" start="2025-06-11T12:29:46.833216" elapsed="2.001106"/>
</if>
<var name="${index}">38</var>
<status status="PASS" start="2025-06-11T12:28:32.034429" elapsed="76.799893"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T12:29:48.871390" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T12:29:48.835323" elapsed="0.036067"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T12:29:48.871390" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T12:29:48.871390" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T12:29:48.871390" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T12:29:48.871390" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:29:48.835323" elapsed="0.037071"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:29:48.872394" elapsed="0.046271"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:29:51.920618" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:29:48.919695" elapsed="3.000923"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:29:51.994522" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:29:51.920618" elapsed="0.074903"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:29:51.995521" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:29:48.872394" elapsed="3.123127"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:29:51.995521" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:29:51.995521" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T12:29:51.996578" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T12:29:51.996578" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T12:29:51.995521" elapsed="0.001057"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T12:29:51.997098" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T12:29:51.997098" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T12:29:51.997098" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T12:29:51.997098" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T12:29:51.995521" elapsed="0.001577"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:29:51.997098" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:29:51.997098" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:29:51.997616" elapsed="0.038110"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:29:51.997616" elapsed="0.038110"/>
</kw>
<status status="PASS" start="2025-06-11T12:29:51.997616" elapsed="0.038110"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:29:52.074612" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:29:52.036743" elapsed="0.037869"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:29:52.074612" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:29:52.074612" elapsed="0.448151"/>
</kw>
<msg time="2025-06-11T12:29:52.522763" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:29:52.074612" elapsed="0.448151"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:29:52.523766" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:29:51.997616" elapsed="0.526150"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:29:54.523988" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:29:52.523766" elapsed="2.000222"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T12:30:12.916493" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:29:54.523988" elapsed="18.392505"/>
</kw>
<msg time="2025-06-11T12:30:12.916493" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:29:54.523988" elapsed="18.392505"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:30:12.916493" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:30:31.228606" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:30:12.916493" elapsed="18.312113"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:30:31.270182" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:30:31.228606" elapsed="0.041576"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:30:31.270182" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:30:31.271181" elapsed="0.446231"/>
</kw>
<msg time="2025-06-11T12:30:31.717412" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:30:31.270182" elapsed="0.447230"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:30:31.717412" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:30:31.228606" elapsed="0.488806"/>
</kw>
<status status="PASS" start="2025-06-11T12:29:51.995521" elapsed="39.721891"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T12:31:03.733953" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_123050.png</msg>
<msg time="2025-06-11T12:31:03.733953" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 12:30:33

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.045s
Ajustement: -45.2ms
Corrélation initiale: 0.477
Original length: 802642, Recorded length: 802642
Best lag: 0 samples (0.000 seconds)
Final lengths - Original: 802642, Aligned: 802642
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 0.1162
 correlation: 0.4775
         mse: 0.0319
        rmse: 0.1785
energy_ratio: 0.8583
    max_diff: 1.2701
   mean_diff: 0.1120
         mos: 3.1776
     clarity: 1.0148
  clarity_db: 0.0638

=== Résultat: ÉCHEC ===
SNR: 0.12 dB (seuil: 5 dB)
Corrélation: 0.477 (seuil: 0.8)
MOS: 3.18/5 (seuil: 2.5)
Clarté: 1.015 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:31:03.733953" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T12:31:03.733953" level="INFO">${metrics} = {'snr': 0.11618556833252788, 'correlation': 0.47747167309593114, 'mse': 0.03186717011099464, 'rmse': 0.1785137812915144, 'energy_ratio': 0.8583090423757196, 'max_diff': 1.2700603248940974, 'mean_diff'...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:30:31.718478" elapsed="32.015475"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:31:03.733953" level="INFO">SNR: 0.11618556833252788 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:31:03.733953" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:31:03.734990" level="INFO">Corrélation: 0.47747167309593114 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:31:03.733953" elapsed="0.001037"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:31:03.734990" level="INFO">MOS: 3.1776134304484183/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:31:03.734990" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:31:03.734990" level="INFO">Clarté: 1.0147934851529223 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:31:03.734990" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:31:03.736082" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:31:03.734990" elapsed="0.001092"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:31:03.737081" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:31:03.736082" elapsed="0.000999"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:31:03.737716" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:31:03.737081" elapsed="0.000635"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:31:03.737716" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:31:03.737716" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:31:03.737716" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:31:03.737716" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:31:03.737716" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:31:03.737716" elapsed="0.001085"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:31:03.738801" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:31:03.738801" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T12:31:03.737716" elapsed="0.001085">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:31:03.738801" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:31:03.738801" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T12:31:03.737716" elapsed="0.001085">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:31:03.738801" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T12:30:31.718478" elapsed="32.020323">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:31:03.738801" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T12:29:48.834322" elapsed="74.904479">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T12:31:03.738801" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:29:48.834322" elapsed="74.904479"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:31:03.739744" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T12:31:03.739744" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:31:03.738801" elapsed="0.000943"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T12:31:03.739744" level="INFO">${attempt} = 41</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T12:31:03.739744" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:31:03.739744" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="NOT RUN" start="2025-06-11T12:31:03.739744" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:31:03.739744" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-06-11T12:31:03.739744" elapsed="0.000000"/>
</if>
<status status="PASS" start="2025-06-11T12:31:03.739744" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-06-11T12:31:03.738801" elapsed="0.000943"/>
</if>
<var name="${index}">39</var>
<status status="PASS" start="2025-06-11T12:29:48.834322" elapsed="74.905422"/>
</iter>
<var>${index}</var>
<value>${MAX_RETRIES}</value>
<status status="PASS" start="2025-06-11T11:38:53.676473" elapsed="3130.063271"/>
</for>
<if>
<branch type="IF" condition="not ${test_status}">
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T12:31:03.739744" level="FAIL">Le test Test Audio Recording And Playback a échoué après 40 tentatives</msg>
<arg>Le test ${test_name} a échoué après ${MAX_RETRIES} tentatives</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T12:31:03.739744" elapsed="0.000000">Le test Test Audio Recording And Playback a échoué après 40 tentatives</status>
</kw>
<status status="FAIL" start="2025-06-11T12:31:03.739744" elapsed="0.000000">Le test Test Audio Recording And Playback a échoué après 40 tentatives</status>
</branch>
<status status="FAIL" start="2025-06-11T12:31:03.739744" elapsed="0.000000">Le test Test Audio Recording And Playback a échoué après 40 tentatives</status>
</if>
<arg>Verify Audio Recording</arg>
<arg>Test Audio Recording And Playback</arg>
<status status="FAIL" start="2025-06-11T11:38:53.675473" elapsed="3130.064271">Le test Test Audio Recording And Playback a échoué après 40 tentatives</status>
</kw>
<doc>Verifies audio recording and playback functionality
- Navigates to audio recording app
- Records audio for a specified duration
- Plays back the recorded audio
- Supports both French and English interfaces</doc>
<tag>audio</tag>
<tag>playback</tag>
<tag>recording</tag>
<status status="FAIL" start="2025-06-11T11:38:53.667937" elapsed="3130.072870">Le test Test Audio Recording And Playback a échoué après 40 tentatives</status>
</test>
<test id="s1-t3" name="Test Audio Player And Playback" line="250">
<kw name="Navigate To Audio Player App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.AudioPlayerActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T12:31:03.741636" elapsed="0.052148"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:31:06.794478" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:31:03.793784" elapsed="3.000694"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T12:31:06.865299" level="INFO">${current_activity} = com.example.audioapplicationtest/.AudioPlayerActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T12:31:06.794478" elapsed="0.070821"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.AudioPlayerActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T12:31:06.865299" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:31:03.740807" elapsed="3.124492"/>
</kw>
<kw name="Record Audio" owner="Integration">
<msg time="2025-06-11T12:31:06.876959" level="INFO">✅ Enregistrement audio réussi : Enregistrement audio démarré</msg>
<msg time="2025-06-11T12:31:06.876959" level="INFO">${recording_success} = True</msg>
<var>${recording_success}</var>
<arg>${driver}</arg>
<arg>23</arg>
<doc>Enregistre l'audio du système via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T12:31:06.865299" elapsed="0.011660"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${recording_success}</arg>
<arg>L'enregistrement audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:31:06.876959" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:31:07.877847" level="INFO">Slept 1 second.</msg>
<arg>1s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:31:06.876959" elapsed="1.000888"/>
</kw>
<kw name="Click Play Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:31:07.878516" elapsed="0.049677"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T12:31:07.878516" elapsed="0.049677"/>
</kw>
<status status="PASS" start="2025-06-11T12:31:07.877847" elapsed="0.050346"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T12:31:07.968085" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="PLAY TEST WAV"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T12:31:07.928193" elapsed="0.039892"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton PLAY TEST WAV n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:31:07.968085" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="PLAY TEST WAV"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T12:31:07.968085" elapsed="0.448963"/>
</kw>
<msg time="2025-06-11T12:31:08.417048" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="PLAY TEST WAV"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:31:07.968085" elapsed="0.448963"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T12:31:08.417048" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T12:31:07.877847" elapsed="0.539201"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T12:31:30.417289" level="INFO">Slept 22 seconds.</msg>
<arg>22s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T12:31:08.417048" elapsed="22.000241"/>
</kw>
<kw name="Compare Audio Files Play">
<kw name="Compare With Latest Recorded Play" owner="TestAudio">
<msg time="2025-06-11T12:32:02.205586" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_lecture_20250611_123148.png</msg>
<msg time="2025-06-11T12:32:02.205586" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_playback.wav
Date du test: 2025-06-11 12:31:32

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 23.00s -&gt; Segment actif: 18.38s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: 0.043s
Ajustement: 43.4ms
Corrélation initiale: 0.398
Original length: 807552, Recorded length: 807552
Best lag: 0 samples (0.000 seconds)
Final lengths - Original: 807552, Aligned: 807552
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: -0.8156
 correlation: 0.3983
         mse: 0.0399
        rmse: 0.1996
energy_ratio: 1.0054
    max_diff: 1.2766
   mean_diff: 0.1475
         mos: 3.0454
     clarity: 1.0981
  clarity_db: 0.4064

=== Résultat: ÉCHEC ===
SNR: -0.82 dB (seuil: 5 dB)
Corrélation: 0.398 (seuil: 0.8)
MOS: 3.05/5 (seuil: 2.5)
Clarté: 1.098 (seuil: 0.7)</msg>
<msg time="2025-06-11T12:32:02.205586" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T12:32:02.205586" level="INFO">${metrics} = {'snr': -0.8156035742206252, 'correlation': 0.39831863355384256, 'mse': 0.03985559722717172, 'rmse': 0.1996386666634791, 'energy_ratio': 1.0053618859111206, 'max_diff': 1.2765928962020792, 'mean_diff'...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio lu via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio lu
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T12:31:30.417850" elapsed="31.787736"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:32:02.206564" level="INFO">SNR: -0.8156035742206252 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:32:02.205586" elapsed="0.000978"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:32:02.206564" level="INFO">Corrélation: 0.39831863355384256 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:32:02.206564" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:32:02.206564" level="INFO">MOS: 3.045358217295786/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:32:02.206564" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T12:32:02.207562" level="INFO">Clarté: 1.0981030940869314 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T12:32:02.207562" elapsed="0.000617"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2025-06-11T12:32:02.210698" level="FAIL">Resolving variable '${metrics['plot_file']}' failed: KeyError: 'plot_file'</msg>
<var>${plot_file}</var>
<arg>${metrics['plot_file']}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="FAIL" start="2025-06-11T12:32:02.208179" elapsed="0.002519">Resolving variable '${metrics['plot_file']}' failed: KeyError: 'plot_file'</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>&lt;img src="${plot_file}" width="800px"/&gt;</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:32:02.210698" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="NOT RUN" start="2025-06-11T12:32:02.211736" elapsed="0.000042"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="NOT RUN" start="2025-06-11T12:32:02.211778" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="NOT RUN" start="2025-06-11T12:32:02.211778" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="NOT RUN" start="2025-06-11T12:32:02.211778" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="NOT RUN" start="2025-06-11T12:32:02.211778" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:32:02.211778" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="NOT RUN" start="2025-06-11T12:32:02.211778" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:32:02.211778" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:32:02.211778" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:32:02.211778" elapsed="0.000000"/>
</branch>
<status status="NOT RUN" start="2025-06-11T12:32:02.211778" elapsed="0.000000"/>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T12:32:02.211778" elapsed="0.000000"/>
</return>
<arg>C:\\Users\\bahae\\Documents\\PfeProject\\test_cases${/}test.wav</arg>
<status status="FAIL" start="2025-06-11T12:31:30.417289" elapsed="31.794489">Resolving variable '${metrics['plot_file']}' failed: KeyError: 'plot_file'</status>
</kw>
<doc>Verifies audio recording and playback functionality
- Navigates to audio recording app
- Records audio for a specified duration
- Plays audio
- Supports both French and English interfaces</doc>
<tag>audio</tag>
<tag>playback</tag>
<tag>recording</tag>
<status status="FAIL" start="2025-06-11T12:31:03.740807" elapsed="58.470971">Resolving variable '${metrics['plot_file']}' failed: KeyError: 'plot_file'</status>
</test>
<kw name="Fermer Driver" type="TEARDOWN">
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Variable Should Exist" owner="BuiltIn">
<arg>${driver}</arg>
<doc>Fails unless the given variable exists within the current scope.</doc>
<status status="PASS" start="2025-06-11T12:32:02.214766" elapsed="0.000000"/>
</kw>
<msg time="2025-06-11T12:32:02.214766" level="INFO">${driver_exists} = True</msg>
<var>${driver_exists}</var>
<arg>Variable Should Exist</arg>
<arg>${driver}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:32:02.214766" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${driver_exists}">
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Close Driver" owner="Integration">
<arg>${driver}</arg>
<doc>Ferme proprement le driver Appium.</doc>
<status status="PASS" start="2025-06-11T12:32:02.214766" elapsed="0.160532"/>
</kw>
<msg time="2025-06-11T12:32:02.375298" level="INFO">${close_success} = True</msg>
<var>${close_success}</var>
<arg>Close Driver</arg>
<arg>${driver}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T12:32:02.214766" elapsed="0.160532"/>
</kw>
<if>
<branch type="IF" condition="not ${close_success}">
<kw name="Log" owner="BuiltIn">
<arg>Warning: Impossible de fermer proprement le driver Appium</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T12:32:02.375298" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T12:32:02.375298" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-06-11T12:32:02.375298" elapsed="0.000988"/>
</if>
<status status="PASS" start="2025-06-11T12:32:02.214766" elapsed="0.161520"/>
</branch>
<status status="PASS" start="2025-06-11T12:32:02.214766" elapsed="0.161520"/>
</if>
<status status="PASS" start="2025-06-11T12:32:02.214766" elapsed="0.161520"/>
</kw>
<doc>Tests for audio recording and playback functionality
- Verifies audio recording capabilities
- Verifies audio playback capabilities
- Supports both French and English interfaces</doc>
<status status="FAIL" start="2025-06-11T11:38:45.111458" elapsed="3197.264828"/>
</suite>
<statistics>
<total>
<stat pass="1" fail="2" skip="0">All Tests</stat>
</total>
<tag>
<stat pass="0" fail="2" skip="0">audio</stat>
<stat pass="0" fail="2" skip="0">playback</stat>
<stat pass="0" fail="2" skip="0">recording</stat>
</tag>
<suite>
<stat name="TestsAudio" id="s1" pass="1" fail="2" skip="0">TestsAudio</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
