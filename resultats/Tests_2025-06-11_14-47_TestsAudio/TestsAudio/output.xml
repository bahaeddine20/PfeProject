<?xml version="1.0" encoding="UTF-8"?>
<robot generator="Robot 7.2.2 (Python 3.12.5 on win32)" generated="2025-06-11T14:47:43.428943" rpa="false" schemaversion="5">
<suite id="s1" name="TestsAudio" source="C:\Users\bahae\Documents\PfeProject\test_cases\TestsAudio.robot">
<kw name="Démarrer Driver" type="SETUP">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:47:47.244222" level="INFO">Tentative d'initialisation du driver Appium...</msg>
<arg>Tentative d'initialisation du driver Appium...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:47:47.243184" elapsed="0.001038"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:47:47.244222" level="INFO">URL Appium: C:\Users\bahae\Documents\PfeProject\test_cases\..\config.py</msg>
<arg>URL Appium: C:\\Users\\bahae\\Documents\\PfeProject\\test_cases${/}..${/}config.py</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:47:47.244222" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Ignore Error" owner="BuiltIn">
<kw name="Setup Driver" owner="Integration">
<arg>${Device}</arg>
<doc>Initialise et retourne le driver Appium.</doc>
<status status="PASS" start="2025-06-11T14:47:47.244222" elapsed="4.588861"/>
</kw>
<msg time="2025-06-11T14:47:51.833083" level="INFO">${result} = ('PASS', &lt;appium.webdriver.webdriver.WebDriver (session="a5eba092-e456-4812-99f9-83b7f101a92f")&gt;)</msg>
<var>${result}</var>
<arg>setup driver</arg>
<arg>${Device}</arg>
<doc>Runs the given keyword with the given arguments and ignores possible error.</doc>
<status status="PASS" start="2025-06-11T14:47:47.244222" elapsed="4.588861"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2025-06-11T14:47:51.833083" level="INFO">${status} = PASS</msg>
<msg time="2025-06-11T14:47:51.833083" level="INFO">${driver} = &lt;appium.webdriver.webdriver.WebDriver (session="a5eba092-e456-4812-99f9-83b7f101a92f")&gt;</msg>
<var>${status}</var>
<var>${driver}</var>
<arg>${result}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2025-06-11T14:47:51.833083" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="'${status}' == 'FAIL'">
<kw name="Log" owner="BuiltIn">
<arg>Échec de l'initialisation du driver: ${driver}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:47:51.833083" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<arg>Impossible d'initialiser le driver Appium: ${driver}</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="NOT RUN" start="2025-06-11T14:47:51.833083" elapsed="0.001016"/>
</kw>
<status status="NOT RUN" start="2025-06-11T14:47:51.833083" elapsed="0.001016"/>
</branch>
<status status="PASS" start="2025-06-11T14:47:51.833083" elapsed="0.001016"/>
</if>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T14:47:51.834099" level="INFO">${driver} = &lt;appium.webdriver.webdriver.WebDriver (session="a5eba092-e456-4812-99f9-83b7f101a92f")&gt;</msg>
<arg>${driver}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T14:47:51.834099" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:47:51.834099" level="INFO">Driver Appium initialisé avec succès</msg>
<arg>Driver Appium initialisé avec succès</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:47:51.834099" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:47:47.243184" elapsed="4.590915"/>
</kw>
<test id="s1-t1" name="Test fgdya" line="236">
<kw name="Close Activity Robot" owner="Integration">
<msg time="2025-06-11T14:47:53.097302" level="INFO">Échec de terminateApp: Message: The following required parameter is missing: ["appId"]
Known required parameters are: ["appId"]
Known optional parameters are: ["timeout"]
You have provided none
Stacktrace:
BadParametersError: The following required parameter is missing: ["appId"]
Known required parameters are: ["appId"]
Known optional parameters are: ["timeout"]
You have provided none
    at checkParams (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\protocol\protocol.js:155:9)
    at validateExecuteMethodParams (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\protocol\protocol.js:242:5)
    at AndroidUiautomator2Driver.executeMethod (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\basedriver\commands\execute.ts:34:45)
    at AndroidUiautomator2Driver.execute (C:\Users\bahae\.appium\node_modules\appium-uiautomator2-driver\node_modules\appium-android-driver\lib\commands\execute.js:17:23)
    at runCommandPromise (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\basedriver\driver.ts:115:20)
    at C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:171:12
    at AsyncLock._promiseTry (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:306:31)
    at exec (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:170:9)
    at AsyncLock.acquire (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:189:3)
    at AndroidUiautomator2Driver.executeCommand (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\basedriver\driver.ts:159:39)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at defaultBehavior (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\lib\appium.js:787:14)
    at AppiumDriver.executeWrappedCommand (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\lib\appium.js:900:16)
    at AppiumDriver.executeCommand (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\lib\appium.js:799:17)
    at asyncHandler (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\protocol\protocol.js:387:19)
Touche HOME pressée
Application com.example.audioapplicationtest fermée avec force-stop
Application com.example.audioapplicationtest fermée avec succès</msg>
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest</arg>
<doc>Version de close_activity adaptée pour Robot Framework.
Utilise plusieurs méthodes pour s'assurer que l'application est bien fermée.</doc>
<status status="PASS" start="2025-06-11T14:47:51.834099" elapsed="1.263203"/>
</kw>
<status status="PASS" start="2025-06-11T14:47:51.834099" elapsed="1.263203"/>
</test>
<test id="s1-t2" name="Test Audio Recording And Playback" line="239">
<kw name="Close Activity" owner="Integration">
<msg time="2025-06-11T14:47:53.103228" level="INFO">Erreur lors de la fermeture de l'application com.example.audioapplicationtest/.AudioPlayerActivity: Message: The following required parameter is missing: ["appId"]
Known required parameters are: ["appId"]
Known optional parameters are: ["timeout"]
You have provided none
Stacktrace:
BadParametersError: The following required parameter is missing: ["appId"]
Known required parameters are: ["appId"]
Known optional parameters are: ["timeout"]
You have provided none
    at checkParams (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\protocol\protocol.js:155:9)
    at validateExecuteMethodParams (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\protocol\protocol.js:242:5)
    at AndroidUiautomator2Driver.executeMethod (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\basedriver\commands\execute.ts:34:45)
    at AndroidUiautomator2Driver.execute (C:\Users\bahae\.appium\node_modules\appium-uiautomator2-driver\node_modules\appium-android-driver\lib\commands\execute.js:17:23)
    at runCommandPromise (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\basedriver\driver.ts:115:20)
    at C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:171:12
    at AsyncLock._promiseTry (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:306:31)
    at exec (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:170:9)
    at AsyncLock.acquire (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:189:3)
    at AndroidUiautomator2Driver.executeCommand (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\basedriver\driver.ts:159:39)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at defaultBehavior (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\lib\appium.js:787:14)
    at AppiumDriver.executeWrappedCommand (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\lib\appium.js:900:16)
    at AppiumDriver.executeCommand (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\lib\appium.js:799:17)
    at asyncHandler (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\protocol\protocol.js:387:19)</msg>
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.AudioPlayerActivity</arg>
<doc>Ferme une application spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T14:47:53.098394" elapsed="0.005814"/>
</kw>
<kw name="Execute Test With Retry">
<kw name="Set Variable" owner="BuiltIn">
<msg time="2025-06-11T14:47:53.104827" level="INFO">${attempt} = 1</msg>
<var>${attempt}</var>
<arg>1</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2025-06-11T14:47:53.104208" elapsed="0.000619"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2025-06-11T14:47:53.104827" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${FALSE}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2025-06-11T14:47:53.104827" elapsed="0.000000"/>
</kw>
<for flavor="IN RANGE">
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T14:47:53.143191" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T14:47:53.105881" elapsed="0.037310"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T14:47:53.144190" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T14:47:53.143191" elapsed="0.000999"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T14:47:53.144190" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T14:47:53.144190" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:47:53.104827" elapsed="0.039363"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T14:47:53.144190" elapsed="0.060948"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:47:56.206245" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:47:53.205138" elapsed="3.001107"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T14:47:56.288791" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T14:47:56.206245" elapsed="0.082546"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T14:47:56.288791" elapsed="0.000817"/>
</kw>
<status status="PASS" start="2025-06-11T14:47:53.144190" elapsed="3.145418"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:47:56.290132" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:47:56.289608" elapsed="0.000570"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T14:47:56.291165" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T14:47:56.291165" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T14:47:56.290178" elapsed="0.000987"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T14:47:56.291165" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T14:47:56.291165" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T14:47:56.291165" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T14:47:56.291165" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T14:47:56.290178" elapsed="0.000987"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:47:56.291165" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:47:56.291165" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:47:56.292167" elapsed="0.640341"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T14:47:56.292167" elapsed="0.640341"/>
</kw>
<status status="PASS" start="2025-06-11T14:47:56.292167" elapsed="0.640848"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T14:47:56.979639" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:47:56.933026" elapsed="0.046613"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:47:56.979639" elapsed="0.001005"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T14:47:56.980644" elapsed="0.479180"/>
</kw>
<msg time="2025-06-11T14:47:57.459824" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:47:56.980644" elapsed="0.479180"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:47:57.459824" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:47:56.291165" elapsed="1.169653"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:47:59.461815" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:47:57.460818" elapsed="2.000997"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T14:48:17.895249" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T14:47:59.462322" elapsed="18.432927"/>
</kw>
<msg time="2025-06-11T14:48:17.895249" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:47:59.461815" elapsed="18.433434"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:48:17.895249" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:48:36.207579" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:48:17.895249" elapsed="18.312330"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T14:48:36.269491" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:48:36.208099" elapsed="0.061392"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:48:36.269491" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T14:48:36.270288" elapsed="0.486214"/>
</kw>
<msg time="2025-06-11T14:48:36.756502" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:48:36.269491" elapsed="0.487011"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:48:36.756502" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:48:36.208099" elapsed="0.548403"/>
</kw>
<status status="PASS" start="2025-06-11T14:47:56.289608" elapsed="40.466894"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T14:49:09.089231" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_144855.png</msg>
<msg time="2025-06-11T14:49:09.089231" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 14:48:38

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.052s
Ajustement: -52.2ms
Corrélation initiale: 0.535
Original length: 803314, Recorded length: 803314
Best lag: 431 samples (0.010 seconds)
Final lengths - Original: 802883, Aligned: 802883
Décalage temporel final: 0.010 secondes

=== Résultats ===
Décalage temporel: 0.010 secondes
         snr: 5.1835
 correlation: 0.8394
         mse: 0.0099
        rmse: 0.0996
energy_ratio: 0.8600
    max_diff: 1.0572
   mean_diff: 0.0612
         mos: 3.8146
     clarity: 1.0347
  clarity_db: 0.1483

=== Résultat: SUCCÈS ===
SNR: 5.18 dB (seuil: 5 dB)
Corrélation: 0.839 (seuil: 0.8)
MOS: 3.81/5 (seuil: 2.5)
Clarté: 1.035 (seuil: 0.7)</msg>
<msg time="2025-06-11T14:49:09.089753" level="INFO">C:\Users\bahae\Documents\PfeProject\test_cases\TestAudio.py:338: UserWarning: Glyph 10060 (\N{CROSS MARK}) missing from font(s) DejaVu Sans.
  plt.savefig(output_file, dpi=300, bbox_inches='tight')
C:\Program Files\JetBrains\PyCharm 2024.3.2\plugins\python-ce\helpers\pycharm_matplotlib_backend\backend_interagg.py:124: UserWarning: Glyph 10060 (\N{CROSS MARK}) missing from font(s) DejaVu Sans.
  FigureCanvasAgg.draw(self)</msg>
<msg time="2025-06-11T14:49:09.089800" level="INFO">${test_passed} = True</msg>
<msg time="2025-06-11T14:49:09.089800" level="INFO">${metrics} = {'snr': 5.183527167999261, 'correlation': 0.8394017521462456, 'mse': 0.009925964825293749, 'rmse': 0.09962913642752179, 'energy_ratio': 0.8600123348096803, 'max_diff': 1.057171018341218, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T14:48:36.757502" elapsed="32.332298"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:49:09.090354" level="INFO">SNR: 5.183527167999261 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:49:09.089800" elapsed="0.000554"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:49:09.090354" level="INFO">Corrélation: 0.8394017521462456 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:49:09.090354" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:49:09.091365" level="INFO">MOS: 3.8146231892954647/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:49:09.090354" elapsed="0.001011"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:49:09.091365" level="INFO">Clarté: 1.0347367105340564 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:49:09.091365" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:49:09.092351" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:49:09.091365" elapsed="0.000986"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:49:09.092351" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:49:09.092351" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:49:09.093369" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:49:09.093369" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:49:09.094351" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:49:09.093369" elapsed="0.000982"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:49:09.094351" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:49:09.094351" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:49:09.094351" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:49:09.094351" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T14:49:09.094351" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T14:49:09.094351" elapsed="0.001000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T14:49:09.094351" elapsed="0.001000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:49:09.095351" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T14:49:09.095351" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T14:49:09.094351" elapsed="0.001000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T14:49:09.095351" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T14:48:36.757502" elapsed="32.337849">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:49:09.095351" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T14:47:53.104827" elapsed="75.990524">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T14:49:09.095351" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:47:53.104827" elapsed="75.990524"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:49:09.095351" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T14:49:09.095351" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T14:49:09.095351" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:49:09.095351" level="INFO">${attempt} = 2</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:49:09.095351" elapsed="0.001039"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:49:09.096412" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 2/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:49:09.096412" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:49:11.096948" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:49:09.096412" elapsed="2.000536"/>
</kw>
<status status="PASS" start="2025-06-11T14:49:09.096412" elapsed="2.000536"/>
</branch>
<status status="PASS" start="2025-06-11T14:49:09.096412" elapsed="2.000536"/>
</if>
<status status="PASS" start="2025-06-11T14:49:09.095351" elapsed="2.001597"/>
</branch>
<status status="PASS" start="2025-06-11T14:49:09.095351" elapsed="2.001597"/>
</if>
<var name="${index}">0</var>
<status status="PASS" start="2025-06-11T14:47:53.104827" elapsed="77.992121"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T14:49:11.135481" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T14:49:11.097956" elapsed="0.037525"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T14:49:11.135481" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T14:49:11.135481" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T14:49:11.135481" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T14:49:11.135481" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:49:11.097956" elapsed="0.037525"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T14:49:11.135481" elapsed="0.067871"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:49:14.203775" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:49:11.203352" elapsed="3.000423"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T14:49:14.284066" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T14:49:14.203775" elapsed="0.080291"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T14:49:14.284584" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:49:11.135481" elapsed="3.149103"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:49:14.284584" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:49:14.284584" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T14:49:14.285601" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T14:49:14.285601" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T14:49:14.284584" elapsed="0.001017"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T14:49:14.285601" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T14:49:14.285601" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T14:49:14.285601" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T14:49:14.285601" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T14:49:14.284584" elapsed="0.001017"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:49:14.286584" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:49:14.285601" elapsed="0.000983"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:49:14.286584" elapsed="0.055626"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T14:49:14.286584" elapsed="0.055626"/>
</kw>
<status status="PASS" start="2025-06-11T14:49:14.286584" elapsed="0.055626"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T14:49:14.394684" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:49:14.342210" elapsed="0.052474"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:49:14.394684" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T14:49:14.395685" elapsed="0.477478"/>
</kw>
<msg time="2025-06-11T14:49:14.873163" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:49:14.395685" elapsed="0.477478"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:49:14.873163" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:49:14.286584" elapsed="0.586579"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:49:16.873742" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:49:14.873163" elapsed="2.000579"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T14:49:35.286623" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T14:49:16.873742" elapsed="18.413897"/>
</kw>
<msg time="2025-06-11T14:49:35.287639" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:49:16.873742" elapsed="18.413897"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:49:35.287639" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:49:53.601024" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:49:35.288163" elapsed="18.312861"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T14:49:53.653662" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:49:53.601024" elapsed="0.052638"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:49:53.653662" elapsed="0.000521"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T14:49:53.654183" elapsed="0.475182"/>
</kw>
<msg time="2025-06-11T14:49:54.129365" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:49:53.654183" elapsed="0.475182"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:49:54.129365" elapsed="0.001001"/>
</kw>
<status status="PASS" start="2025-06-11T14:49:53.601024" elapsed="0.529342"/>
</kw>
<status status="PASS" start="2025-06-11T14:49:14.284584" elapsed="39.845782"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T14:50:26.360938" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_145013.png</msg>
<msg time="2025-06-11T14:50:26.361925" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 14:49:56

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.036s
Ajustement: -36.1ms
Corrélation initiale: 0.586
Original length: 802571, Recorded length: 802571
Best lag: -433 samples (-0.010 seconds)
Final lengths - Original: 802571, Aligned: 802571
Décalage temporel final: -0.010 secondes

=== Résultats ===
Décalage temporel: -0.010 secondes
         snr: 9.3460
 correlation: 0.9401
         mse: 0.0038
        rmse: 0.0617
energy_ratio: 0.8684
    max_diff: 1.1615
   mean_diff: 0.0441
         mos: 4.1020
     clarity: 1.0062
  clarity_db: 0.0267

=== Résultat: SUCCÈS ===
SNR: 9.35 dB (seuil: 5 dB)
Corrélation: 0.940 (seuil: 0.8)
MOS: 4.10/5 (seuil: 2.5)
Clarté: 1.006 (seuil: 0.7)</msg>
<msg time="2025-06-11T14:50:26.361925" level="INFO">${test_passed} = True</msg>
<msg time="2025-06-11T14:50:26.361925" level="INFO">${metrics} = {'snr': 9.345968263340808, 'correlation': 0.940114529429455, 'mse': 0.0038041988775397426, 'rmse': 0.061678188020885816, 'energy_ratio': 0.8683868113447584, 'max_diff': 1.161511660179421, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T14:49:54.130366" elapsed="32.231559"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:50:26.361925" level="INFO">SNR: 9.345968263340808 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:50:26.361925" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:50:26.362924" level="INFO">Corrélation: 0.940114529429455 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:50:26.361925" elapsed="0.000999"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:50:26.362924" level="INFO">MOS: 4.101976165848978/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:50:26.362924" elapsed="0.000999"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:50:26.363923" level="INFO">Clarté: 1.0061751385042137 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:50:26.363923" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:50:26.364923" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:50:26.363923" elapsed="0.001000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:50:26.364923" level="INFO">${correlation_ok} = True</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:50:26.364923" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:50:26.365945" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:50:26.365945" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:50:26.366961" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:50:26.365945" elapsed="0.001016"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:50:26.366961" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:50:26.366961" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:50:26.367524" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:50:26.366961" elapsed="0.000593"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T14:50:26.367554" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T14:50:26.367554" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T14:50:26.366961" elapsed="0.000593">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:50:26.367554" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T14:50:26.367554" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T14:50:26.366961" elapsed="0.000593">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T14:50:26.367554" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T14:49:54.130366" elapsed="32.237188">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:50:26.367554" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T14:49:11.097956" elapsed="75.269598">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T14:50:26.367554" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:49:11.096948" elapsed="75.270606"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:50:26.367554" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T14:50:26.368573" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T14:50:26.367554" elapsed="0.001019"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:50:26.368573" level="INFO">${attempt} = 3</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:50:26.368573" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:50:26.368573" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 3/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:50:26.368573" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:50:28.369213" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:50:26.368573" elapsed="2.000640"/>
</kw>
<status status="PASS" start="2025-06-11T14:50:26.368573" elapsed="2.000640"/>
</branch>
<status status="PASS" start="2025-06-11T14:50:26.368573" elapsed="2.000640"/>
</if>
<status status="PASS" start="2025-06-11T14:50:26.368573" elapsed="2.000640"/>
</branch>
<status status="PASS" start="2025-06-11T14:50:26.367554" elapsed="2.001659"/>
</if>
<var name="${index}">1</var>
<status status="PASS" start="2025-06-11T14:49:11.096948" elapsed="77.272265"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T14:50:28.414236" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T14:50:28.370319" elapsed="0.043917"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T14:50:28.415250" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T14:50:28.415250" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T14:50:28.415250" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T14:50:28.415250" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:50:28.370319" elapsed="0.044931"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T14:50:28.415250" elapsed="0.051187"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:50:31.466901" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:50:28.466437" elapsed="3.000464"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T14:50:31.540320" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T14:50:31.466901" elapsed="0.073419"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T14:50:31.540320" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:50:28.415250" elapsed="3.125070"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:50:31.540320" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:50:31.540320" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T14:50:31.542249" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T14:50:31.542249" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T14:50:31.541320" elapsed="0.000929"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T14:50:31.542249" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T14:50:31.542249" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T14:50:31.542249" elapsed="0.000521"/>
</return>
<msg time="2025-06-11T14:50:31.542770" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T14:50:31.541320" elapsed="0.001450"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:50:31.542770" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:50:31.542770" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:50:31.543288" elapsed="0.052764"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T14:50:31.543288" elapsed="0.053751"/>
</kw>
<status status="PASS" start="2025-06-11T14:50:31.543288" elapsed="0.053751"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T14:50:31.644885" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:50:31.597039" elapsed="0.047846"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:50:31.645884" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T14:50:31.645884" elapsed="0.468770"/>
</kw>
<msg time="2025-06-11T14:50:32.114654" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:50:31.645884" elapsed="0.468770"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:50:32.114654" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:50:31.542770" elapsed="0.571884"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:50:34.115175" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:50:32.114654" elapsed="2.000521"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T14:50:52.535284" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T14:50:34.115175" elapsed="18.420109"/>
</kw>
<msg time="2025-06-11T14:50:52.535284" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:50:34.115175" elapsed="18.421144"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:50:52.536324" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:51:10.848589" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:50:52.536324" elapsed="18.312265"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T14:51:10.895682" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:51:10.848589" elapsed="0.047093"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:51:10.895682" elapsed="0.001002"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T14:51:10.896684" elapsed="0.469179"/>
</kw>
<msg time="2025-06-11T14:51:11.365863" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:51:10.896684" elapsed="0.469179"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:51:11.365863" elapsed="0.001070"/>
</kw>
<status status="PASS" start="2025-06-11T14:51:10.848589" elapsed="0.518344"/>
</kw>
<status status="PASS" start="2025-06-11T14:50:31.540320" elapsed="39.826613"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T14:51:43.690903" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_145130.png</msg>
<msg time="2025-06-11T14:51:43.690903" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 14:51:13

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.061s
Ajustement: -61.3ms
Corrélation initiale: 0.379
Original length: 803386, Recorded length: 803386
Best lag: 851 samples (0.019 seconds)
Final lengths - Original: 802535, Aligned: 802535
Décalage temporel final: 0.019 secondes

=== Résultats ===
Décalage temporel: 0.019 secondes
         snr: 2.8221
 correlation: 0.7217
         mse: 0.0171
        rmse: 0.1307
energy_ratio: 0.8628
    max_diff: 0.9966
   mean_diff: 0.0851
         mos: 3.5789
     clarity: 1.0234
  clarity_db: 0.1006

=== Résultat: ÉCHEC ===
SNR: 2.82 dB (seuil: 5 dB)
Corrélation: 0.722 (seuil: 0.8)
MOS: 3.58/5 (seuil: 2.5)
Clarté: 1.023 (seuil: 0.7)</msg>
<msg time="2025-06-11T14:51:43.691888" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T14:51:43.691888" level="INFO">${metrics} = {'snr': 2.8221416389762393, 'correlation': 0.7216622997529102, 'mse': 0.017085398275975588, 'rmse': 0.1307111252953458, 'energy_ratio': 0.8627998513829719, 'max_diff': 0.9965638279791703, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T14:51:11.366933" elapsed="32.324955"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:51:43.691888" level="INFO">SNR: 2.8221416389762393 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:51:43.691888" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:51:43.692907" level="INFO">Corrélation: 0.7216622997529102 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:51:43.691888" elapsed="0.001019"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:51:43.694885" level="INFO">MOS: 3.5788804252625415/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:51:43.692907" elapsed="0.001978"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:51:43.694885" level="INFO">Clarté: 1.0234441411514659 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:51:43.694885" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:51:43.695887" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:51:43.694885" elapsed="0.001002"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:51:43.695887" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:51:43.695887" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:51:43.696915" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:51:43.695887" elapsed="0.001028"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:51:43.697957" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:51:43.696915" elapsed="0.001042"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:51:43.697957" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:51:43.697957" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:51:43.697957" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:51:43.697957" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T14:51:43.697957" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T14:51:43.697957" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T14:51:43.697957" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:51:43.697957" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T14:51:43.697957" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T14:51:43.697957" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T14:51:43.697957" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T14:51:11.366933" elapsed="32.331024">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:51:43.697957" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T14:50:28.369792" elapsed="75.329174">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T14:51:43.698966" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:50:28.369792" elapsed="75.329174"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:51:43.698966" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T14:51:43.698966" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T14:51:43.698966" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:51:43.698966" level="INFO">${attempt} = 4</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:51:43.698966" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:51:43.698966" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 4/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:51:43.698966" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:51:45.699169" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:51:43.698966" elapsed="2.000203"/>
</kw>
<status status="PASS" start="2025-06-11T14:51:43.698966" elapsed="2.000203"/>
</branch>
<status status="PASS" start="2025-06-11T14:51:43.698966" elapsed="2.000203"/>
</if>
<status status="PASS" start="2025-06-11T14:51:43.698966" elapsed="2.000203"/>
</branch>
<status status="PASS" start="2025-06-11T14:51:43.698966" elapsed="2.000203"/>
</if>
<var name="${index}">2</var>
<status status="PASS" start="2025-06-11T14:50:28.369792" elapsed="77.329377"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T14:51:45.737020" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T14:51:45.699169" elapsed="0.037851"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T14:51:45.737020" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T14:51:45.737020" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T14:51:45.737020" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T14:51:45.737020" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:51:45.699169" elapsed="0.038859"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T14:51:45.738028" elapsed="0.045996"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:51:48.785198" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:51:45.785022" elapsed="3.000176"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T14:51:48.864053" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T14:51:48.785198" elapsed="0.078855"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T14:51:48.864053" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:51:45.738028" elapsed="3.126025"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:51:48.864053" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:51:48.864053" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T14:51:48.865055" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T14:51:48.865055" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T14:51:48.865055" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T14:51:48.866055" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T14:51:48.865055" elapsed="0.001000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T14:51:48.866055" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T14:51:48.866055" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T14:51:48.865055" elapsed="0.001000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:51:48.866055" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:51:48.866055" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:51:48.866055" elapsed="0.050289"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T14:51:48.866055" elapsed="0.050289"/>
</kw>
<status status="PASS" start="2025-06-11T14:51:48.866055" elapsed="0.050289"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T14:51:48.972614" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:51:48.916344" elapsed="0.056270"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:51:48.972670" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T14:51:48.972670" elapsed="0.487311"/>
</kw>
<msg time="2025-06-11T14:51:49.459981" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:51:48.972670" elapsed="0.487311"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:51:49.460979" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:51:48.866055" elapsed="0.594924"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:51:51.462209" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:51:49.461493" elapsed="2.000716"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T14:52:09.873545" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T14:51:51.462209" elapsed="18.411336"/>
</kw>
<msg time="2025-06-11T14:52:09.873545" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:51:51.462209" elapsed="18.411336"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:52:09.873545" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:52:28.186163" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:52:09.873545" elapsed="18.312618"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T14:52:28.243713" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:52:28.186163" elapsed="0.057550"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:52:28.243713" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T14:52:28.243713" elapsed="0.483522"/>
</kw>
<msg time="2025-06-11T14:52:28.727235" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:52:28.243713" elapsed="0.483522"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:52:28.727235" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:52:28.186163" elapsed="0.541072"/>
</kw>
<status status="PASS" start="2025-06-11T14:51:48.864053" elapsed="39.863182"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T14:53:00.912353" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_145247.png</msg>
<msg time="2025-06-11T14:53:00.912353" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 14:52:30

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.052s
Ajustement: -52.2ms
Corrélation initiale: 0.476
Original length: 803308, Recorded length: 803308
Best lag: 424 samples (0.010 seconds)
Final lengths - Original: 802884, Aligned: 802884
Décalage temporel final: 0.010 secondes

=== Résultats ===
Décalage temporel: 0.010 secondes
         snr: 2.7020
 correlation: 0.7144
         mse: 0.0176
        rmse: 0.1326
energy_ratio: 0.8677
    max_diff: 1.2542
   mean_diff: 0.0855
         mos: 3.5653
     clarity: 1.0059
  clarity_db: 0.0257

=== Résultat: ÉCHEC ===
SNR: 2.70 dB (seuil: 5 dB)
Corrélation: 0.714 (seuil: 0.8)
MOS: 3.57/5 (seuil: 2.5)
Clarté: 1.006 (seuil: 0.7)</msg>
<msg time="2025-06-11T14:53:00.912353" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T14:53:00.912876" level="INFO">${metrics} = {'snr': 2.702004716382718, 'correlation': 0.7143889650007865, 'mse': 0.017576208781367956, 'rmse': 0.13257529476251584, 'energy_ratio': 0.8676851825318068, 'max_diff': 1.2542198451945472, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T14:52:28.727235" elapsed="32.185641"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:53:00.912876" level="INFO">SNR: 2.702004716382718 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:53:00.912876" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:53:00.912876" level="INFO">Corrélation: 0.7143889650007865 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:53:00.912876" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:53:00.913890" level="INFO">MOS: 3.5653469466562524/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:53:00.913890" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:53:00.913890" level="INFO">Clarté: 1.0059344319542496 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:53:00.913890" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:53:00.914934" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:53:00.914916" elapsed="0.000018"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:53:00.915497" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:53:00.915497" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:53:00.916516" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:53:00.915497" elapsed="0.001019"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:53:00.916516" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:53:00.916516" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:53:00.916516" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:53:00.916516" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:53:00.917530" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:53:00.917530" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T14:53:00.917530" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T14:53:00.917530" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T14:53:00.916516" elapsed="0.001014">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:53:00.918116" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T14:53:00.917530" elapsed="0.000586"/>
</branch>
<status status="FAIL" start="2025-06-11T14:53:00.916516" elapsed="0.001600">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T14:53:00.918116" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T14:52:28.727235" elapsed="32.190881">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:53:00.918116" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T14:51:45.699169" elapsed="75.218947">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T14:53:00.918116" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:51:45.699169" elapsed="75.218947"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:53:00.918116" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T14:53:00.918116" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T14:53:00.918116" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:53:00.918116" level="INFO">${attempt} = 5</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:53:00.918116" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:53:00.918116" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 5/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:53:00.918116" elapsed="0.001019"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:53:02.919618" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:53:00.919135" elapsed="2.000483"/>
</kw>
<status status="PASS" start="2025-06-11T14:53:00.918116" elapsed="2.001502"/>
</branch>
<status status="PASS" start="2025-06-11T14:53:00.918116" elapsed="2.001502"/>
</if>
<status status="PASS" start="2025-06-11T14:53:00.918116" elapsed="2.001502"/>
</branch>
<status status="PASS" start="2025-06-11T14:53:00.918116" elapsed="2.001502"/>
</if>
<var name="${index}">3</var>
<status status="PASS" start="2025-06-11T14:51:45.699169" elapsed="77.220449"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T14:53:02.973340" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T14:53:02.920195" elapsed="0.053145"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T14:53:02.974355" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T14:53:02.973340" elapsed="0.001015"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T14:53:02.974355" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T14:53:02.974355" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:53:02.920195" elapsed="0.054160"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T14:53:02.974355" elapsed="0.064735"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:53:06.039384" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:53:03.039090" elapsed="3.000294"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T14:53:06.120680" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T14:53:06.039384" elapsed="0.081296"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T14:53:06.120680" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:53:02.974355" elapsed="3.146325"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:53:06.120680" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:53:06.120680" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T14:53:06.121659" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T14:53:06.121659" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T14:53:06.121659" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T14:53:06.122658" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T14:53:06.121659" elapsed="0.000999"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T14:53:06.122658" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T14:53:06.122658" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T14:53:06.121659" elapsed="0.000999"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:53:06.122658" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:53:06.122658" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:53:06.122658" elapsed="0.057139"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T14:53:06.122658" elapsed="0.057139"/>
</kw>
<status status="PASS" start="2025-06-11T14:53:06.122658" elapsed="0.058153"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T14:53:06.228985" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:53:06.180811" elapsed="0.048174"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:53:06.228985" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T14:53:06.229981" elapsed="0.469270"/>
</kw>
<msg time="2025-06-11T14:53:06.699251" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:53:06.229981" elapsed="0.469270"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:53:06.699251" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:53:06.122658" elapsed="0.576593"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:53:08.699631" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:53:06.699251" elapsed="2.000380"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T14:53:27.098774" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T14:53:08.699631" elapsed="18.399143"/>
</kw>
<msg time="2025-06-11T14:53:27.098774" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:53:08.699631" elapsed="18.399143"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:53:27.099787" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:53:45.412345" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:53:27.099787" elapsed="18.312558"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T14:53:45.463629" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:53:45.412345" elapsed="0.051284"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:53:45.463629" elapsed="0.001020"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T14:53:45.464649" elapsed="0.484033"/>
</kw>
<msg time="2025-06-11T14:53:45.948682" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:53:45.464649" elapsed="0.484033"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:53:45.948682" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:53:45.412345" elapsed="0.536337"/>
</kw>
<status status="PASS" start="2025-06-11T14:53:06.120680" elapsed="39.828002"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T14:54:18.328958" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_145404.png</msg>
<msg time="2025-06-11T14:54:18.328958" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 14:53:48

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.17s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.027s
Ajustement: -27.5ms
Corrélation initiale: 0.431
Original length: 802581, Recorded length: 802581
Best lag: -428 samples (-0.010 seconds)
Final lengths - Original: 802581, Aligned: 802581
Décalage temporel final: -0.010 secondes

=== Résultats ===
Décalage temporel: -0.010 secondes
         snr: 1.4865
 correlation: 0.6216
         mse: 0.0232
        rmse: 0.1524
energy_ratio: 0.8690
    max_diff: 1.0235
   mean_diff: 0.1114
         mos: 3.4053
     clarity: 1.0005
  clarity_db: 0.0020

=== Résultat: ÉCHEC ===
SNR: 1.49 dB (seuil: 5 dB)
Corrélation: 0.622 (seuil: 0.8)
MOS: 3.41/5 (seuil: 2.5)
Clarté: 1.000 (seuil: 0.7)</msg>
<msg time="2025-06-11T14:54:18.329956" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T14:54:18.329956" level="INFO">${metrics} = {'snr': 1.4864725139627089, 'correlation': 0.6215627071963024, 'mse': 0.023240514932821196, 'rmse': 0.1524484008864022, 'energy_ratio': 0.8689938284778346, 'max_diff': 1.023501704777881, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T14:53:45.949703" elapsed="32.380253"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:54:18.329956" level="INFO">SNR: 1.4864725139627089 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:54:18.329956" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:54:18.329956" level="INFO">Corrélation: 0.6215627071963024 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:54:18.329956" elapsed="0.001071"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:54:18.331071" level="INFO">MOS: 3.405334149194071/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:54:18.331071" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:54:18.331071" level="INFO">Clarté: 1.0004712959349211 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:54:18.331071" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:54:18.332141" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:54:18.331071" elapsed="0.001070"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:54:18.332141" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:54:18.332141" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:54:18.333144" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:54:18.332141" elapsed="0.001003"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:54:18.333764" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:54:18.333144" elapsed="0.000620"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:54:18.333764" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:54:18.333764" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:54:18.333764" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:54:18.333764" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T14:54:18.333764" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T14:54:18.333764" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T14:54:18.333764" elapsed="0.001097">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:54:18.334861" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T14:54:18.334861" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T14:54:18.333764" elapsed="0.001097">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T14:54:18.334861" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T14:53:45.948682" elapsed="32.386179">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:54:18.334861" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T14:53:02.920195" elapsed="75.414666">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T14:54:18.334861" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:53:02.920142" elapsed="75.414719"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:54:18.334861" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T14:54:18.334861" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T14:54:18.334861" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:54:18.334861" level="INFO">${attempt} = 6</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:54:18.334861" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:54:18.335761" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 6/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:54:18.335761" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:54:20.335928" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:54:18.335761" elapsed="2.000167"/>
</kw>
<status status="PASS" start="2025-06-11T14:54:18.334861" elapsed="2.001067"/>
</branch>
<status status="PASS" start="2025-06-11T14:54:18.334861" elapsed="2.001067"/>
</if>
<status status="PASS" start="2025-06-11T14:54:18.334861" elapsed="2.001067"/>
</branch>
<status status="PASS" start="2025-06-11T14:54:18.334861" elapsed="2.001067"/>
</if>
<var name="${index}">4</var>
<status status="PASS" start="2025-06-11T14:53:02.919618" elapsed="77.416310"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T14:54:20.371876" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T14:54:20.336958" elapsed="0.034918"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T14:54:20.372874" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T14:54:20.372874" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T14:54:20.372874" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T14:54:20.372874" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:54:20.335928" elapsed="0.036946"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T14:54:20.372874" elapsed="0.052516"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:54:23.426487" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:54:20.425390" elapsed="3.001097"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T14:54:23.505481" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T14:54:23.426487" elapsed="0.078994"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T14:54:23.505481" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:54:20.372874" elapsed="3.132607"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:54:23.505481" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:54:23.505481" elapsed="0.000999"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T14:54:23.506480" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T14:54:23.507482" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T14:54:23.506480" elapsed="0.001002"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T14:54:23.507482" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T14:54:23.507482" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T14:54:23.507482" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T14:54:23.507482" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T14:54:23.506480" elapsed="0.001002"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:54:23.508008" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:54:23.507482" elapsed="0.000573"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:54:23.508055" elapsed="0.055522"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T14:54:23.508055" elapsed="0.055522"/>
</kw>
<status status="PASS" start="2025-06-11T14:54:23.508055" elapsed="0.055522"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T14:54:23.612253" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:54:23.563577" elapsed="0.048676"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:54:23.612253" elapsed="0.001000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T14:54:23.613253" elapsed="0.468348"/>
</kw>
<msg time="2025-06-11T14:54:24.082602" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:54:23.613253" elapsed="0.469349"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:54:24.082602" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:54:23.508055" elapsed="0.574547"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:54:26.082961" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:54:24.082602" elapsed="2.000359"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T14:54:44.490761" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T14:54:26.082961" elapsed="18.407800"/>
</kw>
<msg time="2025-06-11T14:54:44.490761" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:54:26.082961" elapsed="18.407800"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:54:44.490761" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:55:02.803014" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:54:44.490761" elapsed="18.312253"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T14:55:02.855208" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:55:02.803014" elapsed="0.052194"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:55:02.855208" elapsed="0.001341"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T14:55:02.856549" elapsed="0.493636"/>
</kw>
<msg time="2025-06-11T14:55:03.350185" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:55:02.856549" elapsed="0.493636"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:55:03.350185" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:55:02.803014" elapsed="0.547171"/>
</kw>
<status status="PASS" start="2025-06-11T14:54:23.505481" elapsed="39.845706"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T14:55:35.419590" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_145522.png</msg>
<msg time="2025-06-11T14:55:35.420606" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 14:55:05

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.17s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.041s
Ajustement: -41.1ms
Corrélation initiale: 0.706
Original length: 802967, Recorded length: 802967
Best lag: 0 samples (0.000 seconds)
Final lengths - Original: 802967, Aligned: 802967
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 2.5752
 correlation: 0.7057
         mse: 0.0181
        rmse: 0.1346
energy_ratio: 0.8665
    max_diff: 1.4138
   mean_diff: 0.0824
         mos: 3.5498
     clarity: 1.0221
  clarity_db: 0.0948

=== Résultat: ÉCHEC ===
SNR: 2.58 dB (seuil: 5 dB)
Corrélation: 0.706 (seuil: 0.8)
MOS: 3.55/5 (seuil: 2.5)
Clarté: 1.022 (seuil: 0.7)</msg>
<msg time="2025-06-11T14:55:35.420606" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T14:55:35.420606" level="INFO">${metrics} = {'snr': 2.575164015123652, 'correlation': 0.7056991677607114, 'mse': 0.018104199734910037, 'rmse': 0.1345518477573238, 'energy_ratio': 0.8665268031379304, 'max_diff': 1.4137691534259536, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T14:55:03.351187" elapsed="32.069419"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:55:35.421189" level="INFO">SNR: 2.575164015123652 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:55:35.420606" elapsed="0.000583"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:55:35.421189" level="INFO">Corrélation: 0.7056991677607114 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:55:35.421189" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:55:35.421189" level="INFO">MOS: 3.5498455619177998/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:55:35.421189" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:55:35.422143" level="INFO">Clarté: 1.0220743099392553 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:55:35.422143" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:55:35.422143" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:55:35.422143" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:55:35.423249" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:55:35.422143" elapsed="0.001106"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:55:35.424240" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:55:35.423249" elapsed="0.000991"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:55:35.425017" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:55:35.424240" elapsed="0.000777"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:55:35.425017" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:55:35.425017" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:55:35.426156" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:55:35.425017" elapsed="0.001139"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T14:55:35.426156" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T14:55:35.426156" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T14:55:35.425017" elapsed="0.001139">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:55:35.426156" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T14:55:35.426156" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T14:55:35.425017" elapsed="0.001139">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T14:55:35.426156" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T14:55:03.351187" elapsed="32.074969">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:55:35.426156" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T14:54:20.335928" elapsed="75.090228">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T14:55:35.426156" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:54:20.335928" elapsed="75.090228"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:55:35.427146" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T14:55:35.427146" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T14:55:35.427146" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:55:35.427146" level="INFO">${attempt} = 7</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:55:35.427146" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:55:35.427146" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 7/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:55:35.427146" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:55:37.427712" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:55:35.427146" elapsed="2.000566"/>
</kw>
<status status="PASS" start="2025-06-11T14:55:35.427146" elapsed="2.000566"/>
</branch>
<status status="PASS" start="2025-06-11T14:55:35.427146" elapsed="2.000566"/>
</if>
<status status="PASS" start="2025-06-11T14:55:35.427146" elapsed="2.000566"/>
</branch>
<status status="PASS" start="2025-06-11T14:55:35.426156" elapsed="2.001556"/>
</if>
<var name="${index}">5</var>
<status status="PASS" start="2025-06-11T14:54:20.335928" elapsed="77.091784"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T14:55:37.464091" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T14:55:37.428237" elapsed="0.036861"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T14:55:37.465098" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T14:55:37.465098" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T14:55:37.465098" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T14:55:37.465098" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:55:37.428237" elapsed="0.036861"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T14:55:37.466075" elapsed="0.049008"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:55:40.515216" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:55:37.515101" elapsed="3.000115"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T14:55:40.601209" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T14:55:40.515216" elapsed="0.085993"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T14:55:40.601209" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:55:37.465098" elapsed="3.136111"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:55:40.602159" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:55:40.601209" elapsed="0.000950"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T14:55:40.602159" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T14:55:40.602159" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T14:55:40.602159" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T14:55:40.603171" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T14:55:40.602159" elapsed="0.001012"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T14:55:40.603171" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T14:55:40.603171" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T14:55:40.602159" elapsed="0.001012"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:55:40.603171" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:55:40.603171" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:55:40.603750" elapsed="0.052548"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T14:55:40.603750" elapsed="0.052548"/>
</kw>
<status status="PASS" start="2025-06-11T14:55:40.603750" elapsed="0.052548"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T14:55:40.706486" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:55:40.656298" elapsed="0.050188"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:55:40.706486" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T14:55:40.706486" elapsed="0.471748"/>
</kw>
<msg time="2025-06-11T14:55:41.178234" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:55:40.706486" elapsed="0.471748"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:55:41.178234" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:55:40.603171" elapsed="0.576317"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:55:43.179709" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:55:41.179488" elapsed="2.000221"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T14:56:01.575926" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T14:55:43.179709" elapsed="18.396217"/>
</kw>
<msg time="2025-06-11T14:56:01.575926" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:55:43.179709" elapsed="18.396217"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:56:01.575926" elapsed="0.000998"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:56:19.889352" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:56:01.576924" elapsed="18.312428"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T14:56:19.941963" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:56:19.889873" elapsed="0.052090"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:56:19.941963" elapsed="0.000518"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T14:56:19.942481" elapsed="0.474292"/>
</kw>
<msg time="2025-06-11T14:56:20.416773" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:56:19.942481" elapsed="0.474292"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:56:20.416773" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:56:19.889352" elapsed="0.527421"/>
</kw>
<status status="PASS" start="2025-06-11T14:55:40.601209" elapsed="39.815564"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T14:56:52.844490" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_145639.png</msg>
<msg time="2025-06-11T14:56:52.844490" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 14:56:22

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.054s
Ajustement: -54.5ms
Corrélation initiale: 0.477
Original length: 803322, Recorded length: 803322
Best lag: 438 samples (0.010 seconds)
Final lengths - Original: 802884, Aligned: 802884
Décalage temporel final: 0.010 secondes

=== Résultats ===
Décalage temporel: 0.010 secondes
         snr: 2.8402
 correlation: 0.7234
         mse: 0.0170
        rmse: 0.1305
energy_ratio: 0.8672
    max_diff: 1.1906
   mean_diff: 0.0857
         mos: 3.5687
     clarity: 0.9892
  clarity_db: -0.0471

=== Résultat: ÉCHEC ===
SNR: 2.84 dB (seuil: 5 dB)
Corrélation: 0.723 (seuil: 0.8)
MOS: 3.57/5 (seuil: 2.5)
Clarté: 0.989 (seuil: 0.7)</msg>
<msg time="2025-06-11T14:56:52.844490" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T14:56:52.844490" level="INFO">${metrics} = {'snr': 2.8401871758814274, 'correlation': 0.7233585138897081, 'mse': 0.01702577762497709, 'rmse': 0.13048286333835984, 'energy_ratio': 0.8672366689972671, 'max_diff': 1.1905998047652124, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T14:56:20.416773" elapsed="32.427717"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:56:52.845479" level="INFO">SNR: 2.8401871758814274 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:56:52.844490" elapsed="0.000989"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:56:52.846478" level="INFO">Corrélation: 0.7233585138897081 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:56:52.845479" elapsed="0.000999"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:56:52.846478" level="INFO">MOS: 3.5687017900396016/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:56:52.846478" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:56:52.846478" level="INFO">Clarté: 0.9892200719472459 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:56:52.846478" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:56:52.847477" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:56:52.846478" elapsed="0.000999"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:56:52.847477" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:56:52.847477" elapsed="0.001020"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:56:52.848497" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:56:52.848497" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:56:52.849496" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:56:52.848497" elapsed="0.000999"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:56:52.849496" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:56:52.849496" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:56:52.849496" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:56:52.849496" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T14:56:52.849496" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T14:56:52.849496" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T14:56:52.849496" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:56:52.850493" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T14:56:52.849496" elapsed="0.000997"/>
</branch>
<status status="FAIL" start="2025-06-11T14:56:52.849496" elapsed="0.000997">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T14:56:52.850493" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T14:56:20.416773" elapsed="32.433720">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:56:52.850493" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T14:55:37.428237" elapsed="75.422256">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T14:56:52.850493" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:55:37.428237" elapsed="75.422256"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:56:52.850493" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T14:56:52.850493" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T14:56:52.850493" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:56:52.850493" level="INFO">${attempt} = 8</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:56:52.850493" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:56:52.851512" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 8/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:56:52.850493" elapsed="0.001019"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:56:54.851871" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:56:52.851512" elapsed="2.000359"/>
</kw>
<status status="PASS" start="2025-06-11T14:56:52.850493" elapsed="2.001378"/>
</branch>
<status status="PASS" start="2025-06-11T14:56:52.850493" elapsed="2.001378"/>
</if>
<status status="PASS" start="2025-06-11T14:56:52.850493" elapsed="2.001378"/>
</branch>
<status status="PASS" start="2025-06-11T14:56:52.850493" elapsed="2.001378"/>
</if>
<var name="${index}">6</var>
<status status="PASS" start="2025-06-11T14:55:37.427712" elapsed="77.424159"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T14:56:54.891889" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T14:56:54.852926" elapsed="0.038963"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T14:56:54.891889" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T14:56:54.891889" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T14:56:54.892921" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T14:56:54.891889" elapsed="0.001032"/>
</kw>
<status status="PASS" start="2025-06-11T14:56:54.852926" elapsed="0.039995"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T14:56:54.892921" elapsed="0.046486"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:56:57.939630" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:56:54.939407" elapsed="3.000223"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T14:56:58.020314" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T14:56:57.939630" elapsed="0.080684"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T14:56:58.020829" elapsed="0.000083"/>
</kw>
<status status="PASS" start="2025-06-11T14:56:54.892921" elapsed="3.127991"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:56:58.020912" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:56:58.020912" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T14:56:58.021838" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T14:56:58.021838" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T14:56:58.020912" elapsed="0.000926"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T14:56:58.021838" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T14:56:58.021838" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T14:56:58.021838" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T14:56:58.022839" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T14:56:58.020912" elapsed="0.001927"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:56:58.022839" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:56:58.022839" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:56:58.022839" elapsed="0.046613"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T14:56:58.022839" elapsed="0.046613"/>
</kw>
<status status="PASS" start="2025-06-11T14:56:58.022839" elapsed="0.046613"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T14:56:58.111704" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:56:58.069452" elapsed="0.042252"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:56:58.111704" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T14:56:58.112820" elapsed="0.470029"/>
</kw>
<msg time="2025-06-11T14:56:58.582849" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:56:58.112820" elapsed="0.470029"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:56:58.583850" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:56:58.022839" elapsed="0.561011"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:57:00.584083" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:56:58.583850" elapsed="2.000233"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T14:57:19.006751" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T14:57:00.584083" elapsed="18.422668"/>
</kw>
<msg time="2025-06-11T14:57:19.006751" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:57:00.584083" elapsed="18.422668"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:57:19.006751" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:57:37.319176" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:57:19.006751" elapsed="18.312425"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T14:57:37.377321" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:57:37.319738" elapsed="0.057583"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:57:37.377321" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T14:57:37.377321" elapsed="0.476186"/>
</kw>
<msg time="2025-06-11T14:57:37.853507" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:57:37.377321" elapsed="0.476186"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:57:37.853507" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:57:37.319176" elapsed="0.534331"/>
</kw>
<status status="PASS" start="2025-06-11T14:56:58.020912" elapsed="39.832595"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T14:58:10.566922" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_145756.png</msg>
<msg time="2025-06-11T14:58:10.566922" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 14:57:39

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.055s
Ajustement: -54.6ms
Corrélation initiale: 0.210
Original length: 803470, Recorded length: 803470
Best lag: 424 samples (0.010 seconds)
Final lengths - Original: 803046, Aligned: 803046
Décalage temporel final: 0.010 secondes

=== Résultats ===
Décalage temporel: 0.010 secondes
         snr: -1.6617
 correlation: 0.2134
         mse: 0.0480
        rmse: 0.2192
energy_ratio: 0.8626
    max_diff: 1.2734
   mean_diff: 0.1568
         mos: 2.7897
     clarity: 1.0261
  clarity_db: 0.1119

=== Résultat: ÉCHEC ===
SNR: -1.66 dB (seuil: 5 dB)
Corrélation: 0.213 (seuil: 0.8)
MOS: 2.79/5 (seuil: 2.5)
Clarté: 1.026 (seuil: 0.7)</msg>
<msg time="2025-06-11T14:58:10.566922" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T14:58:10.566922" level="INFO">${metrics} = {'snr': -1.6616585570628368, 'correlation': 0.21343666395484687, 'mse': 0.04803913170858907, 'rmse': 0.21917831030599053, 'energy_ratio': 0.8625633420868597, 'max_diff': 1.2734179137487915, 'mean_diff...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T14:57:37.853507" elapsed="32.713415"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:58:10.567560" level="INFO">SNR: -1.6616585570628368 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:58:10.566922" elapsed="0.000638"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:58:10.567560" level="INFO">Corrélation: 0.21343666395484687 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:58:10.567560" elapsed="0.000606"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:58:10.568191" level="INFO">MOS: 2.7896576544633027/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:58:10.568191" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:58:10.568739" level="INFO">Clarté: 1.026090057399323 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:58:10.568191" elapsed="0.000548"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:58:10.568739" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:58:10.568739" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:58:10.569845" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:58:10.568739" elapsed="0.001106"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:58:10.570788" level="INFO">${mos_ok} = False</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:58:10.569845" elapsed="0.000943"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:58:10.570788" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:58:10.570788" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:58:10.571844" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:58:10.571844" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:58:10.571844" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:58:10.571844" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T14:58:10.571844" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T14:58:10.571844" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T14:58:10.571844" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:58:10.571844" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T14:58:10.571844" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T14:58:10.571844" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T14:58:10.571844" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T14:57:37.853507" elapsed="32.719297">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:58:10.572804" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T14:56:54.851871" elapsed="75.720933">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T14:58:10.572804" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:56:54.851871" elapsed="75.720933"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:58:10.572804" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T14:58:10.573381" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T14:58:10.572804" elapsed="0.000577"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:58:10.573381" level="INFO">${attempt} = 9</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:58:10.573381" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:58:10.573381" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 9/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:58:10.573381" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:58:12.573764" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:58:10.573381" elapsed="2.000383"/>
</kw>
<status status="PASS" start="2025-06-11T14:58:10.573381" elapsed="2.000383"/>
</branch>
<status status="PASS" start="2025-06-11T14:58:10.573381" elapsed="2.000383"/>
</if>
<status status="PASS" start="2025-06-11T14:58:10.573381" elapsed="2.000383"/>
</branch>
<status status="PASS" start="2025-06-11T14:58:10.572804" elapsed="2.000960"/>
</if>
<var name="${index}">7</var>
<status status="PASS" start="2025-06-11T14:56:54.851871" elapsed="77.721893"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T14:58:12.614918" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T14:58:12.574812" elapsed="0.040106"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T14:58:12.614918" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T14:58:12.614918" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T14:58:12.615941" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T14:58:12.614918" elapsed="0.001023"/>
</kw>
<status status="PASS" start="2025-06-11T14:58:12.574812" elapsed="0.041129"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T14:58:12.615941" elapsed="0.053707"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:58:15.670090" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:58:12.669648" elapsed="3.000442"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T14:58:15.747801" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T14:58:15.670090" elapsed="0.077711"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T14:58:15.748329" elapsed="0.000045"/>
</kw>
<status status="PASS" start="2025-06-11T14:58:12.615941" elapsed="3.132433"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:58:15.748374" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:58:15.748374" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T14:58:15.749374" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T14:58:15.749374" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T14:58:15.748374" elapsed="0.001000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T14:58:15.749374" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T14:58:15.749374" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T14:58:15.749374" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T14:58:15.749374" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T14:58:15.748374" elapsed="0.001000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:58:15.749374" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:58:15.749374" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:58:15.750377" elapsed="0.050497"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T14:58:15.750377" elapsed="0.050497"/>
</kw>
<status status="PASS" start="2025-06-11T14:58:15.750377" elapsed="0.050497"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T14:58:15.855832" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:58:15.800874" elapsed="0.054958"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:58:15.855832" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T14:58:15.856830" elapsed="0.467035"/>
</kw>
<msg time="2025-06-11T14:58:16.323865" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:58:15.856830" elapsed="0.467035"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:58:16.324391" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:58:15.749374" elapsed="0.575017"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:58:18.324879" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:58:16.324391" elapsed="2.000488"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T14:58:36.720736" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T14:58:18.324879" elapsed="18.395857"/>
</kw>
<msg time="2025-06-11T14:58:36.721731" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:58:18.324879" elapsed="18.396852"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:58:36.721731" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:58:55.033895" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:58:36.721731" elapsed="18.312164"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T14:58:55.091091" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:58:55.034505" elapsed="0.056586"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:58:55.091091" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T14:58:55.092486" elapsed="0.470431"/>
</kw>
<msg time="2025-06-11T14:58:55.562917" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:58:55.091091" elapsed="0.471826"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:58:55.562917" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:58:55.033895" elapsed="0.529022"/>
</kw>
<status status="PASS" start="2025-06-11T14:58:15.748374" elapsed="39.814543"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T14:59:27.534480" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_145914.png</msg>
<msg time="2025-06-11T14:59:27.534480" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 14:58:57

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.032s
Ajustement: -31.9ms
Corrélation initiale: 0.566
Original length: 802053, Recorded length: 802053
Best lag: -436 samples (-0.010 seconds)
Final lengths - Original: 802053, Aligned: 802053
Décalage temporel final: -0.010 secondes

=== Résultats ===
Décalage temporel: -0.010 secondes
         snr: 7.4622
 correlation: 0.9063
         mse: 0.0059
        rmse: 0.0765
energy_ratio: 0.8696
    max_diff: 0.8260
   mean_diff: 0.0524
         mos: 3.9860
     clarity: 1.0065
  clarity_db: 0.0281

=== Résultat: SUCCÈS ===
SNR: 7.46 dB (seuil: 5 dB)
Corrélation: 0.906 (seuil: 0.8)
MOS: 3.99/5 (seuil: 2.5)
Clarté: 1.006 (seuil: 0.7)</msg>
<msg time="2025-06-11T14:59:27.534480" level="INFO">${test_passed} = True</msg>
<msg time="2025-06-11T14:59:27.534480" level="INFO">${metrics} = {'snr': 7.462232973145159, 'correlation': 0.9062614975639917, 'mse': 0.005859106558385362, 'rmse': 0.07654480098860642, 'energy_ratio': 0.8696474791791324, 'max_diff': 0.826007904818451, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T14:58:55.562917" elapsed="31.971563"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:59:27.535567" level="INFO">SNR: 7.462232973145159 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:59:27.534480" elapsed="0.001087"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:59:27.535567" level="INFO">Corrélation: 0.9062614975639917 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:59:27.535567" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:59:27.535567" level="INFO">MOS: 3.986003116002596/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:59:27.535567" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:59:27.536572" level="INFO">Clarté: 1.0064997796923425 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:59:27.535567" elapsed="0.001005"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:59:27.537199" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:59:27.536572" elapsed="0.000627"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:59:27.537819" level="INFO">${correlation_ok} = True</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:59:27.537199" elapsed="0.000620"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:59:27.538446" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:59:27.537819" elapsed="0.000627"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:59:27.538446" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:59:27.538446" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:59:27.538446" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:59:27.538446" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:59:27.538446" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:59:27.538446" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T14:59:27.539562" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T14:59:27.538446" elapsed="0.001116">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T14:59:27.538446" elapsed="0.001116">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:59:27.539562" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T14:59:27.539562" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T14:59:27.538446" elapsed="0.001116">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T14:59:27.539562" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T14:58:55.562917" elapsed="31.976645">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:59:27.540495" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T14:58:12.574812" elapsed="74.965683">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T14:59:27.540495" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:58:12.574288" elapsed="74.966207"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T14:59:27.540495" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T14:59:27.540495" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T14:59:27.540495" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T14:59:27.540495" level="INFO">${attempt} = 10</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T14:59:27.540495" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:59:27.540495" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 10/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:59:27.540495" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:59:29.542117" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:59:27.540495" elapsed="2.001622"/>
</kw>
<status status="PASS" start="2025-06-11T14:59:27.540495" elapsed="2.001622"/>
</branch>
<status status="PASS" start="2025-06-11T14:59:27.540495" elapsed="2.001622"/>
</if>
<status status="PASS" start="2025-06-11T14:59:27.540495" elapsed="2.001622"/>
</branch>
<status status="PASS" start="2025-06-11T14:59:27.540495" elapsed="2.001622"/>
</if>
<var name="${index}">8</var>
<status status="PASS" start="2025-06-11T14:58:12.574288" elapsed="76.967829"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T14:59:29.579806" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T14:59:29.542733" elapsed="0.037073"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T14:59:29.579806" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T14:59:29.579806" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T14:59:29.579806" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T14:59:29.579806" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:59:29.542733" elapsed="0.037073"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T14:59:29.580901" elapsed="0.050789"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:59:32.632240" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:59:29.631690" elapsed="3.000550"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T14:59:32.709623" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T14:59:32.632240" elapsed="0.077383"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T14:59:32.709623" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:59:29.579806" elapsed="3.129817"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:59:32.709623" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:59:32.709623" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T14:59:32.710622" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T14:59:32.710622" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T14:59:32.710622" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T14:59:32.710622" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T14:59:32.710622" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T14:59:32.710622" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T14:59:32.710622" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T14:59:32.709623" elapsed="0.000999"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T14:59:32.711624" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T14:59:32.711624" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:59:32.711624" elapsed="0.047723"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T14:59:32.711624" elapsed="0.047723"/>
</kw>
<status status="PASS" start="2025-06-11T14:59:32.711624" elapsed="0.047723"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T14:59:32.809138" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T14:59:32.760314" elapsed="0.048824"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:59:32.810150" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T14:59:32.810150" elapsed="0.473001"/>
</kw>
<msg time="2025-06-11T14:59:33.283668" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:59:32.810150" elapsed="0.473518"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:59:33.283668" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T14:59:32.711624" elapsed="0.572044"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T14:59:35.284192" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:59:33.283668" elapsed="2.000524"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T14:59:53.701790" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T14:59:35.284192" elapsed="18.417598"/>
</kw>
<msg time="2025-06-11T14:59:53.701790" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:59:35.284192" elapsed="18.417598"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T14:59:53.701790" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:00:12.015173" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T14:59:53.702822" elapsed="18.312351"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:00:12.073322" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:00:12.015173" elapsed="0.058149"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:00:12.073322" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:00:12.074321" elapsed="0.466841"/>
</kw>
<msg time="2025-06-11T15:00:12.541162" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:00:12.074321" elapsed="0.466841"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:00:12.541162" elapsed="0.000950"/>
</kw>
<status status="PASS" start="2025-06-11T15:00:12.015173" elapsed="0.526939"/>
</kw>
<status status="PASS" start="2025-06-11T14:59:32.709623" elapsed="39.832489"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:00:44.674315" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_150031.png</msg>
<msg time="2025-06-11T15:00:44.674315" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:00:14

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.043s
Ajustement: -43.4ms
Corrélation initiale: 0.876
Original length: 802883, Recorded length: 802883
Best lag: 1 samples (0.000 seconds)
Final lengths - Original: 802882, Aligned: 802882
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 6.2892
 correlation: 0.8764
         mse: 0.0077
        rmse: 0.0877
energy_ratio: 0.8684
    max_diff: 1.0826
   mean_diff: 0.0566
         mos: 3.9032
     clarity: 1.0181
  clarity_db: 0.0778

=== Résultat: SUCCÈS ===
SNR: 6.29 dB (seuil: 5 dB)
Corrélation: 0.876 (seuil: 0.8)
MOS: 3.90/5 (seuil: 2.5)
Clarté: 1.018 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:00:44.674315" level="INFO">${test_passed} = True</msg>
<msg time="2025-06-11T15:00:44.674315" level="INFO">${metrics} = {'snr': 6.289227587157951, 'correlation': 0.8763987220112625, 'mse': 0.007694888501326027, 'rmse': 0.08772051357194637, 'energy_ratio': 0.8684274585252064, 'max_diff': 1.0825784600915729, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:00:12.542112" elapsed="32.132203"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:00:44.675318" level="INFO">SNR: 6.289227587157951 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:00:44.674315" elapsed="0.001003"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:00:44.675824" level="INFO">Corrélation: 0.8763987220112625 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:00:44.675318" elapsed="0.000553"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:00:44.675871" level="INFO">MOS: 3.9032475698998326/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:00:44.675871" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:00:44.676838" level="INFO">Clarté: 1.0180803663153217 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:00:44.675871" elapsed="0.000967"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:00:44.676838" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:00:44.676838" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:00:44.677872" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:00:44.676838" elapsed="0.001034"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:00:44.678709" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:00:44.677872" elapsed="0.000837"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:00:44.679284" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:00:44.678750" elapsed="0.000534"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:00:44.679284" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:00:44.679284" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:00:44.679284" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:00:44.679284" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:00:44.679284" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:00:44.679284" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:00:44.679284" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:00:44.679284" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:00:44.679284" elapsed="0.001023"/>
</branch>
<status status="FAIL" start="2025-06-11T15:00:44.679284" elapsed="0.001023">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:00:44.680307" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:00:12.542112" elapsed="32.138195">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:00:44.680307" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T14:59:29.542733" elapsed="75.137574">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:00:44.680307" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T14:59:29.542117" elapsed="75.138190"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:00:44.680307" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:00:44.680307" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:00:44.680307" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:00:44.680307" level="INFO">${attempt} = 11</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:00:44.680307" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:00:44.681312" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 11/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:00:44.681312" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:00:46.682287" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:00:44.681312" elapsed="2.000975"/>
</kw>
<status status="PASS" start="2025-06-11T15:00:44.680307" elapsed="2.001980"/>
</branch>
<status status="PASS" start="2025-06-11T15:00:44.680307" elapsed="2.001980"/>
</if>
<status status="PASS" start="2025-06-11T15:00:44.680307" elapsed="2.001980"/>
</branch>
<status status="PASS" start="2025-06-11T15:00:44.680307" elapsed="2.001980"/>
</if>
<var name="${index}">9</var>
<status status="PASS" start="2025-06-11T14:59:29.542117" elapsed="77.140170"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:00:46.719659" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:00:46.683298" elapsed="0.036361"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:00:46.719659" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:00:46.719659" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:00:46.719659" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:00:46.719659" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:00:46.683298" elapsed="0.036361"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:00:46.720659" elapsed="0.069409"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:00:49.791356" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:00:46.791082" elapsed="3.000274"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:00:49.873856" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:00:49.791356" elapsed="0.082500"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:00:49.873856" elapsed="0.000981"/>
</kw>
<status status="PASS" start="2025-06-11T15:00:46.720659" elapsed="3.154178"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:00:49.874837" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:00:49.874837" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:00:49.875893" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:00:49.875893" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:00:49.874837" elapsed="0.001056"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:00:49.876900" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:00:49.875893" elapsed="0.001007"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:00:49.876900" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:00:49.876900" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:00:49.874837" elapsed="0.002063"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:00:49.877463" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:00:49.876900" elapsed="0.000575"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:00:49.877475" elapsed="0.047398"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:00:49.877475" elapsed="0.047398"/>
</kw>
<status status="PASS" start="2025-06-11T15:00:49.877475" elapsed="0.047398"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:00:49.975821" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:00:49.924873" elapsed="0.050948"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:00:49.975821" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:00:49.975821" elapsed="0.473996"/>
</kw>
<msg time="2025-06-11T15:00:50.449817" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:00:49.975821" elapsed="0.473996"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:00:50.449817" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:00:49.877475" elapsed="0.572342"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:00:52.450105" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:00:50.449817" elapsed="2.000288"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:01:10.849168" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:00:52.450105" elapsed="18.399063"/>
</kw>
<msg time="2025-06-11T15:01:10.849168" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:00:52.450105" elapsed="18.399063"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:01:10.849168" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:01:29.161220" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:01:10.849168" elapsed="18.312052"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:01:29.214865" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:01:29.161803" elapsed="0.053062"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:01:29.214865" elapsed="0.000533"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:01:29.215453" elapsed="0.465836"/>
</kw>
<msg time="2025-06-11T15:01:29.681289" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:01:29.215453" elapsed="0.465836"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:01:29.681289" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:01:29.161220" elapsed="0.520069"/>
</kw>
<status status="PASS" start="2025-06-11T15:00:49.874837" elapsed="39.806452"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:02:01.832851" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_150148.png</msg>
<msg time="2025-06-11T15:02:01.832851" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:01:31

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.045s
Ajustement: -45.4ms
Corrélation initiale: 0.861
Original length: 802932, Recorded length: 802932
Best lag: -1 samples (-0.000 seconds)
Final lengths - Original: 802932, Aligned: 802932
Décalage temporel final: -0.000 secondes

=== Résultats ===
Décalage temporel: -0.000 secondes
         snr: 5.8181
 correlation: 0.8619
         mse: 0.0086
        rmse: 0.0926
energy_ratio: 0.8670
    max_diff: 0.9664
   mean_diff: 0.0649
         mos: 3.8670
     clarity: 1.0086
  clarity_db: 0.0373

=== Résultat: SUCCÈS ===
SNR: 5.82 dB (seuil: 5 dB)
Corrélation: 0.862 (seuil: 0.8)
MOS: 3.87/5 (seuil: 2.5)
Clarté: 1.009 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:02:01.833415" level="INFO">${test_passed} = True</msg>
<msg time="2025-06-11T15:02:01.833415" level="INFO">${metrics} = {'snr': 5.81813449358685, 'correlation': 0.8618941335584392, 'mse': 0.008577636318495237, 'rmse': 0.09261552957520265, 'energy_ratio': 0.8669845306903586, 'max_diff': 0.9663614765322197, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:01:29.682288" elapsed="32.151127"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:02:01.833415" level="INFO">SNR: 5.81813449358685 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:02:01.833415" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:02:01.833415" level="INFO">Corrélation: 0.8618941335584392 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:02:01.833415" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:02:01.834541" level="INFO">MOS: 3.866998340013601/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:02:01.833415" elapsed="0.001126"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:02:01.834541" level="INFO">Clarté: 1.00862007355086 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:02:01.834541" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:02:01.835547" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:02:01.834541" elapsed="0.001006"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:02:01.836256" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:02:01.835547" elapsed="0.000709"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:02:01.837341" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:02:01.836256" elapsed="0.001085"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:02:01.837341" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:02:01.837341" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:02:01.838296" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:02:01.837341" elapsed="0.000955"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:02:01.838296" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:02:01.838296" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:02:01.838296" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:02:01.838296" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:02:01.838296" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:02:01.838296" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:02:01.838296" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T15:02:01.838296" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:02:01.838296" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:01:29.682288" elapsed="32.156008">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:02:01.838296" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:00:46.682287" elapsed="75.156009">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:02:01.839329" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:00:46.682287" elapsed="75.157042"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:02:01.839329" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:02:01.839329" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:02:01.839329" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:02:01.839329" level="INFO">${attempt} = 12</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:02:01.839329" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:02:01.839329" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 12/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:02:01.839329" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:02:03.839468" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:02:01.839329" elapsed="2.000139"/>
</kw>
<status status="PASS" start="2025-06-11T15:02:01.839329" elapsed="2.000139"/>
</branch>
<status status="PASS" start="2025-06-11T15:02:01.839329" elapsed="2.000139"/>
</if>
<status status="PASS" start="2025-06-11T15:02:01.839329" elapsed="2.000139"/>
</branch>
<status status="PASS" start="2025-06-11T15:02:01.839329" elapsed="2.000139"/>
</if>
<var name="${index}">10</var>
<status status="PASS" start="2025-06-11T15:00:46.682287" elapsed="77.157181"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:02:03.881227" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:02:03.840558" elapsed="0.040669"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:02:03.881918" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:02:03.881227" elapsed="0.000691"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:02:03.881950" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:02:03.881950" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:02:03.840558" elapsed="0.041392"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:02:03.881950" elapsed="0.052551"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:02:06.934842" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:02:03.934501" elapsed="3.000341"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:02:07.014447" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:02:06.934842" elapsed="0.079605"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:02:07.014447" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:02:03.881950" elapsed="3.132497"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:02:07.015463" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:02:07.015463" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:02:07.016479" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:02:07.016479" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:02:07.015463" elapsed="0.001016"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:02:07.016479" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:02:07.016479" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:02:07.016479" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:02:07.016479" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:02:07.015463" elapsed="0.001016"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:02:07.017089" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:02:07.017089" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:02:07.017089" elapsed="0.055966"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:02:07.017089" elapsed="0.055966"/>
</kw>
<status status="PASS" start="2025-06-11T15:02:07.017089" elapsed="0.055966"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:02:07.123178" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:02:07.073055" elapsed="0.050123"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:02:07.123178" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:02:07.123178" elapsed="0.459482"/>
</kw>
<msg time="2025-06-11T15:02:07.582660" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:02:07.123178" elapsed="0.459482"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:02:07.582660" elapsed="0.001000"/>
</kw>
<status status="PASS" start="2025-06-11T15:02:07.017089" elapsed="0.566571"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:02:09.583845" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:02:07.583660" elapsed="2.000185"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:02:28.020877" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:02:09.583845" elapsed="18.437032"/>
</kw>
<msg time="2025-06-11T15:02:28.021806" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:02:09.583845" elapsed="18.437961"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:02:28.021806" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:02:46.334115" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:02:28.021806" elapsed="18.312309"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:02:46.381881" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:02:46.334667" elapsed="0.047214"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:02:46.381881" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:02:46.381881" elapsed="0.472299"/>
</kw>
<msg time="2025-06-11T15:02:46.854180" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:02:46.381881" elapsed="0.472299"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:02:46.854180" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:02:46.334115" elapsed="0.520065"/>
</kw>
<status status="PASS" start="2025-06-11T15:02:07.014447" elapsed="39.839733"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:03:19.058525" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_150305.png</msg>
<msg time="2025-06-11T15:03:19.058525" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:02:48

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.15s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.043s
Ajustement: -43.4ms
Corrélation initiale: 0.474
Original length: 802449, Recorded length: 802449
Best lag: 1 samples (0.000 seconds)
Final lengths - Original: 802448, Aligned: 802448
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 0.0884
 correlation: 0.4753
         mse: 0.0320
        rmse: 0.1790
energy_ratio: 0.8627
    max_diff: 1.5479
   mean_diff: 0.1091
         mos: 3.1738
     clarity: 1.0129
  clarity_db: 0.0556

=== Résultat: ÉCHEC ===
SNR: 0.09 dB (seuil: 5 dB)
Corrélation: 0.475 (seuil: 0.8)
MOS: 3.17/5 (seuil: 2.5)
Clarté: 1.013 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:03:19.058525" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:03:19.058525" level="INFO">${metrics} = {'snr': 0.088395923069238, 'correlation': 0.4752582285335634, 'mse': 0.03204257296579077, 'rmse': 0.17900439370526852, 'energy_ratio': 0.862714864445922, 'max_diff': 1.5478519494437002, 'mean_diff': 0...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:02:46.855339" elapsed="32.203186"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:03:19.059548" level="INFO">SNR: 0.088395923069238 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:03:19.058525" elapsed="0.001023"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:03:19.059548" level="INFO">Corrélation: 0.4752582285335634 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:03:19.059548" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:03:19.060559" level="INFO">MOS: 3.173845711163046/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:03:19.059548" elapsed="0.001011"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:03:19.060559" level="INFO">Clarté: 1.012882531655828 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:03:19.060559" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:03:19.061151" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:03:19.060559" elapsed="0.000592"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:03:19.062200" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:03:19.061678" elapsed="0.000522"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:03:19.062200" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:03:19.062200" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:03:19.063226" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:03:19.062200" elapsed="0.001026"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:03:19.063226" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:03:19.063226" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:03:19.063226" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:03:19.063226" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:03:19.063226" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:03:19.063226" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:03:19.063226" elapsed="0.001043">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:03:19.064269" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:03:19.064269" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T15:03:19.063226" elapsed="0.001043">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:03:19.064269" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:02:46.854180" elapsed="32.210089">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:03:19.064269" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:02:03.839983" elapsed="75.224286">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:03:19.064269" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:02:03.839983" elapsed="75.224286"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:03:19.064269" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:03:19.064269" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:03:19.064269" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:03:19.064269" level="INFO">${attempt} = 13</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:03:19.064269" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:03:19.065278" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 13/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:03:19.064269" elapsed="0.001009"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:03:21.065691" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:03:19.065278" elapsed="2.000413"/>
</kw>
<status status="PASS" start="2025-06-11T15:03:19.064269" elapsed="2.001422"/>
</branch>
<status status="PASS" start="2025-06-11T15:03:19.064269" elapsed="2.001422"/>
</if>
<status status="PASS" start="2025-06-11T15:03:19.064269" elapsed="2.001422"/>
</branch>
<status status="PASS" start="2025-06-11T15:03:19.064269" elapsed="2.001422"/>
</if>
<var name="${index}">11</var>
<status status="PASS" start="2025-06-11T15:02:03.839983" elapsed="77.225708"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:03:21.103578" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:03:21.066724" elapsed="0.036854"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:03:21.104640" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:03:21.103578" elapsed="0.001062"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:03:21.104640" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:03:21.104640" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:03:21.066724" elapsed="0.037916"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:03:21.104640" elapsed="0.052592"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:03:24.158455" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:03:21.158228" elapsed="3.000227"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:03:24.238479" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:03:24.158455" elapsed="0.080024"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:03:24.238479" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:03:21.104640" elapsed="3.133839"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:03:24.239480" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:03:24.238479" elapsed="0.001001"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:03:24.239480" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:03:24.239480" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:03:24.239480" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:03:24.239480" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:03:24.239480" elapsed="0.001318"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:03:24.240798" elapsed="0.000084"/>
</return>
<msg time="2025-06-11T15:03:24.240882" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:03:24.239480" elapsed="0.001402"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:03:24.240882" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:03:24.240882" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:03:24.240882" elapsed="0.049107"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:03:24.240882" elapsed="0.050104"/>
</kw>
<status status="PASS" start="2025-06-11T15:03:24.240882" elapsed="0.050104"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:03:24.339338" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:03:24.290986" elapsed="0.048352"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:03:24.339338" elapsed="0.000997"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:03:24.340335" elapsed="0.465231"/>
</kw>
<msg time="2025-06-11T15:03:24.805566" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:03:24.340335" elapsed="0.465231"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:03:24.805566" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:03:24.240882" elapsed="0.564684"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:03:26.806589" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:03:24.805566" elapsed="2.001023"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:03:45.223028" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:03:26.806589" elapsed="18.416439"/>
</kw>
<msg time="2025-06-11T15:03:45.223550" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:03:26.806589" elapsed="18.416961"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:03:45.223550" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:04:03.536574" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:03:45.223550" elapsed="18.313024"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:04:03.586562" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:04:03.536574" elapsed="0.049988"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:04:03.586562" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:04:03.587619" elapsed="0.476469"/>
</kw>
<msg time="2025-06-11T15:04:04.064088" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:04:03.586562" elapsed="0.477526"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:04:04.064088" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:04:03.536574" elapsed="0.527514"/>
</kw>
<status status="PASS" start="2025-06-11T15:03:24.238479" elapsed="39.825609"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:04:36.534788" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_150422.png</msg>
<msg time="2025-06-11T15:04:36.534788" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:04:06

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.21s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.046s
Ajustement: -45.5ms
Corrélation initiale: 0.253
Original length: 804870, Recorded length: 804870
Best lag: 179 samples (0.004 seconds)
Final lengths - Original: 804691, Aligned: 804691
Décalage temporel final: 0.004 secondes

=== Résultats ===
Décalage temporel: 0.004 secondes
         snr: -1.3004
 correlation: 0.2760
         mse: 0.0444
        rmse: 0.2107
energy_ratio: 0.8615
    max_diff: 1.4811
   mean_diff: 0.1474
         mos: 2.8792
     clarity: 1.0168
  clarity_db: 0.0724

=== Résultat: ÉCHEC ===
SNR: -1.30 dB (seuil: 5 dB)
Corrélation: 0.276 (seuil: 0.8)
MOS: 2.88/5 (seuil: 2.5)
Clarté: 1.017 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:04:36.534788" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:04:36.534788" level="INFO">${metrics} = {'snr': -1.3004483935869229, 'correlation': 0.2760307963667839, 'mse': 0.04438226065076774, 'rmse': 0.21067097723883976, 'energy_ratio': 0.8615133285802395, 'max_diff': 1.4810925467581668, 'mean_diff'...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:04:04.065079" elapsed="32.469709"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:04:36.534788" level="INFO">SNR: -1.3004483935869229 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:04:36.534788" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:04:36.535781" level="INFO">Corrélation: 0.2760307963667839 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:04:36.534788" elapsed="0.000993"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:04:36.535781" level="INFO">MOS: 2.879219019896664/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:04:36.535781" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:04:36.535781" level="INFO">Clarté: 1.0168170598880284 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:04:36.535781" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:04:36.536795" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:04:36.535781" elapsed="0.001538"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:04:36.537352" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:04:36.537352" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:04:36.538349" level="INFO">${mos_ok} = False</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:04:36.537352" elapsed="0.000997"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:04:36.538349" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:04:36.538349" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:04:36.539414" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:04:36.538349" elapsed="0.001065"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:04:36.539414" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:04:36.539414" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:04:36.539414" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:04:36.539414" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:04:36.539414" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:04:36.539414" elapsed="0.001013"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:04:36.539414" elapsed="0.001013"/>
</branch>
<status status="FAIL" start="2025-06-11T15:04:36.539414" elapsed="0.001013">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:04:36.540427" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:04:04.064088" elapsed="32.476339">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:04:36.540427" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:03:21.065691" elapsed="75.474736">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:04:36.540427" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:03:21.065691" elapsed="75.474736"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:04:36.540427" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:04:36.540427" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:04:36.540427" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:04:36.540427" level="INFO">${attempt} = 14</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:04:36.540427" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:04:36.541445" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 14/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:04:36.541445" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:04:38.541819" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:04:36.541445" elapsed="2.000374"/>
</kw>
<status status="PASS" start="2025-06-11T15:04:36.540427" elapsed="2.001392"/>
</branch>
<status status="PASS" start="2025-06-11T15:04:36.540427" elapsed="2.001392"/>
</if>
<status status="PASS" start="2025-06-11T15:04:36.540427" elapsed="2.001392"/>
</branch>
<status status="PASS" start="2025-06-11T15:04:36.540427" elapsed="2.001392"/>
</if>
<var name="${index}">12</var>
<status status="PASS" start="2025-06-11T15:03:21.065691" elapsed="77.476128"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:04:38.580787" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:04:38.543422" elapsed="0.037365"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:04:38.580787" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:04:38.580787" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:04:38.581795" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:04:38.580787" elapsed="0.001008"/>
</kw>
<status status="PASS" start="2025-06-11T15:04:38.543422" elapsed="0.038373"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:04:38.581795" elapsed="0.053742"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:04:41.637092" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:04:38.635537" elapsed="3.001555"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:04:41.714495" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:04:41.637092" elapsed="0.077403"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:04:41.714495" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:04:38.581795" elapsed="3.133703"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:04:41.715498" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:04:41.715498" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:04:41.716493" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:04:41.716493" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:04:41.715498" elapsed="0.000995"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:04:41.716493" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:04:41.716493" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:04:41.716493" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:04:41.716493" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:04:41.715498" elapsed="0.000995"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:04:41.716493" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:04:41.716493" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:04:41.717509" elapsed="0.049454"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:04:41.717509" elapsed="0.049454"/>
</kw>
<status status="PASS" start="2025-06-11T15:04:41.717509" elapsed="0.049454"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:04:41.813439" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:04:41.766963" elapsed="0.046476"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:04:41.813439" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:04:41.813439" elapsed="0.474574"/>
</kw>
<msg time="2025-06-11T15:04:42.288013" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:04:41.813439" elapsed="0.474574"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:04:42.288013" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:04:41.717509" elapsed="0.570504"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:04:44.288356" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:04:42.288013" elapsed="2.000343"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:05:02.674185" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:04:44.288356" elapsed="18.385829"/>
</kw>
<msg time="2025-06-11T15:05:02.674185" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:04:44.288356" elapsed="18.385829"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:05:02.674185" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:05:20.986504" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:05:02.674185" elapsed="18.312319"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:05:21.038654" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:05:20.986504" elapsed="0.052150"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:05:21.038654" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:05:21.038654" elapsed="0.471996"/>
</kw>
<msg time="2025-06-11T15:05:21.510650" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:05:21.038654" elapsed="0.471996"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:05:21.511652" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:05:20.986504" elapsed="0.525148"/>
</kw>
<status status="PASS" start="2025-06-11T15:04:41.715498" elapsed="39.796154"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:05:53.702964" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_150540.png</msg>
<msg time="2025-06-11T15:05:53.702964" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:05:23

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.032s
Ajustement: -31.7ms
Corrélation initiale: 0.574
Original length: 802135, Recorded length: 802135
Best lag: -436 samples (-0.010 seconds)
Final lengths - Original: 802135, Aligned: 802135
Décalage temporel final: -0.010 secondes

=== Résultats ===
Décalage temporel: -0.010 secondes
         snr: 3.3472
 correlation: 0.7540
         mse: 0.0151
        rmse: 0.1230
energy_ratio: 0.8662
    max_diff: 1.3962
   mean_diff: 0.0780
         mos: 3.6387
     clarity: 1.0061
  clarity_db: 0.0264

=== Résultat: ÉCHEC ===
SNR: 3.35 dB (seuil: 5 dB)
Corrélation: 0.754 (seuil: 0.8)
MOS: 3.64/5 (seuil: 2.5)
Clarté: 1.006 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:05:53.703528" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:05:53.703528" level="INFO">${metrics} = {'snr': 3.347222345332429, 'correlation': 0.7540109545532375, 'mse': 0.015121219323051402, 'rmse': 0.12296836716428905, 'energy_ratio': 0.8661512269479174, 'max_diff': 1.3962107220938003, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:05:21.512652" elapsed="32.190876"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:05:53.703528" level="INFO">SNR: 3.347222345332429 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:05:53.703528" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:05:53.703528" level="INFO">Corrélation: 0.7540109545532375 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:05:53.703528" elapsed="0.000993"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:05:53.704521" level="INFO">MOS: 3.638702039277182/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:05:53.704521" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:05:53.704521" level="INFO">Clarté: 1.0061019401065536 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:05:53.704521" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:05:53.705547" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:05:53.704521" elapsed="0.001026"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:05:53.705547" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:05:53.705547" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:05:53.706583" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:05:53.706578" elapsed="0.000005"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:05:53.707612" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:05:53.706583" elapsed="0.001029"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:05:53.707612" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:05:53.707612" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:05:53.707612" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:05:53.707612" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:05:53.707612" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:05:53.707612" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:05:53.707612" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:05:53.708577" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:05:53.707612" elapsed="0.000965"/>
</branch>
<status status="FAIL" start="2025-06-11T15:05:53.707612" elapsed="0.000965">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:05:53.708577" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:05:21.511652" elapsed="32.196925">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:05:53.708577" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:04:38.542378" elapsed="75.166199">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:05:53.708577" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:04:38.542378" elapsed="75.166199"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:05:53.709101" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:05:53.709133" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:05:53.708577" elapsed="0.000556"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:05:53.709133" level="INFO">${attempt} = 15</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:05:53.709133" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:05:53.709133" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 15/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:05:53.709133" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:05:55.709388" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:05:53.709133" elapsed="2.000255"/>
</kw>
<status status="PASS" start="2025-06-11T15:05:53.709133" elapsed="2.000255"/>
</branch>
<status status="PASS" start="2025-06-11T15:05:53.709133" elapsed="2.000255"/>
</if>
<status status="PASS" start="2025-06-11T15:05:53.709133" elapsed="2.000255"/>
</branch>
<status status="PASS" start="2025-06-11T15:05:53.708577" elapsed="2.000811"/>
</if>
<var name="${index}">13</var>
<status status="PASS" start="2025-06-11T15:04:38.542378" elapsed="77.167010"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:05:55.749161" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:05:55.710384" elapsed="0.038777"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:05:55.749161" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:05:55.749161" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:05:55.750176" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:05:55.750176" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:05:55.709388" elapsed="0.040788"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:05:55.750176" elapsed="0.054018"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:05:58.805051" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:05:55.804194" elapsed="3.000857"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:05:58.880554" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:05:58.805051" elapsed="0.075503"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:05:58.880554" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:05:55.750176" elapsed="3.130378"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:05:58.881558" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:05:58.881558" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:05:58.882250" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:05:58.882250" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:05:58.881558" elapsed="0.000692"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:05:58.882250" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:05:58.882250" elapsed="0.000523"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:05:58.882773" elapsed="0.000070"/>
</return>
<msg time="2025-06-11T15:05:58.882843" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:05:58.881558" elapsed="0.001285"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:05:58.882843" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:05:58.882843" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:05:58.883357" elapsed="0.058095"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:05:58.883357" elapsed="0.058095"/>
</kw>
<status status="PASS" start="2025-06-11T15:05:58.882843" elapsed="0.058609"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:05:58.988847" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:05:58.941452" elapsed="0.047395"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:05:58.988847" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:05:58.988847" elapsed="0.464217"/>
</kw>
<msg time="2025-06-11T15:05:59.454063" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:05:58.988847" elapsed="0.465216"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:05:59.454063" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:05:58.882843" elapsed="0.571220"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:06:01.454353" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:05:59.454063" elapsed="2.000290"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:06:19.841901" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:06:01.454353" elapsed="18.388640"/>
</kw>
<msg time="2025-06-11T15:06:19.842993" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:06:01.454353" elapsed="18.388640"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:06:19.842993" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:06:38.155225" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:06:19.842993" elapsed="18.312232"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:06:38.217850" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:06:38.155225" elapsed="0.062625"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:06:38.217850" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:06:38.218866" elapsed="0.478926"/>
</kw>
<msg time="2025-06-11T15:06:38.697792" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:06:38.218866" elapsed="0.478926"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:06:38.697792" elapsed="0.000573"/>
</kw>
<status status="PASS" start="2025-06-11T15:06:38.155225" elapsed="0.543140"/>
</kw>
<status status="PASS" start="2025-06-11T15:05:58.880554" elapsed="39.817811"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:07:10.992510" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_150657.png</msg>
<msg time="2025-06-11T15:07:10.992510" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:06:40

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.052s
Ajustement: -52.3ms
Corrélation initiale: 0.541
Original length: 803003, Recorded length: 803003
Best lag: 433 samples (0.010 seconds)
Final lengths - Original: 802570, Aligned: 802570
Décalage temporel final: 0.010 secondes

=== Résultats ===
Décalage temporel: 0.010 secondes
         snr: 4.1415
 correlation: 0.7959
         mse: 0.0126
        rmse: 0.1123
energy_ratio: 0.8709
    max_diff: 1.0251
   mean_diff: 0.0716
         mos: 3.7208
     clarity: 1.0116
  clarity_db: 0.0499

=== Résultat: ÉCHEC ===
SNR: 4.14 dB (seuil: 5 dB)
Corrélation: 0.796 (seuil: 0.8)
MOS: 3.72/5 (seuil: 2.5)
Clarté: 1.012 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:07:10.992510" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:07:10.992510" level="INFO">${metrics} = {'snr': 4.141541225729474, 'correlation': 0.7959350045448846, 'mse': 0.01260966692256618, 'rmse': 0.11229277324283242, 'energy_ratio': 0.8709442246529738, 'max_diff': 1.0250602617289277, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:06:38.698365" elapsed="32.294145"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:07:10.993510" level="INFO">SNR: 4.141541225729474 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:07:10.992510" elapsed="0.001000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:07:10.993510" level="INFO">Corrélation: 0.7959350045448846 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:07:10.993510" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:07:10.994509" level="INFO">MOS: 3.72078365448304/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:07:10.993510" elapsed="0.000999"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:07:10.994509" level="INFO">Clarté: 1.0115504080730378 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:07:10.994509" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:07:10.995511" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:07:10.994509" elapsed="0.001002"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:07:10.995511" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:07:10.995511" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:07:10.996512" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:07:10.995511" elapsed="0.001001"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:07:10.997618" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:07:10.996512" elapsed="0.001128"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:07:10.997640" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:07:10.997640" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:07:10.997640" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:07:10.997640" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:07:10.997640" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:07:10.997640" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:07:10.997640" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:07:10.997640" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:07:10.997640" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T15:07:10.997640" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:07:10.997640" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:06:38.698365" elapsed="32.299275">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:07:10.998648" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:05:55.709388" elapsed="75.289260">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:07:10.998648" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:05:55.709388" elapsed="75.289260"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:07:10.998648" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:07:10.998648" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:07:10.998648" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:07:10.998648" level="INFO">${attempt} = 16</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:07:10.998648" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:07:10.998648" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 16/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:07:10.998648" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:07:12.998749" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:07:10.998648" elapsed="2.000101"/>
</kw>
<status status="PASS" start="2025-06-11T15:07:10.998648" elapsed="2.000101"/>
</branch>
<status status="PASS" start="2025-06-11T15:07:10.998648" elapsed="2.000101"/>
</if>
<status status="PASS" start="2025-06-11T15:07:10.998648" elapsed="2.000101"/>
</branch>
<status status="PASS" start="2025-06-11T15:07:10.998648" elapsed="2.000101"/>
</if>
<var name="${index}">14</var>
<status status="PASS" start="2025-06-11T15:05:55.709388" elapsed="77.289361"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:07:13.039246" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:07:12.999272" elapsed="0.039974"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:07:13.040520" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:07:13.040520" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:07:13.040520" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:07:13.040520" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:07:12.999272" elapsed="0.041248"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:07:13.040520" elapsed="0.049681"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:07:16.090564" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:07:13.090201" elapsed="3.000363"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:07:16.167445" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:07:16.090564" elapsed="0.076881"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:07:16.167445" elapsed="0.000992"/>
</kw>
<status status="PASS" start="2025-06-11T15:07:13.040520" elapsed="3.127917"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:07:16.168437" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:07:16.168437" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:07:16.169481" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:07:16.169481" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:07:16.168437" elapsed="0.001044"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:07:16.169481" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:07:16.169481" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:07:16.169481" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:07:16.169481" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:07:16.168437" elapsed="0.001044"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:07:16.169481" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:07:16.169481" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:07:16.170499" elapsed="0.049334"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:07:16.170499" elapsed="0.049334"/>
</kw>
<status status="PASS" start="2025-06-11T15:07:16.170499" elapsed="0.049334"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:07:16.268499" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:07:16.219833" elapsed="0.048666"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:07:16.268499" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:07:16.268499" elapsed="0.467163"/>
</kw>
<msg time="2025-06-11T15:07:16.735662" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:07:16.268499" elapsed="0.467163"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:07:16.735662" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:07:16.170499" elapsed="0.565163"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:07:18.736149" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:07:16.735662" elapsed="2.000487"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:07:37.141396" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:07:18.736149" elapsed="18.405247"/>
</kw>
<msg time="2025-06-11T15:07:37.141396" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:07:18.736149" elapsed="18.405247"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:07:37.141396" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:07:55.454591" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:07:37.141396" elapsed="18.313195"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:07:55.506864" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:07:55.454591" elapsed="0.052273"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:07:55.506864" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:07:55.506864" elapsed="0.465983"/>
</kw>
<msg time="2025-06-11T15:07:55.972847" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:07:55.506864" elapsed="0.465983"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:07:55.972847" elapsed="0.001000"/>
</kw>
<status status="PASS" start="2025-06-11T15:07:55.454591" elapsed="0.519256"/>
</kw>
<status status="PASS" start="2025-06-11T15:07:16.168437" elapsed="39.805410"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:08:28.096221" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_150814.png</msg>
<msg time="2025-06-11T15:08:28.096221" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:07:58

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.045s
Ajustement: -45.4ms
Corrélation initiale: 0.127
Original length: 803002, Recorded length: 803002
Best lag: -203085 samples (-4.605 seconds)
Final lengths - Original: 803002, Aligned: 803002
Décalage temporel final: -4.605 secondes

=== Résultats ===
Décalage temporel: -4.605 secondes
         snr: -0.7835
 correlation: 0.2349
         mse: 0.0392
        rmse: 0.1981
energy_ratio: 0.5444
    max_diff: 1.0841
   mean_diff: 0.1515
         mos: 2.6621
     clarity: 0.8430
  clarity_db: -0.7418

=== Résultat: ÉCHEC ===
SNR: -0.78 dB (seuil: 5 dB)
Corrélation: 0.235 (seuil: 0.8)
MOS: 2.66/5 (seuil: 2.5)
Clarté: 0.843 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:08:28.096221" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:08:28.096221" level="INFO">${metrics} = {'snr': -0.7835420775730779, 'correlation': 0.2349119528552093, 'mse': 0.03923452875828258, 'rmse': 0.19807707782144449, 'energy_ratio': 0.5443551240796549, 'max_diff': 1.0840983342253079, 'mean_diff'...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:07:55.973847" elapsed="32.122374"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:08:28.097286" level="INFO">SNR: -0.7835420775730779 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:08:28.096221" elapsed="0.001065"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:08:28.097286" level="INFO">Corrélation: 0.2349119528552093 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:08:28.097286" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:08:28.097286" level="INFO">MOS: 2.6621379472394753/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:08:28.097286" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:08:28.098294" level="INFO">Clarté: 0.8429877390967895 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:08:28.097286" elapsed="0.001008"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:08:28.098294" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:08:28.098294" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:08:28.099334" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:08:28.098294" elapsed="0.001040"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:08:28.099886" level="INFO">${mos_ok} = False</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:08:28.099334" elapsed="0.000552"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:08:28.099886" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:08:28.099886" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:08:28.100898" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:08:28.100898" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:08:28.100898" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:08:28.100898" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:08:28.100898" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:08:28.100898" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:08:28.100898" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:08:28.100898" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:08:28.100898" elapsed="0.000767"/>
</branch>
<status status="FAIL" start="2025-06-11T15:08:28.100898" elapsed="0.000791">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:08:28.101689" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:07:55.973847" elapsed="32.127842">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:08:28.101689" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:07:12.999272" elapsed="75.102417">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:08:28.101689" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:07:12.999272" elapsed="75.102417"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:08:28.101689" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:08:28.101689" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:08:28.101689" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:08:28.102248" level="INFO">${attempt} = 17</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:08:28.102248" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:08:28.102248" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 17/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:08:28.102248" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:08:30.102678" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:08:28.102248" elapsed="2.000430"/>
</kw>
<status status="PASS" start="2025-06-11T15:08:28.102248" elapsed="2.000430"/>
</branch>
<status status="PASS" start="2025-06-11T15:08:28.102248" elapsed="2.000430"/>
</if>
<status status="PASS" start="2025-06-11T15:08:28.102216" elapsed="2.000462"/>
</branch>
<status status="PASS" start="2025-06-11T15:08:28.101689" elapsed="2.000989"/>
</if>
<var name="${index}">15</var>
<status status="PASS" start="2025-06-11T15:07:12.998749" elapsed="77.103929"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:08:30.145773" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:08:30.103716" elapsed="0.042057"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:08:30.147095" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:08:30.145773" elapsed="0.001322"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:08:30.147095" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:08:30.147095" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:08:30.103716" elapsed="0.043379"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:08:30.147095" elapsed="0.048962"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:08:33.196315" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:08:30.196057" elapsed="3.000258"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:08:33.277786" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:08:33.196315" elapsed="0.081471"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:08:33.277786" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:08:30.147095" elapsed="3.130691"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:08:33.278787" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:08:33.278787" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:08:33.279450" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:08:33.279450" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:08:33.278787" elapsed="0.000663"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:08:33.279970" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:08:33.279450" elapsed="0.000520"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:08:33.279970" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:08:33.279970" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:08:33.278787" elapsed="0.001183"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:08:33.279970" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:08:33.279970" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:08:33.279970" elapsed="0.054548"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:08:33.279970" elapsed="0.054548"/>
</kw>
<status status="PASS" start="2025-06-11T15:08:33.279970" elapsed="0.054548"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:08:33.389059" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:08:33.334518" elapsed="0.054541"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:08:33.389059" elapsed="0.000999"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:08:33.390058" elapsed="0.462289"/>
</kw>
<msg time="2025-06-11T15:08:33.852347" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:08:33.390058" elapsed="0.462289"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:08:33.852347" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:08:33.279970" elapsed="0.572377"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:08:35.852943" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:08:33.852347" elapsed="2.000596"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:08:54.267580" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:08:35.852943" elapsed="18.414637"/>
</kw>
<msg time="2025-06-11T15:08:54.267580" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:08:35.852943" elapsed="18.414637"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:08:54.267580" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:09:12.579918" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:08:54.267580" elapsed="18.312338"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:09:12.626320" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:09:12.579918" elapsed="0.046402"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:09:12.627342" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:09:12.627342" elapsed="0.468382"/>
</kw>
<msg time="2025-06-11T15:09:13.095724" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:09:12.627342" elapsed="0.468382"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:09:13.095724" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:09:12.579918" elapsed="0.516806"/>
</kw>
<status status="PASS" start="2025-06-11T15:08:33.277786" elapsed="39.818938"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:09:45.444542" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_150931.png</msg>
<msg time="2025-06-11T15:09:45.444542" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:09:15

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.17s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.052s
Ajustement: -51.9ms
Corrélation initiale: 0.501
Original length: 803369, Recorded length: 803369
Best lag: 439 samples (0.010 seconds)
Final lengths - Original: 802930, Aligned: 802930
Décalage temporel final: 0.010 secondes

=== Résultats ===
Décalage temporel: 0.010 secondes
         snr: 2.3835
 correlation: 0.6932
         mse: 0.0189
        rmse: 0.1375
energy_ratio: 0.8733
    max_diff: 1.4598
   mean_diff: 0.0868
         mos: 3.5272
     clarity: 1.0171
  clarity_db: 0.0735

=== Résultat: ÉCHEC ===
SNR: 2.38 dB (seuil: 5 dB)
Corrélation: 0.693 (seuil: 0.8)
MOS: 3.53/5 (seuil: 2.5)
Clarté: 1.017 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:09:45.444542" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:09:45.444542" level="INFO">${metrics} = {'snr': 2.3834718230482466, 'correlation': 0.6932403734702858, 'mse': 0.018915826331117325, 'rmse': 0.13753481861375078, 'energy_ratio': 0.873328690041164, 'max_diff': 1.4598443048951304, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:09:13.096724" elapsed="32.347818"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:09:45.445868" level="INFO">SNR: 2.3834718230482466 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:09:45.444542" elapsed="0.001326"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:09:45.446443" level="INFO">Corrélation: 0.6932403734702858 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:09:45.446443" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:09:45.447087" level="INFO">MOS: 3.527227321086273/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:09:45.446443" elapsed="0.000644"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:09:45.447087" level="INFO">Clarté: 1.0170684579578173 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:09:45.447087" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:09:45.447087" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:09:45.447087" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:09:45.448184" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:09:45.447087" elapsed="0.001097"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:09:45.449184" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:09:45.448184" elapsed="0.001000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:09:45.449804" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:09:45.449184" elapsed="0.000620"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:09:45.449804" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:09:45.449804" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:09:45.449804" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:09:45.449804" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:09:45.449804" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:09:45.449804" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:09:45.449804" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:09:45.449804" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:09:45.449804" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T15:09:45.449804" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:09:45.449804" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:09:13.096724" elapsed="32.353080">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:09:45.449804" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:08:30.102678" elapsed="75.348224">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:09:45.450902" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:08:30.102678" elapsed="75.348224"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:09:45.450902" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:09:45.450902" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:09:45.450902" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:09:45.450902" level="INFO">${attempt} = 18</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:09:45.450902" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:09:45.450902" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 18/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:09:45.450902" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:09:47.451559" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:09:45.450902" elapsed="2.000657"/>
</kw>
<status status="PASS" start="2025-06-11T15:09:45.450902" elapsed="2.000657"/>
</branch>
<status status="PASS" start="2025-06-11T15:09:45.450902" elapsed="2.000657"/>
</if>
<status status="PASS" start="2025-06-11T15:09:45.450902" elapsed="2.000657"/>
</branch>
<status status="PASS" start="2025-06-11T15:09:45.450902" elapsed="2.000657"/>
</if>
<var name="${index}">16</var>
<status status="PASS" start="2025-06-11T15:08:30.102678" elapsed="77.348881"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:09:47.496735" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:09:47.452477" elapsed="0.044258"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:09:47.496735" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:09:47.496735" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:09:47.497253" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:09:47.497253" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:09:47.452477" elapsed="0.044776"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:09:47.497771" elapsed="0.054174"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:09:50.553078" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:09:47.551945" elapsed="3.001133"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:09:50.635068" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:09:50.553078" elapsed="0.081990"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:09:50.635068" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:09:47.497253" elapsed="3.137815"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:09:50.635068" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:09:50.635068" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:09:50.636054" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:09:50.636054" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:09:50.635068" elapsed="0.000986"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:09:50.636054" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:09:50.636054" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:09:50.636054" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:09:50.636054" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:09:50.635068" elapsed="0.000986"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:09:50.637068" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:09:50.636054" elapsed="0.001014"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:09:50.637593" elapsed="0.048151"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:09:50.637068" elapsed="0.048676"/>
</kw>
<status status="PASS" start="2025-06-11T15:09:50.637068" elapsed="0.048676"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:09:50.743171" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:09:50.685744" elapsed="0.057427"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:09:50.743171" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:09:50.743171" elapsed="0.468275"/>
</kw>
<msg time="2025-06-11T15:09:51.211446" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:09:50.743171" elapsed="0.468275"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:09:51.211446" elapsed="0.001002"/>
</kw>
<status status="PASS" start="2025-06-11T15:09:50.637068" elapsed="0.575380"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:09:53.212599" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:09:51.212448" elapsed="2.000151"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:10:11.629072" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:09:53.212599" elapsed="18.416473"/>
</kw>
<msg time="2025-06-11T15:10:11.629072" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:09:53.212599" elapsed="18.416473"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:10:11.630066" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:10:29.942395" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:10:11.630066" elapsed="18.312329"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:10:29.987568" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:10:29.942938" elapsed="0.044630"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:10:29.987568" elapsed="0.000513"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:10:29.988093" elapsed="0.469715"/>
</kw>
<msg time="2025-06-11T15:10:30.458328" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:10:29.988093" elapsed="0.470235"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:10:30.458328" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:10:29.942395" elapsed="0.515933"/>
</kw>
<status status="PASS" start="2025-06-11T15:09:50.635068" elapsed="39.823260"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:11:02.584206" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_151049.png</msg>
<msg time="2025-06-11T15:11:02.584206" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:10:32

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.016s
Ajustement: -16.0ms
Corrélation initiale: 0.219
Original length: 801621, Recorded length: 801621
Best lag: -1316 samples (-0.030 seconds)
Final lengths - Original: 801621, Aligned: 801621
Décalage temporel final: -0.030 secondes

=== Résultats ===
Décalage temporel: -0.030 secondes
         snr: -1.5303
 correlation: 0.2401
         mse: 0.0464
        rmse: 0.2154
energy_ratio: 0.8704
    max_diff: 1.4675
   mean_diff: 0.1239
         mos: 2.8269
     clarity: 1.0063
  clarity_db: 0.0271

=== Résultat: ÉCHEC ===
SNR: -1.53 dB (seuil: 5 dB)
Corrélation: 0.240 (seuil: 0.8)
MOS: 2.83/5 (seuil: 2.5)
Clarté: 1.006 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:11:02.584206" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:11:02.584206" level="INFO">${metrics} = {'snr': -1.5303185658683385, 'correlation': 0.24009571333831847, 'mse': 0.04640707926214064, 'rmse': 0.2154230239833724, 'energy_ratio': 0.8704391341061972, 'max_diff': 1.46745279505852, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:10:30.458328" elapsed="32.125878"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:11:02.584206" level="INFO">SNR: -1.5303185658683385 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:11:02.584206" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:11:02.585222" level="INFO">Corrélation: 0.24009571333831847 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:11:02.584206" elapsed="0.001016"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:11:02.585222" level="INFO">MOS: 2.826902113371249/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:11:02.585222" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:11:02.586204" level="INFO">Clarté: 1.0062532525418013 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:11:02.585222" elapsed="0.000982"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:11:02.586204" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:11:02.586204" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:11:02.587220" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:11:02.586204" elapsed="0.001016"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:11:02.587220" level="INFO">${mos_ok} = False</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:11:02.587220" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:11:02.588205" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:11:02.587220" elapsed="0.000985"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:11:02.588205" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:11:02.588205" elapsed="0.001002"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:11:02.589207" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:11:02.589207" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:11:02.590205" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:11:02.589207" elapsed="0.000998">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:11:02.589207" elapsed="0.000998">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:11:02.590205" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:11:02.590205" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T15:11:02.589207" elapsed="0.000998">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:11:02.590205" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:10:30.458328" elapsed="32.131877">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:11:02.591207" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:09:47.451559" elapsed="75.139648">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:11:02.591207" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:09:47.451559" elapsed="75.139648"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:11:02.591207" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:11:02.591207" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:11:02.591207" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:11:02.591207" level="INFO">${attempt} = 19</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:11:02.591207" elapsed="0.000998"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:11:02.592205" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 19/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:11:02.592205" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:11:04.592471" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:11:02.592205" elapsed="2.000266"/>
</kw>
<status status="PASS" start="2025-06-11T15:11:02.592205" elapsed="2.000266"/>
</branch>
<status status="PASS" start="2025-06-11T15:11:02.592205" elapsed="2.000266"/>
</if>
<status status="PASS" start="2025-06-11T15:11:02.591207" elapsed="2.001264"/>
</branch>
<status status="PASS" start="2025-06-11T15:11:02.591207" elapsed="2.001264"/>
</if>
<var name="${index}">17</var>
<status status="PASS" start="2025-06-11T15:09:47.451559" elapsed="77.140912"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:11:04.652639" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:11:04.594110" elapsed="0.058529"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:11:04.652639" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:11:04.652639" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:11:04.653654" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:11:04.652639" elapsed="0.001015"/>
</kw>
<status status="PASS" start="2025-06-11T15:11:04.594110" elapsed="0.059544"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:11:04.653654" elapsed="0.056310"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:11:07.710190" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:11:04.709964" elapsed="3.000226"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:11:07.796778" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:11:07.710190" elapsed="0.086588"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:11:07.796778" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:11:04.653654" elapsed="3.143124"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:11:07.796778" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:11:07.796778" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:11:07.798458" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:11:07.798458" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:11:07.797852" elapsed="0.000606"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:11:07.798458" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:11:07.798458" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:11:07.798458" elapsed="0.000507"/>
</return>
<msg time="2025-06-11T15:11:07.798980" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:11:07.797821" elapsed="0.001159"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:11:07.798980" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:11:07.798980" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:11:07.801007" elapsed="0.051778"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:11:07.798980" elapsed="0.053805"/>
</kw>
<status status="PASS" start="2025-06-11T15:11:07.798980" elapsed="0.053805"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:11:07.903598" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:11:07.852785" elapsed="0.050813"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:11:07.903598" elapsed="0.000991"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:11:07.904589" elapsed="0.468571"/>
</kw>
<msg time="2025-06-11T15:11:08.373160" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:11:07.904589" elapsed="0.468571"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:11:08.373160" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:11:07.798980" elapsed="0.574180"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:11:10.373317" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:11:08.373160" elapsed="2.000157"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:11:28.783538" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:11:10.373865" elapsed="18.409673"/>
</kw>
<msg time="2025-06-11T15:11:28.783538" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:11:10.373317" elapsed="18.410221"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:11:28.783538" elapsed="0.001003"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:11:47.096900" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:11:28.784541" elapsed="18.312359"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:11:47.143565" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:11:47.097458" elapsed="0.046107"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:11:47.143565" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:11:47.143565" elapsed="0.467378"/>
</kw>
<msg time="2025-06-11T15:11:47.610943" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:11:47.143565" elapsed="0.467378"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:11:47.610943" elapsed="0.000654"/>
</kw>
<status status="PASS" start="2025-06-11T15:11:47.096900" elapsed="0.514697"/>
</kw>
<status status="PASS" start="2025-06-11T15:11:07.796778" elapsed="39.814819"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:12:20.064997" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_151206.png</msg>
<msg time="2025-06-11T15:12:20.064997" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:11:49

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.17s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.080s
Ajustement: -79.7ms
Corrélation initiale: 0.380
Original length: 804695, Recorded length: 804695
Best lag: 1693 samples (0.038 seconds)
Final lengths - Original: 803002, Aligned: 803002
Décalage temporel final: 0.038 secondes

=== Résultats ===
Décalage temporel: 0.038 secondes
         snr: 0.2307
 correlation: 0.4934
         mse: 0.0311
        rmse: 0.1762
energy_ratio: 0.8672
    max_diff: 1.3859
   mean_diff: 0.1223
         mos: 3.2013
     clarity: 1.0075
  clarity_db: 0.0327

=== Résultat: ÉCHEC ===
SNR: 0.23 dB (seuil: 5 dB)
Corrélation: 0.493 (seuil: 0.8)
MOS: 3.20/5 (seuil: 2.5)
Clarté: 1.008 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:12:20.064997" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:12:20.064997" level="INFO">${metrics} = {'snr': 0.23069493809160285, 'correlation': 0.4934029539879589, 'mse': 0.03106309599967657, 'rmse': 0.17624725813378367, 'energy_ratio': 0.8672332528363944, 'max_diff': 1.385895825874234, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:11:47.611597" elapsed="32.453400"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:12:20.066019" level="INFO">SNR: 0.23069493809160285 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:12:20.064997" elapsed="0.001022"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:12:20.066019" level="INFO">Corrélation: 0.4934029539879589 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:12:20.066019" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:12:20.066019" level="INFO">MOS: 3.2013113423092148/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:12:20.066019" elapsed="0.000977"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:12:20.066996" level="INFO">Clarté: 1.0075475976394606 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:12:20.066996" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:12:20.066996" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:12:20.066996" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:12:20.068058" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:12:20.068032" elapsed="0.000026"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:12:20.069049" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:12:20.068058" elapsed="0.000991"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:12:20.069049" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:12:20.069049" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:12:20.070075" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:12:20.069049" elapsed="0.001026"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:12:20.070075" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:12:20.070075" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:12:20.070075" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:12:20.070075" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:12:20.070075" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:12:20.070075" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:12:20.070075" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T15:12:20.070075" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:12:20.070075" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:11:47.611597" elapsed="32.458478">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:12:20.070075" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:11:04.594082" elapsed="75.477004">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:12:20.071086" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:11:04.592998" elapsed="75.478088"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:12:20.071599" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:12:20.071694" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:12:20.071086" elapsed="0.000608"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:12:20.071694" level="INFO">${attempt} = 20</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:12:20.071694" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:12:20.072218" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 20/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:12:20.071694" elapsed="0.000524"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:12:22.072456" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:12:20.072218" elapsed="2.000238"/>
</kw>
<status status="PASS" start="2025-06-11T15:12:20.071694" elapsed="2.000762"/>
</branch>
<status status="PASS" start="2025-06-11T15:12:20.071694" elapsed="2.000762"/>
</if>
<status status="PASS" start="2025-06-11T15:12:20.071694" elapsed="2.000762"/>
</branch>
<status status="PASS" start="2025-06-11T15:12:20.071086" elapsed="2.001370"/>
</if>
<var name="${index}">18</var>
<status status="PASS" start="2025-06-11T15:11:04.592998" elapsed="77.479458"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:12:22.117055" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:12:22.073995" elapsed="0.043060"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:12:22.117055" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:12:22.117055" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:12:22.117055" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:12:22.117055" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:12:22.073484" elapsed="0.043571"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:12:22.118106" elapsed="0.050044"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:12:25.168559" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:12:22.168150" elapsed="3.000409"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:12:25.248684" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:12:25.168559" elapsed="0.080125"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:12:25.248684" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:12:22.117055" elapsed="3.132626"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:12:25.249681" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:12:25.249681" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:12:25.250732" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:12:25.250732" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:12:25.249681" elapsed="0.001051"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:12:25.250732" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:12:25.250732" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:12:25.250732" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:12:25.250732" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:12:25.249681" elapsed="0.001051"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:12:25.250732" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:12:25.250732" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:12:25.251735" elapsed="0.048076"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:12:25.251735" elapsed="0.048076"/>
</kw>
<status status="PASS" start="2025-06-11T15:12:25.250732" elapsed="0.049079"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:12:25.351925" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:12:25.299811" elapsed="0.052114"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:12:25.351925" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:12:25.351925" elapsed="0.480800"/>
</kw>
<msg time="2025-06-11T15:12:25.832725" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:12:25.351925" elapsed="0.480800"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:12:25.833723" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:12:25.250732" elapsed="0.582991"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:12:27.833883" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:12:25.833723" elapsed="2.000160"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:12:46.224841" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:12:27.833883" elapsed="18.390958"/>
</kw>
<msg time="2025-06-11T15:12:46.225843" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:12:27.833883" elapsed="18.391960"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:12:46.225843" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:13:04.538228" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:12:46.225843" elapsed="18.312385"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:13:04.601515" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:13:04.538228" elapsed="0.063287"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:13:04.601515" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:13:04.602530" elapsed="0.478013"/>
</kw>
<msg time="2025-06-11T15:13:05.081436" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:13:04.602530" elapsed="0.478906"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:13:05.081436" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:13:04.538228" elapsed="0.543208"/>
</kw>
<status status="PASS" start="2025-06-11T15:12:25.249681" elapsed="39.831755"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:13:37.096085" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_151323.png</msg>
<msg time="2025-06-11T15:13:37.096085" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:13:07

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.045s
Ajustement: -44.9ms
Corrélation initiale: 0.363
Original length: 802663, Recorded length: 802663
Best lag: 1 samples (0.000 seconds)
Final lengths - Original: 802662, Aligned: 802662
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: -0.7616
 correlation: 0.3630
         mse: 0.0390
        rmse: 0.1975
energy_ratio: 0.8682
    max_diff: 1.2859
   mean_diff: 0.1286
         mos: 3.0052
     clarity: 1.0009
  clarity_db: 0.0038

=== Résultat: ÉCHEC ===
SNR: -0.76 dB (seuil: 5 dB)
Corrélation: 0.363 (seuil: 0.8)
MOS: 3.01/5 (seuil: 2.5)
Clarté: 1.001 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:13:37.096085" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:13:37.096085" level="INFO">${metrics} = {'snr': -0.7616292684287918, 'correlation': 0.3630261335282345, 'mse': 0.03900661453767092, 'rmse': 0.19750092287802332, 'energy_ratio': 0.8682075918666888, 'max_diff': 1.2858845753444124, 'mean_diff'...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:13:05.081436" elapsed="32.014649"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:13:37.097102" level="INFO">SNR: -0.7616292684287918 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:13:37.097102" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:13:37.097102" level="INFO">Corrélation: 0.3630261335282345 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:13:37.097102" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:13:37.098143" level="INFO">MOS: 3.0051661894967294/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:13:37.097102" elapsed="0.001041"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:13:37.098143" level="INFO">Clarté: 1.0008836791350828 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:13:37.098143" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:13:37.099151" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:13:37.098143" elapsed="0.001008"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:13:37.099151" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:13:37.099151" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:13:37.100725" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:13:37.099151" elapsed="0.001574"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:13:37.100725" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:13:37.100725" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:13:37.101723" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:13:37.100725" elapsed="0.000998"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:13:37.101723" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:13:37.101723" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:13:37.101723" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:13:37.101723" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:13:37.101723" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:13:37.101723" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:13:37.101723" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T15:13:37.101723" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:13:37.101723" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:13:05.081436" elapsed="32.020287">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:13:37.101723" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:12:22.073484" elapsed="75.028239">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:13:37.102787" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:12:22.072969" elapsed="75.029818"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:13:37.102787" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:13:37.102787" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:13:37.102787" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:13:37.102787" level="INFO">${attempt} = 21</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:13:37.102787" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:13:37.102787" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 21/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:13:37.102787" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:13:39.103165" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:13:37.102787" elapsed="2.000378"/>
</kw>
<status status="PASS" start="2025-06-11T15:13:37.102787" elapsed="2.000378"/>
</branch>
<status status="PASS" start="2025-06-11T15:13:37.102787" elapsed="2.000378"/>
</if>
<status status="PASS" start="2025-06-11T15:13:37.102787" elapsed="2.000378"/>
</branch>
<status status="PASS" start="2025-06-11T15:13:37.102787" elapsed="2.000378"/>
</if>
<var name="${index}">19</var>
<status status="PASS" start="2025-06-11T15:12:22.072969" elapsed="77.030196"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:13:39.154311" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:13:39.104169" elapsed="0.050181"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:13:39.154350" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:13:39.154350" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:13:39.154350" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:13:39.154350" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:13:39.104169" elapsed="0.050181"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:13:39.154350" elapsed="0.062592"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:13:42.217784" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:13:39.216942" elapsed="3.000842"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:13:42.293077" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:13:42.217784" elapsed="0.075293"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:13:42.293077" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:13:39.154350" elapsed="3.138727"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:13:42.293077" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:13:42.293077" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:13:42.294069" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:13:42.294069" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:13:42.294069" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:13:42.294069" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:13:42.294069" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:13:42.294069" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:13:42.295102" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:13:42.293077" elapsed="0.002025"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:13:42.295102" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:13:42.295102" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:13:42.295102" elapsed="0.046423"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:13:42.295102" elapsed="0.046423"/>
</kw>
<status status="PASS" start="2025-06-11T15:13:42.295102" elapsed="0.046423"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:13:42.390133" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:13:42.341525" elapsed="0.048608"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:13:42.390133" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:13:42.391134" elapsed="0.462746"/>
</kw>
<msg time="2025-06-11T15:13:42.853880" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:13:42.390133" elapsed="0.463747"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:13:42.854411" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:13:42.295102" elapsed="0.559309"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:13:44.854629" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:13:42.854411" elapsed="2.000218"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:14:03.253314" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:13:44.855163" elapsed="18.398151"/>
</kw>
<msg time="2025-06-11T15:14:03.253314" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:13:44.854629" elapsed="18.398685"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:14:03.253314" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:14:21.566099" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:14:03.253314" elapsed="18.312785"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:14:21.614148" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:14:21.566099" elapsed="0.048049"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:14:21.615179" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:14:21.615179" elapsed="0.467097"/>
</kw>
<msg time="2025-06-11T15:14:22.082276" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:14:21.615179" elapsed="0.467097"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:14:22.083226" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:14:21.566099" elapsed="0.517127"/>
</kw>
<status status="PASS" start="2025-06-11T15:13:42.293077" elapsed="39.790149"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:14:54.532588" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_151440.png</msg>
<msg time="2025-06-11T15:14:54.532588" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:14:24

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.055s
Ajustement: -54.6ms
Corrélation initiale: 0.538
Original length: 803327, Recorded length: 803327
Best lag: 430 samples (0.010 seconds)
Final lengths - Original: 802897, Aligned: 802897
Décalage temporel final: 0.010 secondes

=== Résultats ===
Décalage temporel: 0.010 secondes
         snr: 3.8665
 correlation: 0.7821
         mse: 0.0134
        rmse: 0.1159
energy_ratio: 0.8672
    max_diff: 0.8846
   mean_diff: 0.0788
         mos: 3.6932
     clarity: 1.0052
  clarity_db: 0.0227

=== Résultat: ÉCHEC ===
SNR: 3.87 dB (seuil: 5 dB)
Corrélation: 0.782 (seuil: 0.8)
MOS: 3.69/5 (seuil: 2.5)
Clarté: 1.005 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:14:54.532588" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:14:54.532588" level="INFO">${metrics} = {'snr': 3.8665254028119787, 'correlation': 0.782118296297382, 'mse': 0.013442138077135634, 'rmse': 0.11594023493652078, 'energy_ratio': 0.867234137048195, 'max_diff': 0.8846474945217124, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:14:22.083226" elapsed="32.449362"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:14:54.532588" level="INFO">SNR: 3.8665254028119787 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:14:54.532588" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:14:54.533590" level="INFO">Corrélation: 0.782118296297382 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:14:54.532588" elapsed="0.001002"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:14:54.534216" level="INFO">MOS: 3.6932029716693373/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:14:54.533590" elapsed="0.000626"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:14:54.534216" level="INFO">Clarté: 1.0052476005640927 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:14:54.534216" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:14:54.534216" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:14:54.534216" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:14:54.535301" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:14:54.534216" elapsed="0.001085"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:14:54.536244" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:14:54.535301" elapsed="0.000943"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:14:54.536879" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:14:54.536244" elapsed="0.000635"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:14:54.536879" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:14:54.536879" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:14:54.536879" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:14:54.536879" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:14:54.536879" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:14:54.536879" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:14:54.536879" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:14:54.536879" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:14:54.536879" elapsed="0.001087"/>
</branch>
<status status="FAIL" start="2025-06-11T15:14:54.536879" elapsed="0.001087">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:14:54.537966" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:14:22.083226" elapsed="32.454740">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:14:54.537966" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:13:39.103165" elapsed="75.434801">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:14:54.537966" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:13:39.103165" elapsed="75.434801"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:14:54.537966" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:14:54.537966" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:14:54.537966" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:14:54.537966" level="INFO">${attempt} = 22</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:14:54.537966" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:14:54.539194" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 22/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:14:54.539194" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:14:56.539420" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:14:54.539194" elapsed="2.000226"/>
</kw>
<status status="PASS" start="2025-06-11T15:14:54.537966" elapsed="2.001454"/>
</branch>
<status status="PASS" start="2025-06-11T15:14:54.537966" elapsed="2.001454"/>
</if>
<status status="PASS" start="2025-06-11T15:14:54.537966" elapsed="2.001454"/>
</branch>
<status status="PASS" start="2025-06-11T15:14:54.537966" elapsed="2.001454"/>
</if>
<var name="${index}">20</var>
<status status="PASS" start="2025-06-11T15:13:39.103165" elapsed="77.436255"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:14:56.576963" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:14:56.539420" elapsed="0.037543"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:14:56.577593" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:14:56.576963" elapsed="0.000630"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:14:56.577593" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:14:56.577593" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:14:56.539420" elapsed="0.038173"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:14:56.578166" elapsed="0.046773"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:14:59.625245" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:14:56.624939" elapsed="3.000306"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:14:59.703770" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:14:59.625245" elapsed="0.078534"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:14:59.703779" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:14:56.577593" elapsed="3.126186"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:14:59.703779" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:14:59.703779" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:14:59.704814" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:14:59.704814" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:14:59.703779" elapsed="0.001035"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:14:59.704814" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:14:59.704814" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:14:59.704814" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:14:59.704814" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:14:59.703779" elapsed="0.001035"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:14:59.705779" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:14:59.704814" elapsed="0.000965"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:14:59.705779" elapsed="0.051132"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:14:59.705779" elapsed="0.051132"/>
</kw>
<status status="PASS" start="2025-06-11T15:14:59.705779" elapsed="0.051132"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:14:59.804243" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:14:59.757911" elapsed="0.046332"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:14:59.804243" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:14:59.804243" elapsed="0.466410"/>
</kw>
<msg time="2025-06-11T15:15:00.270653" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:14:59.804243" elapsed="0.466410"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:15:00.270653" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:14:59.705779" elapsed="0.564874"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:15:02.271300" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:15:00.270653" elapsed="2.000647"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:15:20.689468" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:15:02.271300" elapsed="18.418168"/>
</kw>
<msg time="2025-06-11T15:15:20.689468" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:15:02.271300" elapsed="18.418168"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:15:20.689468" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:15:39.001839" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:15:20.689468" elapsed="18.312371"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:15:39.060036" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:15:39.001839" elapsed="0.058197"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:15:39.060036" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:15:39.060036" elapsed="0.469709"/>
</kw>
<msg time="2025-06-11T15:15:39.530774" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:15:39.060036" elapsed="0.470738"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:15:39.530774" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:15:39.001839" elapsed="0.528935"/>
</kw>
<status status="PASS" start="2025-06-11T15:14:59.703779" elapsed="39.826995"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:16:11.476702" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_151558.png</msg>
<msg time="2025-06-11T15:16:11.476702" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:15:41

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.022s
Ajustement: -22.5ms
Corrélation initiale: 0.294
Original length: 801645, Recorded length: 801645
Best lag: -866 samples (-0.020 seconds)
Final lengths - Original: 801645, Aligned: 801645
Décalage temporel final: -0.020 secondes

=== Résultats ===
Décalage temporel: -0.020 secondes
         snr: -0.2311
 correlation: 0.4359
         mse: 0.0344
        rmse: 0.1855
energy_ratio: 0.8660
    max_diff: 1.4036
   mean_diff: 0.1336
         mos: 3.1139
     clarity: 1.0230
  clarity_db: 0.0986

=== Résultat: ÉCHEC ===
SNR: -0.23 dB (seuil: 5 dB)
Corrélation: 0.436 (seuil: 0.8)
MOS: 3.11/5 (seuil: 2.5)
Clarté: 1.023 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:16:11.476702" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:16:11.476702" level="INFO">${metrics} = {'snr': -0.23114926360827187, 'correlation': 0.4359206157990362, 'mse': 0.03441209355691225, 'rmse': 0.18550496908954286, 'energy_ratio': 0.8659882303815719, 'max_diff': 1.403584251766935, 'mean_diff'...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:15:39.530774" elapsed="31.947034"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:16:11.477808" level="INFO">SNR: -0.23114926360827187 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:16:11.477808" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:16:11.477808" level="INFO">Corrélation: 0.4359206157990362 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:16:11.477808" elapsed="0.000996"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:16:11.478854" level="INFO">MOS: 3.1138587684145125/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:16:11.478854" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:16:11.478854" level="INFO">Clarté: 1.0229579196300371 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:16:11.478854" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:16:11.479852" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:16:11.478854" elapsed="0.000998"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:16:11.479852" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:16:11.479852" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:16:11.480914" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:16:11.479852" elapsed="0.001062"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:16:11.481916" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:16:11.480914" elapsed="0.001002"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:16:11.481916" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:16:11.481916" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:16:11.481916" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:16:11.481916" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:16:11.482532" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:16:11.482532" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:16:11.481916" elapsed="0.000616">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:16:11.482532" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:16:11.482532" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T15:16:11.481916" elapsed="0.000616">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:16:11.482532" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:15:39.530774" elapsed="31.951758">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:16:11.482532" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:14:56.539420" elapsed="74.943112">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:16:11.482532" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:14:56.539420" elapsed="74.943112"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:16:11.482532" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:16:11.482532" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:16:11.482532" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:16:11.482532" level="INFO">${attempt} = 23</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:16:11.482532" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:16:11.483625" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 23/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:16:11.483625" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:16:13.484233" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:16:11.483625" elapsed="2.000608"/>
</kw>
<status status="PASS" start="2025-06-11T15:16:11.482532" elapsed="2.001701"/>
</branch>
<status status="PASS" start="2025-06-11T15:16:11.482532" elapsed="2.001701"/>
</if>
<status status="PASS" start="2025-06-11T15:16:11.482532" elapsed="2.001701"/>
</branch>
<status status="PASS" start="2025-06-11T15:16:11.482532" elapsed="2.001701"/>
</if>
<var name="${index}">21</var>
<status status="PASS" start="2025-06-11T15:14:56.539420" elapsed="76.944813"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:16:13.523271" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:16:13.484781" elapsed="0.038490"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:16:13.523271" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:16:13.523271" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:16:13.523829" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:16:13.523829" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:16:13.484781" elapsed="0.039048"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:16:13.523829" elapsed="0.049903"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:16:16.574112" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:16:13.573732" elapsed="3.000380"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:16:16.649294" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:16:16.574112" elapsed="0.075182"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:16:16.649294" elapsed="0.000568"/>
</kw>
<status status="PASS" start="2025-06-11T15:16:13.523829" elapsed="3.126033"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:16:16.649862" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:16:16.649862" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:16:16.650865" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:16:16.650865" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:16:16.649862" elapsed="0.001003"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:16:16.650865" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:16:16.650865" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:16:16.650865" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:16:16.650865" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:16:16.649862" elapsed="0.001003"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:16:16.650865" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:16:16.650865" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:16:16.651881" elapsed="0.048917"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:16:16.651881" elapsed="0.048917"/>
</kw>
<status status="PASS" start="2025-06-11T15:16:16.651881" elapsed="0.048917"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:16:16.747484" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:16:16.700798" elapsed="0.046686"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:16:16.747484" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:16:16.747484" elapsed="0.466869"/>
</kw>
<msg time="2025-06-11T15:16:17.215354" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:16:16.747484" elapsed="0.467870"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:16:17.215354" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:16:16.651881" elapsed="0.563473"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:16:19.215785" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:16:17.215354" elapsed="2.000431"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:16:37.626249" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:16:19.215785" elapsed="18.410464"/>
</kw>
<msg time="2025-06-11T15:16:37.626249" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:16:19.215785" elapsed="18.410464"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:16:37.626249" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:16:55.938362" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:16:37.626249" elapsed="18.312113"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:16:55.990921" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:16:55.938362" elapsed="0.053477"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:16:55.991839" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:16:55.991839" elapsed="0.464371"/>
</kw>
<msg time="2025-06-11T15:16:56.456210" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:16:55.991839" elapsed="0.464371"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:16:56.457223" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:16:55.938362" elapsed="0.518861"/>
</kw>
<status status="PASS" start="2025-06-11T15:16:16.649862" elapsed="39.807361"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:17:28.832517" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_151715.png</msg>
<msg time="2025-06-11T15:17:28.832517" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:16:58

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.052s
Ajustement: -52.1ms
Corrélation initiale: 0.584
Original length: 803311, Recorded length: 803311
Best lag: 430 samples (0.010 seconds)
Final lengths - Original: 802881, Aligned: 802881
Décalage temporel final: 0.010 secondes

=== Résultats ===
Décalage temporel: 0.010 secondes
         snr: 2.5898
 correlation: 0.7066
         mse: 0.0180
        rmse: 0.1343
energy_ratio: 0.8657
    max_diff: 1.3915
   mean_diff: 0.0825
         mos: 3.5515
     clarity: 1.0096
  clarity_db: 0.0413

=== Résultat: ÉCHEC ===
SNR: 2.59 dB (seuil: 5 dB)
Corrélation: 0.707 (seuil: 0.8)
MOS: 3.55/5 (seuil: 2.5)
Clarté: 1.010 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:17:28.832517" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:17:28.832517" level="INFO">${metrics} = {'snr': 2.589755788831643, 'correlation': 0.7065914436735934, 'mse': 0.018036365326857512, 'rmse': 0.13429953584006726, 'energy_ratio': 0.865726999014575, 'max_diff': 1.3915002031009294, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:16:56.457223" elapsed="32.375294"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:17:28.833569" level="INFO">SNR: 2.589755788831643 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:17:28.832517" elapsed="0.001052"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:17:28.833569" level="INFO">Corrélation: 0.7065914436735934 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:17:28.833569" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:17:28.833569" level="INFO">MOS: 3.551499963961578/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:17:28.833569" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:17:28.834579" level="INFO">Clarté: 1.009561433740123 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:17:28.833569" elapsed="0.001010"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:17:28.834579" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:17:28.834579" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:17:28.835554" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:17:28.834579" elapsed="0.000975"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:17:28.835554" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:17:28.835554" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:17:28.836571" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:17:28.835554" elapsed="0.001017"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:17:28.836571" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:17:28.836571" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:17:28.836571" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:17:28.836571" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:17:28.837591" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:17:28.836571" elapsed="0.001020">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:17:28.836571" elapsed="0.001020">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:17:28.837591" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:17:28.837591" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T15:17:28.836571" elapsed="0.001020">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:17:28.837591" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:16:56.457223" elapsed="32.380368">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:17:28.837591" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:16:13.484781" elapsed="75.352810">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:17:28.838112" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:16:13.484233" elapsed="75.353879"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:17:28.838112" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:17:28.838112" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:17:28.838112" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:17:28.838112" level="INFO">${attempt} = 24</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:17:28.838112" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:17:28.838642" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 24/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:17:28.838642" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:17:30.839113" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:17:28.838642" elapsed="2.000471"/>
</kw>
<status status="PASS" start="2025-06-11T15:17:28.838623" elapsed="2.000490"/>
</branch>
<status status="PASS" start="2025-06-11T15:17:28.838112" elapsed="2.001001"/>
</if>
<status status="PASS" start="2025-06-11T15:17:28.838112" elapsed="2.001001"/>
</branch>
<status status="PASS" start="2025-06-11T15:17:28.838112" elapsed="2.001001"/>
</if>
<var name="${index}">22</var>
<status status="PASS" start="2025-06-11T15:16:13.484233" elapsed="77.354880"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:17:30.878976" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:17:30.839639" elapsed="0.039337"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:17:30.878976" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:17:30.878976" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:17:30.878976" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:17:30.878976" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:17:30.839639" elapsed="0.040334"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:17:30.879973" elapsed="0.048185"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:17:33.928862" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:17:30.928158" elapsed="3.000704"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:17:34.010278" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:17:33.928862" elapsed="0.082056"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:17:34.010918" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:17:30.879973" elapsed="3.130945"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:17:34.011546" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:17:34.011546" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:17:34.011546" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:17:34.011546" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:17:34.011546" elapsed="0.000926"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:17:34.012472" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:17:34.012472" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:17:34.012472" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:17:34.012472" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:17:34.011546" elapsed="0.000926"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:17:34.012472" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:17:34.012472" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:17:34.013471" elapsed="0.045872"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:17:34.012472" elapsed="0.046871"/>
</kw>
<status status="PASS" start="2025-06-11T15:17:34.012472" elapsed="0.047895"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:17:34.106508" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:17:34.060367" elapsed="0.046141"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:17:34.106508" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:17:34.106508" elapsed="0.473297"/>
</kw>
<msg time="2025-06-11T15:17:34.580800" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:17:34.106508" elapsed="0.474292"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:17:34.580800" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:17:34.012472" elapsed="0.568328"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:17:36.581342" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:17:34.580800" elapsed="2.000542"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:17:54.992778" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:17:36.581342" elapsed="18.412437"/>
</kw>
<msg time="2025-06-11T15:17:54.993779" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:17:36.581342" elapsed="18.412437"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:17:54.993779" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:18:13.306482" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:17:54.993779" elapsed="18.312703"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:18:13.361366" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:18:13.306482" elapsed="0.054884"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:18:13.361366" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:18:13.361366" elapsed="0.460325"/>
</kw>
<msg time="2025-06-11T15:18:13.821691" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:18:13.361366" elapsed="0.460325"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:18:13.821691" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:18:13.306482" elapsed="0.515209"/>
</kw>
<status status="PASS" start="2025-06-11T15:17:34.010918" elapsed="39.810773"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:18:45.690715" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_151832.png</msg>
<msg time="2025-06-11T15:18:45.690715" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:18:15

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.15s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.043s
Ajustement: -42.7ms
Corrélation initiale: 0.428
Original length: 802492, Recorded length: 802492
Best lag: 0 samples (0.000 seconds)
Final lengths - Original: 802492, Aligned: 802492
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: -0.2907
 correlation: 0.4280
         mse: 0.0350
        rmse: 0.1870
energy_ratio: 0.8658
    max_diff: 1.4742
   mean_diff: 0.1200
         mos: 3.1020
     clarity: 1.0222
  clarity_db: 0.0955

=== Résultat: ÉCHEC ===
SNR: -0.29 dB (seuil: 5 dB)
Corrélation: 0.428 (seuil: 0.8)
MOS: 3.10/5 (seuil: 2.5)
Clarté: 1.022 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:18:45.691619" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:18:45.691619" level="INFO">${metrics} = {'snr': -0.2906992136025297, 'correlation': 0.428042824083099, 'mse': 0.0349692626402239, 'rmse': 0.1870007022452694, 'energy_ratio': 0.8658015990864913, 'max_diff': 1.4742351172167556, 'mean_diff': 0...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:18:13.821691" elapsed="31.869928"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:18:45.692268" level="INFO">SNR: -0.2906992136025297 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:18:45.691619" elapsed="0.000649"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:18:45.692268" level="INFO">Corrélation: 0.428042824083099 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:18:45.692268" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:18:45.692268" level="INFO">MOS: 3.102023420355618/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:18:45.692268" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:18:45.693208" level="INFO">Clarté: 1.0222373163940854 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:18:45.692268" elapsed="0.000940"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:18:45.693208" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:18:45.693208" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:18:45.694222" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:18:45.693208" elapsed="0.001014"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:18:45.694754" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:18:45.694754" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:18:45.695753" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:18:45.694754" elapsed="0.000999"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:18:45.695753" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:18:45.695753" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:18:45.695753" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:18:45.695753" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:18:45.695753" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:18:45.695753" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:18:45.695753" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:18:45.696754" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:18:45.695753" elapsed="0.001001"/>
</branch>
<status status="FAIL" start="2025-06-11T15:18:45.695753" elapsed="0.001001">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:18:45.696754" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:18:13.821691" elapsed="31.875063">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:18:45.696754" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:17:30.839639" elapsed="74.857115">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:18:45.696754" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:17:30.839639" elapsed="74.857115"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:18:45.696754" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:18:45.696754" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:18:45.696754" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:18:45.696754" level="INFO">${attempt} = 25</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:18:45.696754" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:18:45.697788" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 25/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:18:45.697788" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:18:47.698228" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:18:45.697788" elapsed="2.000440"/>
</kw>
<status status="PASS" start="2025-06-11T15:18:45.696754" elapsed="2.001474"/>
</branch>
<status status="PASS" start="2025-06-11T15:18:45.696754" elapsed="2.001474"/>
</if>
<status status="PASS" start="2025-06-11T15:18:45.696754" elapsed="2.001474"/>
</branch>
<status status="PASS" start="2025-06-11T15:18:45.696754" elapsed="2.001474"/>
</if>
<var name="${index}">23</var>
<status status="PASS" start="2025-06-11T15:17:30.839639" elapsed="76.858589"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:18:47.740899" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:18:47.698228" elapsed="0.042671"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:18:47.740899" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:18:47.740899" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:18:47.741502" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:18:47.741407" elapsed="0.000095"/>
</kw>
<status status="PASS" start="2025-06-11T15:18:47.698228" elapsed="0.043274"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:18:47.741502" elapsed="0.047596"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:18:50.789285" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:18:47.789098" elapsed="3.000187"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:18:50.867418" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:18:50.789285" elapsed="0.078133"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:18:50.867418" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:18:47.741502" elapsed="3.125916"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:18:50.867418" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:18:50.867418" elapsed="0.001010"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:18:50.868428" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:18:50.868428" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:18:50.868428" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:18:50.869479" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:18:50.868428" elapsed="0.001051"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:18:50.869479" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:18:50.869479" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:18:50.868428" elapsed="0.001051"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:18:50.869479" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:18:50.869479" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:18:50.869479" elapsed="0.054459"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:18:50.869479" elapsed="0.054459"/>
</kw>
<status status="PASS" start="2025-06-11T15:18:50.869479" elapsed="0.054459"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:18:50.971737" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:18:50.924939" elapsed="0.046798"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:18:50.971737" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:18:50.971737" elapsed="0.462448"/>
</kw>
<msg time="2025-06-11T15:18:51.434185" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:18:50.971737" elapsed="0.462448"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:18:51.434185" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:18:50.869479" elapsed="0.564706"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:18:53.435180" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:18:51.435017" elapsed="2.000163"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:19:11.826810" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:18:53.435180" elapsed="18.391630"/>
</kw>
<msg time="2025-06-11T15:19:11.826810" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:18:53.435180" elapsed="18.391630"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:19:11.827809" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:19:30.140251" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:19:11.827809" elapsed="18.312442"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:19:30.188867" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:19:30.140251" elapsed="0.048616"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:19:30.189866" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:19:30.189866" elapsed="0.471366"/>
</kw>
<msg time="2025-06-11T15:19:30.661232" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:19:30.189866" elapsed="0.471366"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:19:30.661232" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:19:30.140251" elapsed="0.520981"/>
</kw>
<status status="PASS" start="2025-06-11T15:18:50.867418" elapsed="39.794323"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:20:02.858328" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_151949.png</msg>
<msg time="2025-06-11T15:20:02.858328" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:19:32

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.050s
Ajustement: -50.0ms
Corrélation initiale: 0.381
Original length: 802997, Recorded length: 802997
Best lag: 427 samples (0.010 seconds)
Final lengths - Original: 802570, Aligned: 802570
Décalage temporel final: 0.010 secondes

=== Résultats ===
Décalage temporel: 0.010 secondes
         snr: 1.1141
 correlation: 0.5866
         mse: 0.0253
        rmse: 0.1591
energy_ratio: 0.8645
    max_diff: 1.5137
   mean_diff: 0.1044
         mos: 3.3484
     clarity: 1.0446
  clarity_db: 0.1893

=== Résultat: ÉCHEC ===
SNR: 1.11 dB (seuil: 5 dB)
Corrélation: 0.587 (seuil: 0.8)
MOS: 3.35/5 (seuil: 2.5)
Clarté: 1.045 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:20:02.858328" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:20:02.858328" level="INFO">${metrics} = {'snr': 1.114061414395211, 'correlation': 0.5865607344930012, 'mse': 0.025319294363488187, 'rmse': 0.15912037695872955, 'energy_ratio': 0.8644688707782845, 'max_diff': 1.513716361865641, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:19:30.661830" elapsed="32.196498"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:20:02.859595" level="INFO">SNR: 1.114061414395211 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:20:02.859595" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:20:02.859595" level="INFO">Corrélation: 0.5865607344930012 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:20:02.859595" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:20:02.860686" level="INFO">MOS: 3.34843533796741/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:20:02.859595" elapsed="0.001091"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:20:02.860686" level="INFO">Clarté: 1.0445577304958613 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:20:02.860686" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:20:02.861693" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:20:02.860686" elapsed="0.001007"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:20:02.862385" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:20:02.861693" elapsed="0.000692"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:20:02.862385" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:20:02.862385" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:20:02.863358" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:20:02.862385" elapsed="0.000973"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:20:02.863358" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:20:02.863358" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:20:02.863358" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:20:02.863358" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:20:02.863358" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:20:02.863358" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:20:02.863358" elapsed="0.001061">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:20:02.864419" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:20:02.864419" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T15:20:02.863358" elapsed="0.001061">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:20:02.864419" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:19:30.661830" elapsed="32.202589">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:20:02.864419" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:18:47.698228" elapsed="75.166191">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:20:02.864419" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:18:47.698228" elapsed="75.166191"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:20:02.864419" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:20:02.864419" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:20:02.864419" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:20:02.864419" level="INFO">${attempt} = 26</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:20:02.864419" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:20:02.865352" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 26/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:20:02.865352" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:20:04.866432" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:20:02.865352" elapsed="2.001080"/>
</kw>
<status status="PASS" start="2025-06-11T15:20:02.865352" elapsed="2.001080"/>
</branch>
<status status="PASS" start="2025-06-11T15:20:02.865352" elapsed="2.001080"/>
</if>
<status status="PASS" start="2025-06-11T15:20:02.864419" elapsed="2.002013"/>
</branch>
<status status="PASS" start="2025-06-11T15:20:02.864419" elapsed="2.002013"/>
</if>
<var name="${index}">24</var>
<status status="PASS" start="2025-06-11T15:18:47.698228" elapsed="77.168204"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:20:04.904796" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:20:04.867432" elapsed="0.037364"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:20:04.904796" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:20:04.904796" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:20:04.905795" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:20:04.905795" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:20:04.867432" elapsed="0.038363"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:20:04.905795" elapsed="0.053281"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:20:07.959141" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:20:04.959076" elapsed="3.000065"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:20:08.035639" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:20:07.959141" elapsed="0.076498"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:20:08.035639" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:20:04.905795" elapsed="3.129844"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:20:08.036650" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:20:08.036650" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:20:08.036650" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:20:08.036650" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:20:08.036650" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:20:08.037645" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:20:08.037645" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:20:08.037645" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:20:08.037645" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:20:08.036650" elapsed="0.000995"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:20:08.037645" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:20:08.037645" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:20:08.037645" elapsed="0.052923"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:20:08.037645" elapsed="0.052923"/>
</kw>
<status status="PASS" start="2025-06-11T15:20:08.037645" elapsed="0.052923"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:20:08.140192" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:20:08.091581" elapsed="0.048611"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:20:08.141373" elapsed="0.000077"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:20:08.141450" elapsed="0.459760"/>
</kw>
<msg time="2025-06-11T15:20:08.601210" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:20:08.141450" elapsed="0.459760"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:20:08.601210" elapsed="0.001004"/>
</kw>
<status status="PASS" start="2025-06-11T15:20:08.037645" elapsed="0.564569"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:20:10.602615" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:20:08.602214" elapsed="2.000401"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:20:29.008676" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:20:10.602615" elapsed="18.406061"/>
</kw>
<msg time="2025-06-11T15:20:29.008676" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:20:10.602615" elapsed="18.406061"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:20:29.008676" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:20:47.322241" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:20:29.008676" elapsed="18.313565"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:20:47.377485" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:20:47.322769" elapsed="0.054716"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:20:47.377485" elapsed="0.000573"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:20:47.378069" elapsed="0.458301"/>
</kw>
<msg time="2025-06-11T15:20:47.836370" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:20:47.378069" elapsed="0.458301"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:20:47.836370" elapsed="0.001345"/>
</kw>
<status status="PASS" start="2025-06-11T15:20:47.322241" elapsed="0.515474"/>
</kw>
<status status="PASS" start="2025-06-11T15:20:08.035639" elapsed="39.802076"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:21:20.285637" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_152106.png</msg>
<msg time="2025-06-11T15:21:20.285637" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:20:49

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.17s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.030s
Ajustement: -29.8ms
Corrélation initiale: 0.457
Original length: 802600, Recorded length: 802600
Best lag: -430 samples (-0.010 seconds)
Final lengths - Original: 802600, Aligned: 802600
Décalage temporel final: -0.010 secondes

=== Résultats ===
Décalage temporel: -0.010 secondes
         snr: 2.5070
 correlation: 0.7012
         mse: 0.0184
        rmse: 0.1356
energy_ratio: 0.8682
    max_diff: 1.0462
   mean_diff: 0.0881
         mos: 3.5418
     clarity: 1.0348
  clarity_db: 0.1484

=== Résultat: ÉCHEC ===
SNR: 2.51 dB (seuil: 5 dB)
Corrélation: 0.701 (seuil: 0.8)
MOS: 3.54/5 (seuil: 2.5)
Clarté: 1.035 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:21:20.285637" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:21:20.285637" level="INFO">${metrics} = {'snr': 2.506963150731458, 'correlation': 0.7012279433668513, 'mse': 0.018376499017852918, 'rmse': 0.13555994621514467, 'energy_ratio': 0.8682416504285001, 'max_diff': 1.0461785068276375, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:20:47.838239" elapsed="32.447398"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:21:20.286272" level="INFO">SNR: 2.506963150731458 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:21:20.286272" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:21:20.286848" level="INFO">Corrélation: 0.7012279433668513 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:21:20.286848" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:21:20.286848" level="INFO">MOS: 3.5417520580694797/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:21:20.286848" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:21:20.287849" level="INFO">Clarté: 1.034752962813326 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:21:20.286848" elapsed="0.001001"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:21:20.287849" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:21:20.287849" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:21:20.288834" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:21:20.287849" elapsed="0.000985"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:21:20.289832" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:21:20.288834" elapsed="0.000998"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:21:20.289832" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:21:20.289832" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:21:20.290834" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:21:20.290834" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:21:20.290834" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:21:20.290834" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:21:20.290834" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:21:20.290834" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:21:20.290834" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:21:20.290834" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:21:20.290834" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T15:21:20.290834" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:21:20.290834" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:20:47.837715" elapsed="32.453119">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:21:20.290834" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:20:04.866432" elapsed="75.425441">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:21:20.291980" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:20:04.866432" elapsed="75.425548"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:21:20.291980" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:21:20.291980" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:21:20.291980" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:21:20.292901" level="INFO">${attempt} = 27</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:21:20.291980" elapsed="0.000921"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:21:20.292901" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 27/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:21:20.292901" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:21:22.294898" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:21:20.292901" elapsed="2.001997"/>
</kw>
<status status="PASS" start="2025-06-11T15:21:20.292901" elapsed="2.001997"/>
</branch>
<status status="PASS" start="2025-06-11T15:21:20.292901" elapsed="2.001997"/>
</if>
<status status="PASS" start="2025-06-11T15:21:20.291980" elapsed="2.002918"/>
</branch>
<status status="PASS" start="2025-06-11T15:21:20.291980" elapsed="2.002918"/>
</if>
<var name="${index}">25</var>
<status status="PASS" start="2025-06-11T15:20:04.866432" elapsed="77.428466"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:21:22.333290" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:21:22.295852" elapsed="0.037438"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:21:22.333290" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:21:22.333290" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:21:22.333290" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:21:22.333290" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:21:22.294898" elapsed="0.038392"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:21:22.334284" elapsed="0.054030"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:21:25.389470" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:21:22.389318" elapsed="3.000152"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:21:25.468452" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:21:25.389470" elapsed="0.078982"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:21:25.468452" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:21:22.334284" elapsed="3.134168"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:21:25.469468" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:21:25.469468" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:21:25.470026" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:21:25.470026" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:21:25.469468" elapsed="0.000558"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:21:25.470026" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:21:25.470026" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:21:25.470026" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:21:25.470026" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:21:25.469468" elapsed="0.000558"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:21:25.471041" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:21:25.470026" elapsed="0.001015"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:21:25.471041" elapsed="0.055352"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:21:25.471041" elapsed="0.055352"/>
</kw>
<status status="PASS" start="2025-06-11T15:21:25.471041" elapsed="0.055352"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:21:25.571210" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:21:25.527190" elapsed="0.044020"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:21:25.571210" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:21:25.571210" elapsed="0.465527"/>
</kw>
<msg time="2025-06-11T15:21:26.036737" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:21:25.571210" elapsed="0.465527"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:21:26.036737" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:21:25.471041" elapsed="0.565696"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:21:28.038713" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:21:26.037739" elapsed="2.000974"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:21:46.435524" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:21:28.038713" elapsed="18.396811"/>
</kw>
<msg time="2025-06-11T15:21:46.435524" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:21:28.038713" elapsed="18.396811"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:21:46.435524" elapsed="0.001011"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:22:04.748827" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:21:46.436535" elapsed="18.312292"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:22:04.796827" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:22:04.748827" elapsed="0.048000"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:22:04.796827" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:22:04.796827" elapsed="0.482541"/>
</kw>
<msg time="2025-06-11T15:22:05.279368" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:22:04.796827" elapsed="0.482541"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:22:05.279368" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:22:04.748827" elapsed="0.530541"/>
</kw>
<status status="PASS" start="2025-06-11T15:21:25.469468" elapsed="39.809900"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:22:37.813873" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_152224.png</msg>
<msg time="2025-06-11T15:22:37.813873" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:22:07

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.15s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.045s
Ajustement: -45.0ms
Corrélation initiale: 0.485
Original length: 802513, Recorded length: 802513
Best lag: 1 samples (0.000 seconds)
Final lengths - Original: 802512, Aligned: 802512
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 0.1956
 correlation: 0.4859
         mse: 0.0313
        rmse: 0.1768
energy_ratio: 0.8540
    max_diff: 0.9896
   mean_diff: 0.1306
         mos: 3.1909
     clarity: 1.0027
  clarity_db: 0.0119

=== Résultat: ÉCHEC ===
SNR: 0.20 dB (seuil: 5 dB)
Corrélation: 0.486 (seuil: 0.8)
MOS: 3.19/5 (seuil: 2.5)
Clarté: 1.003 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:22:37.813873" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:22:37.813873" level="INFO">${metrics} = {'snr': 0.1956289773324517, 'correlation': 0.4858943048037284, 'mse': 0.03127246620892405, 'rmse': 0.17684022791470286, 'energy_ratio': 0.8540097158394093, 'max_diff': 0.9896147619360701, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:22:05.280369" elapsed="32.533504"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:22:37.813873" level="INFO">SNR: 0.1956289773324517 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:22:37.813873" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:22:37.814933" level="INFO">Corrélation: 0.4858943048037284 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:22:37.813873" elapsed="0.001060"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:22:37.815458" level="INFO">MOS: 3.190898324857772/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:22:37.814933" elapsed="0.000525"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:22:37.815458" level="INFO">Clarté: 1.002740753152131 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:22:37.815458" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:22:37.816010" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:22:37.815982" elapsed="0.000546"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:22:37.817057" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:22:37.816528" elapsed="0.000529"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:22:37.817084" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:22:37.817084" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:22:37.818097" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:22:37.817084" elapsed="0.001013"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:22:37.818097" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:22:37.818097" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:22:37.819107" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:22:37.819107" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:22:37.819107" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:22:37.819107" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:22:37.819107" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:22:37.819107" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:22:37.819107" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T15:22:37.818097" elapsed="0.001010">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:22:37.819107" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:22:05.279368" elapsed="32.539739">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:22:37.819107" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:21:22.294898" elapsed="75.524209">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:22:37.819107" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:21:22.294898" elapsed="75.524209"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:22:37.820097" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:22:37.820097" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:22:37.819107" elapsed="0.000990"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:22:37.820097" level="INFO">${attempt} = 28</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:22:37.820097" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:22:37.820097" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 28/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:22:37.820097" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:22:39.820435" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:22:37.820097" elapsed="2.000338"/>
</kw>
<status status="PASS" start="2025-06-11T15:22:37.820097" elapsed="2.000338"/>
</branch>
<status status="PASS" start="2025-06-11T15:22:37.820097" elapsed="2.000338"/>
</if>
<status status="PASS" start="2025-06-11T15:22:37.820097" elapsed="2.000338"/>
</branch>
<status status="PASS" start="2025-06-11T15:22:37.819107" elapsed="2.001328"/>
</if>
<var name="${index}">26</var>
<status status="PASS" start="2025-06-11T15:21:22.294898" elapsed="77.525537"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:22:39.862943" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:22:39.821449" elapsed="0.041494"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:22:39.863976" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:22:39.862943" elapsed="0.001033"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:22:39.863976" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:22:39.863976" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:22:39.821449" elapsed="0.042527"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:22:39.863976" elapsed="0.050430"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:22:42.914982" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:22:39.914406" elapsed="3.000576"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:22:42.987843" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:22:42.914982" elapsed="0.073376"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:22:42.988358" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:22:39.863976" elapsed="3.124382"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:22:42.988358" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:22:42.988358" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:22:42.989387" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:22:42.989387" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:22:42.988358" elapsed="0.001029"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:22:42.989387" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:22:42.989387" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:22:42.989387" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:22:42.990395" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:22:42.988358" elapsed="0.002037"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:22:42.990395" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:22:42.990395" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:22:42.990981" elapsed="0.051217"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:22:42.990981" elapsed="0.051217"/>
</kw>
<status status="PASS" start="2025-06-11T15:22:42.990981" elapsed="0.051217"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:22:43.090356" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:22:43.042198" elapsed="0.048158"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:22:43.090356" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:22:43.090356" elapsed="0.462911"/>
</kw>
<msg time="2025-06-11T15:22:43.553267" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:22:43.090356" elapsed="0.462911"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:22:43.553267" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:22:42.990395" elapsed="0.562872"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:22:45.554744" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:22:43.553267" elapsed="2.001477"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:23:03.968154" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:22:45.555254" elapsed="18.412900"/>
</kw>
<msg time="2025-06-11T15:23:03.968154" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:22:45.554744" elapsed="18.413410"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:23:03.968154" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:23:22.281503" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:23:03.968154" elapsed="18.313349"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:23:22.326363" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:23:22.281503" elapsed="0.044860"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:23:22.326363" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:23:22.326363" elapsed="0.467409"/>
</kw>
<msg time="2025-06-11T15:23:22.793772" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:23:22.326363" elapsed="0.467409"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:23:22.793772" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:23:22.281503" elapsed="0.512269"/>
</kw>
<status status="PASS" start="2025-06-11T15:22:42.988358" elapsed="39.805414"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:23:54.595855" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_152341.png</msg>
<msg time="2025-06-11T15:23:54.595855" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:23:24

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.041s
Ajustement: -40.9ms
Corrélation initiale: 0.875
Original length: 802493, Recorded length: 802493
Best lag: -1 samples (-0.000 seconds)
Final lengths - Original: 802493, Aligned: 802493
Décalage temporel final: -0.000 secondes

=== Résultats ===
Décalage temporel: -0.000 secondes
         snr: 6.2484
 correlation: 0.8753
         mse: 0.0078
        rmse: 0.0881
energy_ratio: 0.8720
    max_diff: 0.8540
   mean_diff: 0.0625
         mos: 3.9003
     clarity: 1.0053
  clarity_db: 0.0229

=== Résultat: SUCCÈS ===
SNR: 6.25 dB (seuil: 5 dB)
Corrélation: 0.875 (seuil: 0.8)
MOS: 3.90/5 (seuil: 2.5)
Clarté: 1.005 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:23:54.595855" level="INFO">${test_passed} = True</msg>
<msg time="2025-06-11T15:23:54.595855" level="INFO">${metrics} = {'snr': 6.24840085108135, 'correlation': 0.8753244531001231, 'mse': 0.007758536118646114, 'rmse': 0.08808255286176778, 'energy_ratio': 0.8719534052597501, 'max_diff': 0.8539892182745445, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:23:22.793772" elapsed="31.802083"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:23:54.596449" level="INFO">SNR: 6.24840085108135 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:23:54.595855" elapsed="0.000594"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:23:54.596449" level="INFO">Corrélation: 0.8753244531001231 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:23:54.596449" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:23:54.597469" level="INFO">MOS: 3.9003253777634015/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:23:54.596449" elapsed="0.001020"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:23:54.597469" level="INFO">Clarté: 1.005295869297832 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:23:54.597469" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:23:54.598476" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:23:54.597469" elapsed="0.001007"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:23:54.599011" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:23:54.598476" elapsed="0.000535"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:23:54.600021" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:23:54.599011" elapsed="0.001010"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:23:54.600021" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:23:54.600021" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:23:54.600021" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:23:54.600021" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:23:54.601034" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:23:54.601034" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:23:54.601034" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:23:54.601034" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:23:54.600021" elapsed="0.001013">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:23:54.601034" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:23:54.601034" elapsed="0.000511"/>
</branch>
<status status="FAIL" start="2025-06-11T15:23:54.600021" elapsed="0.001524">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:23:54.601614" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:23:22.793772" elapsed="31.807842">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:23:54.601614" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:22:39.820435" elapsed="74.781179">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:23:54.601614" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:22:39.820435" elapsed="74.781179"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:23:54.601614" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:23:54.601614" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:23:54.601614" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:23:54.601614" level="INFO">${attempt} = 29</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:23:54.601614" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:23:54.602570" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 29/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:23:54.601614" elapsed="0.000956"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:23:56.602968" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:23:54.602570" elapsed="2.000398"/>
</kw>
<status status="PASS" start="2025-06-11T15:23:54.601614" elapsed="2.001354"/>
</branch>
<status status="PASS" start="2025-06-11T15:23:54.601614" elapsed="2.001354"/>
</if>
<status status="PASS" start="2025-06-11T15:23:54.601614" elapsed="2.001354"/>
</branch>
<status status="PASS" start="2025-06-11T15:23:54.601614" elapsed="2.001354"/>
</if>
<var name="${index}">27</var>
<status status="PASS" start="2025-06-11T15:22:39.820435" elapsed="76.782533"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:23:56.642166" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:23:56.603977" elapsed="0.038189"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:23:56.642166" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:23:56.642166" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:23:56.642166" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:23:56.642166" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:23:56.602968" elapsed="0.039198"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:23:56.643167" elapsed="0.051211"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:23:59.695491" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:23:56.695379" elapsed="3.000112"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:23:59.785644" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:23:59.695491" elapsed="0.090153"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:23:59.785644" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:23:56.643167" elapsed="3.142477"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:23:59.786661" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:23:59.786661" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:23:59.786661" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:23:59.786661" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:23:59.786661" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:23:59.787679" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:23:59.787679" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:23:59.787679" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:23:59.787679" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:23:59.786661" elapsed="0.001018"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:23:59.787679" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:23:59.787679" elapsed="0.000527"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:23:59.788241" elapsed="0.046102"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:23:59.788241" elapsed="0.046102"/>
</kw>
<status status="PASS" start="2025-06-11T15:23:59.788241" elapsed="0.046102"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:23:59.883632" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:23:59.834343" elapsed="0.049289"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:23:59.884663" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:23:59.884663" elapsed="0.465578"/>
</kw>
<msg time="2025-06-11T15:24:00.350241" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:23:59.884663" elapsed="0.465578"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:24:00.350241" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:23:59.788241" elapsed="0.562000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:24:02.350651" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:24:00.350241" elapsed="2.000410"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:24:20.753250" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:24:02.350651" elapsed="18.403582"/>
</kw>
<msg time="2025-06-11T15:24:20.754233" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:24:02.350651" elapsed="18.403582"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:24:20.754233" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:24:39.066528" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:24:20.754233" elapsed="18.312295"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:24:39.127008" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:24:39.066528" elapsed="0.060480"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:24:39.127008" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:24:39.128002" elapsed="0.471576"/>
</kw>
<msg time="2025-06-11T15:24:39.599578" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:24:39.127008" elapsed="0.472570"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:24:39.599578" elapsed="0.001000"/>
</kw>
<status status="PASS" start="2025-06-11T15:24:39.066528" elapsed="0.534050"/>
</kw>
<status status="PASS" start="2025-06-11T15:23:59.785644" elapsed="39.814934"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:25:12.031684" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_152458.png</msg>
<msg time="2025-06-11T15:25:12.031684" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:24:41

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.20s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.054s
Ajustement: -54.5ms
Corrélation initiale: 0.407
Original length: 805168, Recorded length: 805168
Best lag: 434 samples (0.010 seconds)
Final lengths - Original: 804734, Aligned: 804734
Décalage temporel final: 0.010 secondes

=== Résultats ===
Décalage temporel: 0.010 secondes
         snr: 1.2985
 correlation: 0.6033
         mse: 0.0244
        rmse: 0.1562
energy_ratio: 0.8614
    max_diff: 1.2063
   mean_diff: 0.1005
         mos: 3.3759
     clarity: 1.0006
  clarity_db: 0.0024

=== Résultat: ÉCHEC ===
SNR: 1.30 dB (seuil: 5 dB)
Corrélation: 0.603 (seuil: 0.8)
MOS: 3.38/5 (seuil: 2.5)
Clarté: 1.001 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:25:12.031684" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:25:12.031684" level="INFO">${metrics} = {'snr': 1.2985109479888792, 'correlation': 0.6032801340040411, 'mse': 0.024396969815227994, 'rmse': 0.15619529383188213, 'energy_ratio': 0.8613795192642484, 'max_diff': 1.206335719270104, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:24:39.600578" elapsed="32.431106"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:25:12.032634" level="INFO">SNR: 1.2985109479888792 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:25:12.031684" elapsed="0.000950"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:25:12.032634" level="INFO">Corrélation: 0.6032801340040411 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:25:12.032634" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:25:12.033647" level="INFO">MOS: 3.375876598724404/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:25:12.032634" elapsed="0.001013"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:25:12.033647" level="INFO">Clarté: 1.0005567373021702 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:25:12.033647" elapsed="0.000531"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:25:12.034218" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:25:12.034218" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:25:12.035232" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:25:12.034218" elapsed="0.001014"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:25:12.035232" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:25:12.035232" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:25:12.036246" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:25:12.035232" elapsed="0.001014"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:25:12.036794" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:25:12.036246" elapsed="0.000608"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:25:12.036854" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:25:12.036854" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:25:12.036854" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:25:12.036854" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:25:12.036854" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:25:12.036854" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:25:12.036854" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T15:25:12.036854" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:25:12.036854" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:24:39.600578" elapsed="32.436276">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:25:12.036854" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:23:56.602968" elapsed="75.433886">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:25:12.036854" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:23:56.602968" elapsed="75.433886"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:25:12.038026" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:25:12.038026" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:25:12.038026" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:25:12.038026" level="INFO">${attempt} = 30</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:25:12.038026" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:25:12.038026" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 30/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:25:12.038026" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:25:14.038760" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:25:12.038026" elapsed="2.000734"/>
</kw>
<status status="PASS" start="2025-06-11T15:25:12.038026" elapsed="2.000734"/>
</branch>
<status status="PASS" start="2025-06-11T15:25:12.038026" elapsed="2.000734"/>
</if>
<status status="PASS" start="2025-06-11T15:25:12.038026" elapsed="2.000734"/>
</branch>
<status status="PASS" start="2025-06-11T15:25:12.038026" elapsed="2.000734"/>
</if>
<var name="${index}">28</var>
<status status="PASS" start="2025-06-11T15:23:56.602968" elapsed="77.435792"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:25:14.078500" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:25:14.040280" elapsed="0.038220"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:25:14.078500" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:25:14.078500" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:25:14.078500" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:25:14.078500" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:25:14.040280" elapsed="0.039199"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:25:14.079479" elapsed="0.050795"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:25:17.132109" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:25:14.131293" elapsed="3.000816"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:25:17.216423" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:25:17.132109" elapsed="0.084314"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:25:17.216423" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:25:14.079479" elapsed="3.136944"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:25:17.217422" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:25:17.217422" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:25:17.217422" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:25:17.217422" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:25:17.217422" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:25:17.218423" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:25:17.218423" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:25:17.218423" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:25:17.218423" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:25:17.217422" elapsed="0.001001"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:25:17.218423" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:25:17.218423" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:25:17.219441" elapsed="0.046289"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:25:17.218423" elapsed="0.047307"/>
</kw>
<status status="PASS" start="2025-06-11T15:25:17.218423" elapsed="0.047307"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:25:17.313891" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:25:17.265730" elapsed="0.048161"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:25:17.313891" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:25:17.313891" elapsed="0.456090"/>
</kw>
<msg time="2025-06-11T15:25:17.769981" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:25:17.313891" elapsed="0.456090"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:25:17.770497" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:25:17.218423" elapsed="0.552074"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:25:19.770926" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:25:17.770497" elapsed="2.000429"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:25:38.155903" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:25:19.770926" elapsed="18.384977"/>
</kw>
<msg time="2025-06-11T15:25:38.155903" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:25:19.770926" elapsed="18.384977"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:25:38.155903" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:25:56.468476" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:25:38.155903" elapsed="18.312573"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:25:56.518144" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:25:56.468476" elapsed="0.049668"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:25:56.518144" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:25:56.519169" elapsed="0.485611"/>
</kw>
<msg time="2025-06-11T15:25:57.004780" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:25:56.519169" elapsed="0.485611"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:25:57.004780" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:25:56.468476" elapsed="0.536304"/>
</kw>
<status status="PASS" start="2025-06-11T15:25:17.216423" elapsed="39.788357"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:26:29.343629" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_152615.png</msg>
<msg time="2025-06-11T15:26:29.343629" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:25:59

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.050s
Ajustement: -49.7ms
Corrélation initiale: 0.315
Original length: 803012, Recorded length: 803012
Best lag: 440 samples (0.010 seconds)
Final lengths - Original: 802572, Aligned: 802572
Décalage temporel final: 0.010 secondes

=== Résultats ===
Décalage temporel: 0.010 secondes
         snr: -0.3153
 correlation: 0.4232
         mse: 0.0352
        rmse: 0.1876
energy_ratio: 0.8602
    max_diff: 1.5313
   mean_diff: 0.1125
         mos: 3.0952
     clarity: 1.0336
  clarity_db: 0.1435

=== Résultat: ÉCHEC ===
SNR: -0.32 dB (seuil: 5 dB)
Corrélation: 0.423 (seuil: 0.8)
MOS: 3.10/5 (seuil: 2.5)
Clarté: 1.034 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:26:29.343629" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:26:29.343629" level="INFO">${metrics} = {'snr': -0.31531471044932924, 'correlation': 0.42315039643455726, 'mse': 0.03518795820578948, 'rmse': 0.18758453615847304, 'energy_ratio': 0.8602419645178951, 'max_diff': 1.5312805334103023, 'mean_dif...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:25:57.005783" elapsed="32.337846"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:26:29.344622" level="INFO">SNR: -0.31531471044932924 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:26:29.343629" elapsed="0.000993"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:26:29.344622" level="INFO">Corrélation: 0.42315039643455726 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:26:29.344622" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:26:29.344622" level="INFO">MOS: 3.0951678873034956/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:26:29.344622" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:26:29.345624" level="INFO">Clarté: 1.0335877551096302 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:26:29.344622" elapsed="0.001002"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:26:29.345624" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:26:29.345624" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:26:29.346624" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:26:29.345624" elapsed="0.001000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:26:29.347655" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:26:29.346624" elapsed="0.001031"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:26:29.348659" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:26:29.347655" elapsed="0.001004"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:26:29.348659" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:26:29.348659" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:26:29.348659" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:26:29.348659" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:26:29.348659" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:26:29.348659" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:26:29.348659" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:26:29.348659" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:26:29.348659" elapsed="0.000987"/>
</branch>
<status status="FAIL" start="2025-06-11T15:26:29.348659" elapsed="0.000987">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:26:29.349646" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:25:57.005783" elapsed="32.343863">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:26:29.349646" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:25:14.039287" elapsed="75.310359">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:26:29.349646" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:25:14.039287" elapsed="75.310359"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:26:29.349646" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:26:29.349646" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:26:29.349646" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:26:29.349646" level="INFO">${attempt} = 31</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:26:29.349646" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:26:29.349646" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 31/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:26:29.349646" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:26:31.350973" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:26:29.349646" elapsed="2.001327"/>
</kw>
<status status="PASS" start="2025-06-11T15:26:29.349646" elapsed="2.001327"/>
</branch>
<status status="PASS" start="2025-06-11T15:26:29.349646" elapsed="2.001327"/>
</if>
<status status="PASS" start="2025-06-11T15:26:29.349646" elapsed="2.001327"/>
</branch>
<status status="PASS" start="2025-06-11T15:26:29.349646" elapsed="2.001327"/>
</if>
<var name="${index}">29</var>
<status status="PASS" start="2025-06-11T15:25:14.039287" elapsed="77.311686"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:26:31.387099" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:26:31.351982" elapsed="0.035117"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:26:31.388122" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:26:31.387099" elapsed="0.001023"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:26:31.388122" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:26:31.388122" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:26:31.350973" elapsed="0.037149"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:26:31.388122" elapsed="0.055044"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:26:34.443616" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:26:31.443166" elapsed="3.000450"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:26:34.521187" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:26:34.443616" elapsed="0.077571"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:26:34.522172" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:26:31.388122" elapsed="3.134050"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:26:34.522172" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:26:34.522172" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:26:34.523169" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:26:34.523169" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:26:34.522172" elapsed="0.000997"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:26:34.523169" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:26:34.523169" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:26:34.523169" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:26:34.523169" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:26:34.522172" elapsed="0.000997"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:26:34.523169" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:26:34.523169" elapsed="0.001000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:26:34.524169" elapsed="0.053094"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:26:34.524169" elapsed="0.053094"/>
</kw>
<status status="PASS" start="2025-06-11T15:26:34.524169" elapsed="0.053094"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:26:34.621161" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:26:34.577263" elapsed="0.043898"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:26:34.621161" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:26:34.621161" elapsed="0.480338"/>
</kw>
<msg time="2025-06-11T15:26:35.101499" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:26:34.621161" elapsed="0.480338"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:26:35.101499" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:26:34.524169" elapsed="0.577330"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:26:37.102383" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:26:35.101499" elapsed="2.000884"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:26:55.507171" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:26:37.102383" elapsed="18.404788"/>
</kw>
<msg time="2025-06-11T15:26:55.507171" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:26:37.102383" elapsed="18.404788"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:26:55.507171" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:27:13.819893" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:26:55.507171" elapsed="18.312722"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:27:13.867732" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:27:13.819893" elapsed="0.047839"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:27:13.867732" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:27:13.867732" elapsed="0.479145"/>
</kw>
<msg time="2025-06-11T15:27:14.346877" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:27:13.867732" elapsed="0.479145"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:27:14.346877" elapsed="0.000527"/>
</kw>
<status status="PASS" start="2025-06-11T15:27:13.819893" elapsed="0.527511"/>
</kw>
<status status="PASS" start="2025-06-11T15:26:34.522172" elapsed="39.825232"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:27:46.800084" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_152733.png</msg>
<msg time="2025-06-11T15:27:46.800084" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:27:16

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.055s
Ajustement: -54.8ms
Corrélation initiale: 0.252
Original length: 803447, Recorded length: 803447
Best lag: 441 samples (0.010 seconds)
Final lengths - Original: 803006, Aligned: 803006
Décalage temporel final: 0.010 secondes

=== Résultats ===
Décalage temporel: 0.010 secondes
         snr: -1.2528
 correlation: 0.2869
         mse: 0.0437
        rmse: 0.2091
energy_ratio: 0.8694
    max_diff: 1.4995
   mean_diff: 0.1342
         mos: 2.8802
     clarity: 0.9883
  clarity_db: -0.0509

=== Résultat: ÉCHEC ===
SNR: -1.25 dB (seuil: 5 dB)
Corrélation: 0.287 (seuil: 0.8)
MOS: 2.88/5 (seuil: 2.5)
Clarté: 0.988 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:27:46.800084" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:27:46.800084" level="INFO">${metrics} = {'snr': -1.2528194826479901, 'correlation': 0.2868920957863913, 'mse': 0.04371290531821118, 'rmse': 0.20907631457965578, 'energy_ratio': 0.8693902017144421, 'max_diff': 1.4994903644464632, 'mean_diff'...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:27:14.347930" elapsed="32.452154"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:27:46.801109" level="INFO">SNR: -1.2528194826479901 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:27:46.800084" elapsed="0.001025"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:27:46.801109" level="INFO">Corrélation: 0.2868920957863913 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:27:46.801109" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:27:46.801109" level="INFO">MOS: 2.8801631863218358/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:27:46.801109" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:27:46.802114" level="INFO">Clarté: 0.9883378755700714 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:27:46.802114" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:27:46.802679" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:27:46.802114" elapsed="0.000565"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:27:46.803828" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:27:46.802679" elapsed="0.001149"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:27:46.804816" level="INFO">${mos_ok} = False</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:27:46.803828" elapsed="0.000988"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:27:46.805815" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:27:46.804816" elapsed="0.000999"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:27:46.805815" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:27:46.805815" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:27:46.806814" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:27:46.806814" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:27:46.806814" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:27:46.806814" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:27:46.805815" elapsed="0.001523">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:27:46.807338" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:27:46.807338" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T15:27:46.805815" elapsed="0.001523">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:27:46.807338" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:27:14.347404" elapsed="32.459934">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:27:46.807338" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:26:31.350973" elapsed="75.456365">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:27:46.807338" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:26:31.350973" elapsed="75.456365"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:27:46.807338" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:27:46.808329" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:27:46.807338" elapsed="0.000991"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:27:46.808329" level="INFO">${attempt} = 32</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:27:46.808329" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:27:46.808329" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 32/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:27:46.808329" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:27:48.809471" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:27:46.809329" elapsed="2.000142"/>
</kw>
<status status="PASS" start="2025-06-11T15:27:46.808329" elapsed="2.001142"/>
</branch>
<status status="PASS" start="2025-06-11T15:27:46.808329" elapsed="2.001142"/>
</if>
<status status="PASS" start="2025-06-11T15:27:46.808329" elapsed="2.001142"/>
</branch>
<status status="PASS" start="2025-06-11T15:27:46.807338" elapsed="2.002133"/>
</if>
<var name="${index}">30</var>
<status status="PASS" start="2025-06-11T15:26:31.350973" elapsed="77.458498"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:27:48.850076" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:27:48.810088" elapsed="0.039988"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:27:48.851169" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:27:48.851169" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:27:48.851169" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:27:48.851169" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:27:48.810088" elapsed="0.041081"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:27:48.851169" elapsed="0.053012"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:27:51.905561" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:27:48.905175" elapsed="3.000386"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:27:51.987203" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:27:51.905561" elapsed="0.081642"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:27:51.988175" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:27:48.851169" elapsed="3.137006"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:27:51.988175" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:27:51.988175" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:27:51.989178" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:27:51.989699" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:27:51.988175" elapsed="0.001524"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:27:51.989699" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:27:51.989699" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:27:51.989699" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:27:51.989699" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:27:51.988175" elapsed="0.001524"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:27:51.989699" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:27:51.989699" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:27:51.990695" elapsed="0.044568"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:27:51.989699" elapsed="0.045564"/>
</kw>
<status status="PASS" start="2025-06-11T15:27:51.989699" elapsed="0.045564"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:27:52.083412" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:27:52.035263" elapsed="0.048149"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:27:52.083412" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:27:52.083961" elapsed="0.453633"/>
</kw>
<msg time="2025-06-11T15:27:52.537594" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:27:52.083412" elapsed="0.454182"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:27:52.537594" elapsed="0.000529"/>
</kw>
<status status="PASS" start="2025-06-11T15:27:51.989699" elapsed="0.548424"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:27:54.538626" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:27:52.538123" elapsed="2.000503"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:28:12.947891" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:27:54.538626" elapsed="18.409265"/>
</kw>
<msg time="2025-06-11T15:28:12.947891" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:27:54.538626" elapsed="18.409265"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:28:12.947891" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:28:31.260176" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:28:12.947891" elapsed="18.312285"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:28:31.305299" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:28:31.260176" elapsed="0.045123"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:28:31.305299" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:28:31.306262" elapsed="0.462195"/>
</kw>
<msg time="2025-06-11T15:28:31.768457" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:28:31.306262" elapsed="0.462195"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:28:31.769475" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:28:31.260176" elapsed="0.509299"/>
</kw>
<status status="PASS" start="2025-06-11T15:27:51.988175" elapsed="39.781300"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:29:04.054551" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_152850.png</msg>
<msg time="2025-06-11T15:29:04.054551" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:28:33

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.22s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.061s
Ajustement: -61.4ms
Corrélation initiale: 0.411
Original length: 806005, Recorded length: 806005
Best lag: 855 samples (0.019 seconds)
Final lengths - Original: 805150, Aligned: 805150
Décalage temporel final: 0.019 secondes

=== Résultats ===
Décalage temporel: 0.019 secondes
         snr: 2.1441
 correlation: 0.6742
         mse: 0.0201
        rmse: 0.1418
energy_ratio: 0.8628
    max_diff: 1.0295
   mean_diff: 0.0963
         mos: 3.4948
     clarity: 1.0227
  clarity_db: 0.0977

=== Résultat: ÉCHEC ===
SNR: 2.14 dB (seuil: 5 dB)
Corrélation: 0.674 (seuil: 0.8)
MOS: 3.49/5 (seuil: 2.5)
Clarté: 1.023 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:29:04.054551" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:29:04.054551" level="INFO">${metrics} = {'snr': 2.1440851149340396, 'correlation': 0.6741645838723584, 'mse': 0.020104785469351332, 'rmse': 0.1417913448322969, 'energy_ratio': 0.8627655325024827, 'max_diff': 1.029534176261245, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:28:31.769475" elapsed="32.285076"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:29:04.054551" level="INFO">SNR: 2.1440851149340396 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:29:04.054551" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:29:04.055943" level="INFO">Corrélation: 0.6741645838723584 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:29:04.054551" elapsed="0.001392"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:29:04.055943" level="INFO">MOS: 3.494760905244192/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:29:04.055943" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:29:04.055943" level="INFO">Clarté: 1.0227496438415427 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:29:04.055943" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:29:04.056935" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:29:04.056935" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:29:04.057938" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:29:04.056935" elapsed="0.001003"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:29:04.059468" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:29:04.057938" elapsed="0.001530"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:29:04.059468" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:29:04.059468" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:29:04.059468" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:29:04.059468" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:29:04.060466" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:29:04.060466" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:29:04.060466" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:29:04.060466" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:29:04.060466" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:29:04.061467" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:29:04.060466" elapsed="0.001001"/>
</branch>
<status status="FAIL" start="2025-06-11T15:29:04.059468" elapsed="0.001999">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:29:04.061467" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:28:31.769475" elapsed="32.291992">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:29:04.061467" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:27:48.810088" elapsed="75.251379">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:29:04.061467" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:27:48.809471" elapsed="75.251996"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:29:04.062465" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:29:04.062465" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:29:04.061467" elapsed="0.000998"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:29:04.062465" level="INFO">${attempt} = 33</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:29:04.062465" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:29:04.063469" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 33/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:29:04.062465" elapsed="0.001004"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:29:06.063636" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:29:04.063469" elapsed="2.000167"/>
</kw>
<status status="PASS" start="2025-06-11T15:29:04.062465" elapsed="2.001171"/>
</branch>
<status status="PASS" start="2025-06-11T15:29:04.062465" elapsed="2.001171"/>
</if>
<status status="PASS" start="2025-06-11T15:29:04.062465" elapsed="2.001171"/>
</branch>
<status status="PASS" start="2025-06-11T15:29:04.061467" elapsed="2.002169"/>
</if>
<var name="${index}">31</var>
<status status="PASS" start="2025-06-11T15:27:48.809471" elapsed="77.254165"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:29:06.102294" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:29:06.063636" elapsed="0.038658"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:29:06.103296" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:29:06.103296" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:29:06.103296" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:29:06.103296" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:29:06.063636" elapsed="0.039660"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:29:06.103296" elapsed="0.062287"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:29:09.166855" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:29:06.166585" elapsed="3.000270"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:29:09.242504" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:29:09.166855" elapsed="0.075649"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:29:09.242504" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:29:06.103296" elapsed="3.139208"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:29:09.242504" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:29:09.242504" elapsed="0.000954"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:29:09.244029" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:29:09.244029" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:29:09.243458" elapsed="0.000571"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:29:09.244029" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:29:09.244029" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:29:09.244029" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:29:09.244029" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:29:09.243458" elapsed="0.000571"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:29:09.244029" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:29:09.244029" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:29:09.245058" elapsed="0.045205"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:29:09.245058" elapsed="0.045205"/>
</kw>
<status status="PASS" start="2025-06-11T15:29:09.244029" elapsed="0.046234"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:29:09.343639" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:29:09.290263" elapsed="0.053376"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:29:09.344161" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:29:09.344161" elapsed="0.462597"/>
</kw>
<msg time="2025-06-11T15:29:09.806758" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:29:09.344161" elapsed="0.462597"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:29:09.806758" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:29:09.244029" elapsed="0.562729"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:29:11.806907" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:29:09.806758" elapsed="2.000149"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:29:30.199951" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:29:11.806907" elapsed="18.393044"/>
</kw>
<msg time="2025-06-11T15:29:30.200963" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:29:11.806907" elapsed="18.394056"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:29:30.200963" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:29:48.513470" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:29:30.200963" elapsed="18.312507"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:29:48.563262" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:29:48.513470" elapsed="0.049792"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:29:48.563262" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:29:48.563262" elapsed="0.474912"/>
</kw>
<msg time="2025-06-11T15:29:49.038174" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:29:48.563262" elapsed="0.474912"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:29:49.039174" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:29:48.513470" elapsed="0.525704"/>
</kw>
<status status="PASS" start="2025-06-11T15:29:09.242504" elapsed="39.796670"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:30:21.041586" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_153007.png</msg>
<msg time="2025-06-11T15:30:21.041586" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:29:51

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.17s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: 0.005s
Ajustement: 4.7ms
Corrélation initiale: 0.365
Original length: 801239, Recorded length: 801239
Best lag: -2133 samples (-0.048 seconds)
Final lengths - Original: 801239, Aligned: 801239
Décalage temporel final: -0.048 secondes

=== Résultats ===
Décalage temporel: -0.048 secondes
         snr: 1.3358
 correlation: 0.6077
         mse: 0.0240
        rmse: 0.1548
energy_ratio: 0.8667
    max_diff: 1.2640
   mean_diff: 0.1064
         mos: 3.3827
     clarity: 1.0235
  clarity_db: 0.1007

=== Résultat: ÉCHEC ===
SNR: 1.34 dB (seuil: 5 dB)
Corrélation: 0.608 (seuil: 0.8)
MOS: 3.38/5 (seuil: 2.5)
Clarté: 1.023 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:30:21.041586" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:30:21.041586" level="INFO">${metrics} = {'snr': 1.33580907568803, 'correlation': 0.6076893433263787, 'mse': 0.023955380955350037, 'rmse': 0.15477525950664736, 'energy_ratio': 0.8667022576979277, 'max_diff': 1.26401710076454, 'mean_diff': 0....</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:29:49.039174" elapsed="32.002412"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:30:21.042606" level="INFO">SNR: 1.33580907568803 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:30:21.041586" elapsed="0.001020"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:30:21.043139" level="INFO">Corrélation: 0.6076893433263787 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:30:21.042606" elapsed="0.000533"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:30:21.043139" level="INFO">MOS: 3.3826595750191757/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:30:21.043139" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:30:21.043139" level="INFO">Clarté: 1.0234682357520868 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:30:21.043139" elapsed="0.001015"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:30:21.044154" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:30:21.044154" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:30:21.045169" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:30:21.044154" elapsed="0.001015"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:30:21.045169" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:30:21.045169" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:30:21.046140" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:30:21.045169" elapsed="0.000971"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:30:21.046140" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:30:21.046140" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:30:21.046819" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:30:21.046819" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:30:21.046819" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:30:21.046819" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:30:21.046819" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:30:21.047334" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:30:21.046819" elapsed="0.000515"/>
</branch>
<status status="FAIL" start="2025-06-11T15:30:21.046140" elapsed="0.001194">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:30:21.047334" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:29:49.039174" elapsed="32.008160">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:30:21.047334" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:29:06.063636" elapsed="74.983698">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:30:21.047334" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:29:06.063636" elapsed="74.983698"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:30:21.047334" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:30:21.047334" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:30:21.047334" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:30:21.047334" level="INFO">${attempt} = 34</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:30:21.047334" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:30:21.048349" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 34/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:30:21.047334" elapsed="0.001015"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:30:23.048626" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:30:21.048349" elapsed="2.000277"/>
</kw>
<status status="PASS" start="2025-06-11T15:30:21.047334" elapsed="2.001292"/>
</branch>
<status status="PASS" start="2025-06-11T15:30:21.047334" elapsed="2.001292"/>
</if>
<status status="PASS" start="2025-06-11T15:30:21.047334" elapsed="2.001292"/>
</branch>
<status status="PASS" start="2025-06-11T15:30:21.047334" elapsed="2.001292"/>
</if>
<var name="${index}">32</var>
<status status="PASS" start="2025-06-11T15:29:06.063636" elapsed="76.984990"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:30:23.086447" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:30:23.049654" elapsed="0.036793"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:30:23.086447" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:30:23.086447" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:30:23.086447" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:30:23.086447" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:30:23.049654" elapsed="0.036793"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:30:23.086447" elapsed="0.047372"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:30:26.134438" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:30:23.133819" elapsed="3.000619"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:30:26.212352" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:30:26.134438" elapsed="0.077914"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:30:26.212352" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:30:23.086447" elapsed="3.125905"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:30:26.213353" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:30:26.213353" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:30:26.214419" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:30:26.214419" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:30:26.213353" elapsed="0.001066"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:30:26.214419" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:30:26.214419" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:30:26.214419" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:30:26.214419" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:30:26.213353" elapsed="0.001574"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:30:26.214941" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:30:26.214941" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:30:26.215499" elapsed="0.047034"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:30:26.215499" elapsed="0.047034"/>
</kw>
<status status="PASS" start="2025-06-11T15:30:26.214941" elapsed="0.047592"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:30:26.309450" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:30:26.262533" elapsed="0.046917"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:30:26.309450" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:30:26.309450" elapsed="0.459828"/>
</kw>
<msg time="2025-06-11T15:30:26.769278" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:30:26.309450" elapsed="0.459828"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:30:26.770253" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:30:26.214941" elapsed="0.555312"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:30:28.770367" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:30:26.770253" elapsed="2.000114"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:30:47.160541" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:30:28.770367" elapsed="18.390174"/>
</kw>
<msg time="2025-06-11T15:30:47.160541" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:30:28.770367" elapsed="18.390174"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:30:47.160541" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:31:05.473641" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:30:47.160541" elapsed="18.313100"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:31:05.517639" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:31:05.474156" elapsed="0.043483"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:31:05.517639" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:31:05.517639" elapsed="0.464115"/>
</kw>
<msg time="2025-06-11T15:31:05.981754" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:31:05.517639" elapsed="0.464115"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:31:05.981754" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:31:05.473641" elapsed="0.508113"/>
</kw>
<status status="PASS" start="2025-06-11T15:30:26.213353" elapsed="39.768401"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:31:38.209409" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_153124.png</msg>
<msg time="2025-06-11T15:31:38.209409" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:31:08

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.043s
Ajustement: -42.7ms
Corrélation initiale: 0.822
Original length: 802932, Recorded length: 802932
Best lag: 0 samples (0.000 seconds)
Final lengths - Original: 802932, Aligned: 802932
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 4.7362
 correlation: 0.8222
         mse: 0.0110
        rmse: 0.1049
energy_ratio: 0.8689
    max_diff: 1.1059
   mean_diff: 0.0711
         mos: 3.7761
     clarity: 1.0030
  clarity_db: 0.0132

=== Résultat: SUCCÈS ===
SNR: 4.74 dB (seuil: 5 dB)
Corrélation: 0.822 (seuil: 0.8)
MOS: 3.78/5 (seuil: 2.5)
Clarté: 1.003 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:31:38.209409" level="INFO">${test_passed} = True</msg>
<msg time="2025-06-11T15:31:38.209409" level="INFO">${metrics} = {'snr': 4.736237212502915, 'correlation': 0.8222277901085531, 'mse': 0.011004171695181081, 'rmse': 0.10490077070823207, 'energy_ratio': 0.8689397903797051, 'max_diff': 1.1058834967855051, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:31:05.982771" elapsed="32.226638"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:31:38.210483" level="INFO">SNR: 4.736237212502915 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:31:38.209409" elapsed="0.001074"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:31:38.210483" level="INFO">Corrélation: 0.8222277901085531 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:31:38.210483" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:31:38.211479" level="INFO">MOS: 3.77612283663038/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:31:38.210483" elapsed="0.000996"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:31:38.211479" level="INFO">Clarté: 1.0030364787219588 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:31:38.211479" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:31:38.212162" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:31:38.211479" elapsed="0.000683"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:31:38.212162" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:31:38.212162" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:31:38.213105" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:31:38.213105" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:31:38.214400" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:31:38.213795" elapsed="0.000605"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:31:38.214400" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:31:38.214400" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:31:38.214400" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:31:38.214400" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:31:38.214400" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:31:38.214400" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:31:38.214400" elapsed="0.001098">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:31:38.215498" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:31:38.215498" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T15:31:38.214400" elapsed="0.001098">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:31:38.215498" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:31:05.981754" elapsed="32.233744">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:31:38.215498" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:30:23.048626" elapsed="75.166872">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:31:38.215498" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:30:23.048626" elapsed="75.166872"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:31:38.215498" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:31:38.215498" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:31:38.215498" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:31:38.215498" level="INFO">${attempt} = 35</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:31:38.215498" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:31:38.216490" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 35/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:31:38.215498" elapsed="0.000992"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:31:40.217507" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:31:38.216490" elapsed="2.001017"/>
</kw>
<status status="PASS" start="2025-06-11T15:31:38.215498" elapsed="2.002009"/>
</branch>
<status status="PASS" start="2025-06-11T15:31:38.215498" elapsed="2.002009"/>
</if>
<status status="PASS" start="2025-06-11T15:31:38.215498" elapsed="2.002009"/>
</branch>
<status status="PASS" start="2025-06-11T15:31:38.215498" elapsed="2.002009"/>
</if>
<var name="${index}">33</var>
<status status="PASS" start="2025-06-11T15:30:23.048626" elapsed="77.168881"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:31:40.256301" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:31:40.218637" elapsed="0.037664"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:31:40.257658" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:31:40.256301" elapsed="0.001357"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:31:40.257658" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:31:40.257658" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:31:40.217507" elapsed="0.040151"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:31:40.257658" elapsed="0.049532"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:31:43.307395" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:31:40.307190" elapsed="3.000205"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:31:43.379353" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:31:43.307395" elapsed="0.071958"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:31:43.379353" elapsed="0.001001"/>
</kw>
<status status="PASS" start="2025-06-11T15:31:40.257658" elapsed="3.122696"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:31:43.380354" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:31:43.380354" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:31:43.381484" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:31:43.381484" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:31:43.380354" elapsed="0.001130"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:31:43.382001" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:31:43.381484" elapsed="0.000517"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:31:43.382001" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:31:43.382001" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:31:43.380354" elapsed="0.001647"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:31:43.382001" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:31:43.382001" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:31:43.382524" elapsed="0.051302"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:31:43.382524" elapsed="0.051302"/>
</kw>
<status status="PASS" start="2025-06-11T15:31:43.382524" elapsed="0.051302"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:31:43.485527" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:31:43.433826" elapsed="0.051701"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:31:43.485527" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:31:43.486585" elapsed="0.464459"/>
</kw>
<msg time="2025-06-11T15:31:43.951044" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:31:43.485527" elapsed="0.465517"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:31:43.951044" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:31:43.382524" elapsed="0.568520"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:31:45.952514" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:31:43.951044" elapsed="2.001470"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:32:04.364847" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:31:45.952514" elapsed="18.412333"/>
</kw>
<msg time="2025-06-11T15:32:04.364847" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:31:45.952514" elapsed="18.412333"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:32:04.364847" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:32:22.677576" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:32:04.364847" elapsed="18.312729"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:32:22.723134" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:32:22.677576" elapsed="0.045558"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:32:22.723134" elapsed="0.000991"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:32:22.724125" elapsed="0.479494"/>
</kw>
<msg time="2025-06-11T15:32:23.203619" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:32:22.724125" elapsed="0.479494"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:32:23.203619" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:32:22.677576" elapsed="0.526043"/>
</kw>
<status status="PASS" start="2025-06-11T15:31:43.380354" elapsed="39.823265"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:32:55.341047" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_153242.png</msg>
<msg time="2025-06-11T15:32:55.341047" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:32:25

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.041s
Ajustement: -41.2ms
Corrélation initiale: 0.659
Original length: 802489, Recorded length: 802489
Best lag: 0 samples (0.000 seconds)
Final lengths - Original: 802489, Aligned: 802489
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 1.9478
 correlation: 0.6591
         mse: 0.0209
        rmse: 0.1445
energy_ratio: 0.8635
    max_diff: 1.4347
   mean_diff: 0.0900
         mos: 3.4688
     clarity: 1.0247
  clarity_db: 0.1060

=== Résultat: ÉCHEC ===
SNR: 1.95 dB (seuil: 5 dB)
Corrélation: 0.659 (seuil: 0.8)
MOS: 3.47/5 (seuil: 2.5)
Clarté: 1.025 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:32:55.341047" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:32:55.341635" level="INFO">${metrics} = {'snr': 1.9477998379180963, 'correlation': 0.6590835256042271, 'mse': 0.02088472644741719, 'rmse': 0.14451548860733646, 'energy_ratio': 0.8634645828897615, 'max_diff': 1.4346802088611232, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:32:23.204613" elapsed="32.137022"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:32:55.341635" level="INFO">SNR: 1.9477998379180963 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:32:55.341635" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:32:55.342564" level="INFO">Corrélation: 0.6590835256042271 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:32:55.342564" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:32:55.342564" level="INFO">MOS: 3.4688122242417965/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:32:55.342564" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:32:55.343562" level="INFO">Clarté: 1.0247154907483225 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:32:55.342564" elapsed="0.000998"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:32:55.344578" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:32:55.343562" elapsed="0.001016"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:32:55.344578" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:32:55.344578" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:32:55.345564" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:32:55.344578" elapsed="0.000986"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:32:55.346087" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:32:55.345564" elapsed="0.000523"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:32:55.346087" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:32:55.346087" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:32:55.346087" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:32:55.346087" elapsed="0.000996"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:32:55.347083" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:32:55.347083" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:32:55.346087" elapsed="0.000996">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:32:55.347083" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:32:55.347083" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T15:32:55.346087" elapsed="0.000996">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:32:55.347083" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:32:23.204613" elapsed="32.142470">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:32:55.347083" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:31:40.217507" elapsed="75.129576">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:32:55.347083" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:31:40.217507" elapsed="75.129576"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:32:55.347083" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:32:55.347083" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:32:55.347083" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:32:55.348138" level="INFO">${attempt} = 36</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:32:55.347083" elapsed="0.001055"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:32:55.348138" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 36/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:32:55.348138" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:32:57.348348" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:32:55.348138" elapsed="2.000210"/>
</kw>
<status status="PASS" start="2025-06-11T15:32:55.348138" elapsed="2.000210"/>
</branch>
<status status="PASS" start="2025-06-11T15:32:55.348138" elapsed="2.000210"/>
</if>
<status status="PASS" start="2025-06-11T15:32:55.347083" elapsed="2.001265"/>
</branch>
<status status="PASS" start="2025-06-11T15:32:55.347083" elapsed="2.001265"/>
</if>
<var name="${index}">34</var>
<status status="PASS" start="2025-06-11T15:31:40.217507" elapsed="77.130841"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:32:57.387883" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:32:57.348902" elapsed="0.038981"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:32:57.387883" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:32:57.387883" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:32:57.388882" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:32:57.387883" elapsed="0.000999"/>
</kw>
<status status="PASS" start="2025-06-11T15:32:57.348902" elapsed="0.039980"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:32:57.388882" elapsed="0.049941"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:33:00.439155" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:32:57.438823" elapsed="3.000332"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:33:00.511611" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:33:00.439155" elapsed="0.072456"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:33:00.511611" elapsed="0.000998"/>
</kw>
<status status="PASS" start="2025-06-11T15:32:57.388882" elapsed="3.123727"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:33:00.512609" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:33:00.512609" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:33:00.513612" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:33:00.513612" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:33:00.512609" elapsed="0.001003"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:33:00.513612" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:33:00.513612" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:33:00.513612" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:33:00.513612" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:33:00.512609" elapsed="0.001003"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:33:00.514612" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:33:00.513612" elapsed="0.001000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:33:00.514612" elapsed="0.050111"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:33:00.514612" elapsed="0.050111"/>
</kw>
<status status="PASS" start="2025-06-11T15:33:00.514612" elapsed="0.050111"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:33:00.608123" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:33:00.565244" elapsed="0.042879"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:33:00.608123" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:33:00.608123" elapsed="0.461341"/>
</kw>
<msg time="2025-06-11T15:33:01.069464" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:33:00.608123" elapsed="0.461341"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:33:01.069464" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:33:00.514612" elapsed="0.554852"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:33:03.070529" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:33:01.070462" elapsed="2.000067"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:33:21.476419" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:33:03.070529" elapsed="18.405890"/>
</kw>
<msg time="2025-06-11T15:33:21.476419" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:33:03.070529" elapsed="18.405890"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:33:21.476419" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:33:39.789086" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:33:21.476419" elapsed="18.312667"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:33:39.853202" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:33:39.789086" elapsed="0.064116"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:33:39.853202" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:33:39.853202" elapsed="0.473034"/>
</kw>
<msg time="2025-06-11T15:33:40.326236" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:33:39.853202" elapsed="0.473034"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:33:40.326236" elapsed="0.001001"/>
</kw>
<status status="PASS" start="2025-06-11T15:33:39.789086" elapsed="0.538151"/>
</kw>
<status status="PASS" start="2025-06-11T15:33:00.512609" elapsed="39.814628"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:34:12.404659" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_153358.png</msg>
<msg time="2025-06-11T15:34:12.404659" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:33:42

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.15s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: 0.005s
Ajustement: 4.7ms
Corrélation initiale: 0.259
Original length: 800350, Recorded length: 800350
Best lag: -2134 samples (-0.048 seconds)
Final lengths - Original: 800350, Aligned: 800350
Décalage temporel final: -0.048 secondes

=== Résultats ===
Décalage temporel: -0.048 secondes
         snr: -0.1658
 correlation: 0.4473
         mse: 0.0338
        rmse: 0.1837
energy_ratio: 0.8762
    max_diff: 1.0343
   mean_diff: 0.1311
         mos: 3.1301
     clarity: 1.0218
  clarity_db: 0.0936

=== Résultat: ÉCHEC ===
SNR: -0.17 dB (seuil: 5 dB)
Corrélation: 0.447 (seuil: 0.8)
MOS: 3.13/5 (seuil: 2.5)
Clarté: 1.022 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:34:12.404659" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:34:12.404659" level="INFO">${metrics} = {'snr': -0.16579594244041765, 'correlation': 0.44725199705557234, 'mse': 0.03375655423812615, 'rmse': 0.18372956821950612, 'energy_ratio': 0.8762375661391051, 'max_diff': 1.0343315473852852, 'mean_dif...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:33:40.327237" elapsed="32.077422"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:34:12.405639" level="INFO">SNR: -0.16579594244041765 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:34:12.404659" elapsed="0.000980"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:34:12.405639" level="INFO">Corrélation: 0.44725199705557234 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:34:12.405639" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:34:12.405639" level="INFO">MOS: 3.13007055876907/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:34:12.405639" elapsed="0.001019"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:34:12.406658" level="INFO">Clarté: 1.0217890360285953 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:34:12.406658" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:34:12.407638" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:34:12.406658" elapsed="0.000980"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:34:12.407638" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:34:12.407638" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:34:12.408636" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:34:12.408636" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:34:12.409690" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:34:12.408636" elapsed="0.001054"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:34:12.409690" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:34:12.409690" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:34:12.409690" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:34:12.409690" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:34:12.410705" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:34:12.409690" elapsed="0.001015">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:34:12.409690" elapsed="0.001015">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:34:12.410705" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:34:12.410705" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T15:34:12.409690" elapsed="0.001015">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:34:12.410705" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:33:40.327237" elapsed="32.083468">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:34:12.410705" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:32:57.348902" elapsed="75.061803">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:34:12.410705" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:32:57.348869" elapsed="75.061836"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:34:12.410705" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:34:12.410705" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:34:12.410705" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:34:12.410705" level="INFO">${attempt} = 37</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:34:12.410705" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:34:12.411723" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 37/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:34:12.411723" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:34:14.411939" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:34:12.411723" elapsed="2.000216"/>
</kw>
<status status="PASS" start="2025-06-11T15:34:12.410705" elapsed="2.001234"/>
</branch>
<status status="PASS" start="2025-06-11T15:34:12.410705" elapsed="2.001234"/>
</if>
<status status="PASS" start="2025-06-11T15:34:12.410705" elapsed="2.001234"/>
</branch>
<status status="PASS" start="2025-06-11T15:34:12.410705" elapsed="2.001234"/>
</if>
<var name="${index}">35</var>
<status status="PASS" start="2025-06-11T15:32:57.348348" elapsed="77.063591"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:34:14.454187" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:34:14.412931" elapsed="0.041256"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:34:14.454187" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:34:14.454187" elapsed="0.000776"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:34:14.454981" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:34:14.454981" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:34:14.412931" elapsed="0.042050"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:34:14.455486" elapsed="0.056401"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:34:17.513747" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:34:14.513241" elapsed="3.000506"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:34:17.593142" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:34:17.513747" elapsed="0.079395"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:34:17.593142" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:34:14.454981" elapsed="3.138161"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:34:17.594168" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:34:17.594168" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:34:17.594168" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:34:17.595143" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:34:17.594168" elapsed="0.000975"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:34:17.595143" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:34:17.595143" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:34:17.595143" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:34:17.595143" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:34:17.594168" elapsed="0.000975"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:34:17.595143" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:34:17.595143" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:34:17.596142" elapsed="0.044415"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:34:17.596142" elapsed="0.044415"/>
</kw>
<status status="PASS" start="2025-06-11T15:34:17.595143" elapsed="0.045414"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:34:17.692229" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:34:17.640557" elapsed="0.051672"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:34:17.692229" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:34:17.692229" elapsed="0.464439"/>
</kw>
<msg time="2025-06-11T15:34:18.156668" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:34:17.692229" elapsed="0.464439"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:34:18.157673" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:34:17.595143" elapsed="0.562530"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:34:20.158040" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:34:18.157673" elapsed="2.000367"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:34:38.556381" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:34:20.158040" elapsed="18.399266"/>
</kw>
<msg time="2025-06-11T15:34:38.557306" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:34:20.158040" elapsed="18.399266"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:34:38.557306" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:34:56.870117" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:34:38.557306" elapsed="18.312811"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:34:56.920065" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:34:56.870639" elapsed="0.049426"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:34:56.920065" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:34:56.921077" elapsed="0.464016"/>
</kw>
<msg time="2025-06-11T15:34:57.385093" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:34:56.921077" elapsed="0.464016"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:34:57.385093" elapsed="0.001029"/>
</kw>
<status status="PASS" start="2025-06-11T15:34:56.870117" elapsed="0.516005"/>
</kw>
<status status="PASS" start="2025-06-11T15:34:17.593142" elapsed="39.792980"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:35:29.578437" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_153516.png</msg>
<msg time="2025-06-11T15:35:29.579460" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:34:59

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.18s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.020s
Ajustement: -20.3ms
Corrélation initiale: 0.461
Original length: 802469, Recorded length: 802469
Best lag: -854 samples (-0.019 seconds)
Final lengths - Original: 802469, Aligned: 802469
Décalage temporel final: -0.019 secondes

=== Résultats ===
Décalage temporel: -0.019 secondes
         snr: 5.7392
 correlation: 0.8592
         mse: 0.0087
        rmse: 0.0934
energy_ratio: 0.8642
    max_diff: 1.0553
   mean_diff: 0.0604
         mos: 3.8606
     clarity: 1.0246
  clarity_db: 0.1054

=== Résultat: SUCCÈS ===
SNR: 5.74 dB (seuil: 5 dB)
Corrélation: 0.859 (seuil: 0.8)
MOS: 3.86/5 (seuil: 2.5)
Clarté: 1.025 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:35:29.579460" level="INFO">${test_passed} = True</msg>
<msg time="2025-06-11T15:35:29.579460" level="INFO">${metrics} = {'snr': 5.739243174700681, 'correlation': 0.8592009717835394, 'mse': 0.008723306946804923, 'rmse': 0.0933986453156839, 'energy_ratio': 0.8641909414709888, 'max_diff': 1.0553445509626034, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:34:57.386122" elapsed="32.193338"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:35:29.579460" level="INFO">SNR: 5.739243174700681 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:35:29.579460" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:35:29.580439" level="INFO">Corrélation: 0.8592009717835394 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:35:29.579460" elapsed="0.000979"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:35:29.580439" level="INFO">MOS: 3.8606108931282748/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:35:29.580439" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:35:29.581456" level="INFO">Clarté: 1.0245768321522668 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:35:29.580439" elapsed="0.001017"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:35:29.581456" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:35:29.581456" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:35:29.582438" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:35:29.581456" elapsed="0.000982"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:35:29.583456" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:35:29.582438" elapsed="0.001018"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:35:29.583456" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:35:29.583456" elapsed="0.000893"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:35:29.584349" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:35:29.584349" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:35:29.584349" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:35:29.584349" elapsed="0.000531"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:35:29.584923" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:35:29.584923" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:35:29.584349" elapsed="0.000574">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:35:29.584923" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:35:29.584923" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T15:35:29.584349" elapsed="0.000574">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:35:29.584923" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:34:57.386122" elapsed="32.198801">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:35:29.584923" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:34:14.412931" elapsed="75.171992">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:35:29.584923" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:34:14.411939" elapsed="75.172984"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:35:29.584923" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:35:29.584923" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:35:29.584923" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:35:29.585941" level="INFO">${attempt} = 38</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:35:29.584923" elapsed="0.001018"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:35:29.585941" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 38/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:35:29.585941" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:35:31.586800" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:35:29.585941" elapsed="2.000859"/>
</kw>
<status status="PASS" start="2025-06-11T15:35:29.585941" elapsed="2.000859"/>
</branch>
<status status="PASS" start="2025-06-11T15:35:29.585941" elapsed="2.000859"/>
</if>
<status status="PASS" start="2025-06-11T15:35:29.584923" elapsed="2.001877"/>
</branch>
<status status="PASS" start="2025-06-11T15:35:29.584923" elapsed="2.001877"/>
</if>
<var name="${index}">36</var>
<status status="PASS" start="2025-06-11T15:34:14.411939" elapsed="77.174861"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:35:31.626408" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:35:31.587960" elapsed="0.038448"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:35:31.627409" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:35:31.627409" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:35:31.627409" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:35:31.627409" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:35:31.587960" elapsed="0.039449"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:35:31.627409" elapsed="0.050925"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:35:34.678545" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:35:31.678334" elapsed="3.000211"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:35:34.752656" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:35:34.678545" elapsed="0.074111"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:35:34.752656" elapsed="0.001016"/>
</kw>
<status status="PASS" start="2025-06-11T15:35:31.627409" elapsed="3.126263"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:35:34.754194" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:35:34.754194" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:35:34.755192" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:35:34.755192" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:35:34.754194" elapsed="0.000998"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:35:34.755192" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:35:34.755192" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:35:34.755192" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:35:34.755192" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:35:34.754194" elapsed="0.000998"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:35:34.755192" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:35:34.755192" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:35:34.756194" elapsed="0.040563"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:35:34.755192" elapsed="0.041565"/>
</kw>
<status status="PASS" start="2025-06-11T15:35:34.755192" elapsed="0.041565"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:35:34.838043" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:35:34.796757" elapsed="0.041286"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:35:34.838043" elapsed="0.000997"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:35:34.839040" elapsed="0.484648"/>
</kw>
<msg time="2025-06-11T15:35:35.323688" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:35:34.839040" elapsed="0.484648"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:35:35.323688" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:35:34.755192" elapsed="0.568496"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:35:37.324740" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:35:35.323688" elapsed="2.001052"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:35:55.731963" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:35:37.324740" elapsed="18.407223"/>
</kw>
<msg time="2025-06-11T15:35:55.731963" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:35:37.324740" elapsed="18.407223"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:35:55.732980" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:36:14.045330" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:35:55.732980" elapsed="18.312350"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:36:14.095743" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:36:14.045330" elapsed="0.050413"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:36:14.095743" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:36:14.095743" elapsed="0.464587"/>
</kw>
<msg time="2025-06-11T15:36:14.560330" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:36:14.095743" elapsed="0.464587"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:36:14.560916" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:36:14.045330" elapsed="0.515586"/>
</kw>
<status status="PASS" start="2025-06-11T15:35:34.753672" elapsed="39.807244"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:36:46.533539" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_153633.png</msg>
<msg time="2025-06-11T15:36:46.533539" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:36:16

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.15s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.055s
Ajustement: -54.6ms
Corrélation initiale: 0.351
Original length: 803038, Recorded length: 803038
Best lag: 434 samples (0.010 seconds)
Final lengths - Original: 802604, Aligned: 802604
Décalage temporel final: 0.010 secondes

=== Résultats ===
Décalage temporel: 0.010 secondes
         snr: -0.1234
 correlation: 0.4499
         mse: 0.0337
        rmse: 0.1835
energy_ratio: 0.8664
    max_diff: 1.3391
   mean_diff: 0.1239
         mos: 3.1350
     clarity: 1.0007
  clarity_db: 0.0028

=== Résultat: ÉCHEC ===
SNR: -0.12 dB (seuil: 5 dB)
Corrélation: 0.450 (seuil: 0.8)
MOS: 3.13/5 (seuil: 2.5)
Clarté: 1.001 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:36:46.533539" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:36:46.533539" level="INFO">${metrics} = {'snr': -0.12337483599478363, 'correlation': 0.4499205922075358, 'mse': 0.033674634121804235, 'rmse': 0.18350649612971262, 'energy_ratio': 0.8663868879213961, 'max_diff': 1.3391403606341528, 'mean_dif...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:36:14.560916" elapsed="31.972623"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:36:46.534553" level="INFO">SNR: -0.12337483599478363 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:36:46.533539" elapsed="0.001014"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:36:46.534553" level="INFO">Corrélation: 0.4499205922075358 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:36:46.534553" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:36:46.535569" level="INFO">MOS: 3.1349697172092514/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:36:46.534553" elapsed="0.001016"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:36:46.535569" level="INFO">Clarté: 1.0006504992329772 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:36:46.535569" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:36:46.536536" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:36:46.535569" elapsed="0.000967"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:36:46.536536" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:36:46.536536" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:36:46.537595" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:36:46.536536" elapsed="0.001059"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:36:46.537595" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:36:46.537595" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:36:46.538582" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:36:46.537595" elapsed="0.000987"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:36:46.538582" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:36:46.538582" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:36:46.538582" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:36:46.538582" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:36:46.538582" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:36:46.539582" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:36:46.539582" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T15:36:46.538582" elapsed="0.001000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:36:46.539582" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:36:14.560916" elapsed="31.978666">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:36:46.539582" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:35:31.586800" elapsed="74.952782">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:36:46.539582" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:35:31.586800" elapsed="74.952782"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:36:46.539582" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:36:46.539582" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:36:46.539582" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:36:46.540617" level="INFO">${attempt} = 39</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:36:46.539582" elapsed="0.001035"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:36:46.540617" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 39/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:36:46.540617" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:36:48.540794" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:36:46.540617" elapsed="2.000177"/>
</kw>
<status status="PASS" start="2025-06-11T15:36:46.540617" elapsed="2.000177"/>
</branch>
<status status="PASS" start="2025-06-11T15:36:46.540617" elapsed="2.000177"/>
</if>
<status status="PASS" start="2025-06-11T15:36:46.539582" elapsed="2.001212"/>
</branch>
<status status="PASS" start="2025-06-11T15:36:46.539582" elapsed="2.001212"/>
</if>
<var name="${index}">37</var>
<status status="PASS" start="2025-06-11T15:35:31.586800" elapsed="76.953994"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:36:48.580995" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:36:48.542053" elapsed="0.038942"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:36:48.582025" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:36:48.580995" elapsed="0.001030"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:36:48.582546" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:36:48.582025" elapsed="0.000521"/>
</kw>
<status status="PASS" start="2025-06-11T15:36:48.540794" elapsed="0.041752"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:36:48.582546" elapsed="0.048474"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:36:51.632455" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:36:48.631020" elapsed="3.001435"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:36:51.712141" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:36:51.632455" elapsed="0.079686"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:36:51.712141" elapsed="0.000519"/>
</kw>
<status status="PASS" start="2025-06-11T15:36:48.582546" elapsed="3.130114"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:36:51.713180" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:36:51.712660" elapsed="0.000520"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:36:51.713708" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:36:51.713708" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:36:51.713180" elapsed="0.000528"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:36:51.713708" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:36:51.713708" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:36:51.713708" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:36:51.713708" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:36:51.713180" elapsed="0.000528"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:36:51.713708" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:36:51.713708" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:36:51.714705" elapsed="0.051111"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:36:51.714705" elapsed="0.051111"/>
</kw>
<status status="PASS" start="2025-06-11T15:36:51.714705" elapsed="0.051111"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:36:51.817221" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:36:51.766834" elapsed="0.050387"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:36:51.818238" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:36:51.818238" elapsed="0.467413"/>
</kw>
<msg time="2025-06-11T15:36:52.285651" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:36:51.818238" elapsed="0.467413"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:36:52.285651" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:36:51.714705" elapsed="0.570946"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:36:54.285795" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:36:52.285651" elapsed="2.000144"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:37:12.699622" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:36:54.285795" elapsed="18.413827"/>
</kw>
<msg time="2025-06-11T15:37:12.699622" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:36:54.285795" elapsed="18.413827"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:37:12.700186" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:37:31.013233" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:37:12.700186" elapsed="18.313047"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:37:31.057827" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:37:31.013233" elapsed="0.044594"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:37:31.057827" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:37:31.058828" elapsed="0.471873"/>
</kw>
<msg time="2025-06-11T15:37:31.530701" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:37:31.057827" elapsed="0.472874"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:37:31.530701" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:37:31.013233" elapsed="0.517468"/>
</kw>
<status status="PASS" start="2025-06-11T15:36:51.712660" elapsed="39.818041"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:38:03.945612" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_153750.png</msg>
<msg time="2025-06-11T15:38:03.945612" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:37:33

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.15s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.045s
Ajustement: -45.3ms
Corrélation initiale: 0.828
Original length: 802495, Recorded length: 802495
Best lag: 0 samples (0.000 seconds)
Final lengths - Original: 802495, Aligned: 802495
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 4.8812
 correlation: 0.8281
         mse: 0.0106
        rmse: 0.1031
energy_ratio: 0.8675
    max_diff: 1.0421
   mean_diff: 0.0720
         mos: 3.7871
     clarity: 0.9985
  clarity_db: -0.0065

=== Résultat: SUCCÈS ===
SNR: 4.88 dB (seuil: 5 dB)
Corrélation: 0.828 (seuil: 0.8)
MOS: 3.79/5 (seuil: 2.5)
Clarté: 0.998 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:38:03.945612" level="INFO">${test_passed} = True</msg>
<msg time="2025-06-11T15:38:03.945612" level="INFO">${metrics} = {'snr': 4.881233987819127, 'correlation': 0.8280588626331603, 'mse': 0.010629287609346273, 'rmse': 0.10309843650291828, 'energy_ratio': 0.8674790794730189, 'max_diff': 1.0420776537197043, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:37:31.530701" elapsed="32.414911"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:38:03.945612" level="INFO">SNR: 4.881233987819127 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:38:03.945612" elapsed="0.001001"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:38:03.946613" level="INFO">Corrélation: 0.8280588626331603 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:38:03.946613" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:38:03.946613" level="INFO">MOS: 3.787115903293163/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:38:03.946613" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:38:03.947614" level="INFO">Clarté: 0.9984965905171714 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:38:03.946613" elapsed="0.001001"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:38:03.947614" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:38:03.947614" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:38:03.948629" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:38:03.947614" elapsed="0.001015"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:38:03.949670" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:38:03.948629" elapsed="0.001041"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:38:03.950188" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:38:03.949670" elapsed="0.000518"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:38:03.950188" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:38:03.950188" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:38:03.950188" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:38:03.950188" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:38:03.950188" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:38:03.950188" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:38:03.950188" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:38:03.950188" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:38:03.950188" elapsed="0.001015"/>
</branch>
<status status="FAIL" start="2025-06-11T15:38:03.950188" elapsed="0.001015">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:38:03.951203" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:37:31.530701" elapsed="32.420502">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:38:03.951203" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:36:48.540794" elapsed="75.410409">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:38:03.951203" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:36:48.540794" elapsed="75.410409"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:38:03.951203" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:38:03.951203" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:38:03.951203" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:38:03.951203" level="INFO">${attempt} = 40</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:38:03.951203" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:38:03.951203" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 40/40</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:38:03.951203" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:38:05.952548" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:38:03.952226" elapsed="2.000322"/>
</kw>
<status status="PASS" start="2025-06-11T15:38:03.951203" elapsed="2.001345"/>
</branch>
<status status="PASS" start="2025-06-11T15:38:03.951203" elapsed="2.001345"/>
</if>
<status status="PASS" start="2025-06-11T15:38:03.951203" elapsed="2.001345"/>
</branch>
<status status="PASS" start="2025-06-11T15:38:03.951203" elapsed="2.001345"/>
</if>
<var name="${index}">38</var>
<status status="PASS" start="2025-06-11T15:36:48.540794" elapsed="77.411754"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T15:38:05.993207" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T15:38:05.952548" elapsed="0.040659"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T15:38:05.993207" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T15:38:05.993207" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T15:38:05.993207" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T15:38:05.993207" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:38:05.952548" elapsed="0.041659"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:38:05.994207" elapsed="0.044431"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:38:09.038848" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:38:06.038638" elapsed="3.000210"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:38:09.123741" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:38:09.038848" elapsed="0.084893"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:38:09.124719" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:38:05.994207" elapsed="3.130512"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:38:09.125475" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:38:09.124719" elapsed="0.000756"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T15:38:09.125475" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T15:38:09.125475" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T15:38:09.125475" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T15:38:09.126485" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T15:38:09.125475" elapsed="0.001010"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T15:38:09.126485" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T15:38:09.126485" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T15:38:09.125475" elapsed="0.001010"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:38:09.126485" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:38:09.126485" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:38:09.127492" elapsed="0.044363"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:38:09.127492" elapsed="0.044363"/>
</kw>
<status status="PASS" start="2025-06-11T15:38:09.127492" elapsed="0.044363"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:38:09.225066" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:38:09.171855" elapsed="0.054209"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:38:09.226064" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:38:09.226064" elapsed="0.470953"/>
</kw>
<msg time="2025-06-11T15:38:09.697017" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:38:09.226064" elapsed="0.470953"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:38:09.698015" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:38:09.126485" elapsed="0.571530"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:38:11.698115" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:38:09.698015" elapsed="2.000100"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T15:38:30.090397" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:38:11.698115" elapsed="18.392282"/>
</kw>
<msg time="2025-06-11T15:38:30.090397" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:38:11.698115" elapsed="18.392282"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:38:30.090397" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:38:48.402775" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:38:30.090397" elapsed="18.312378"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:38:48.457282" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:38:48.402775" elapsed="0.054507"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:38:48.457282" elapsed="0.000999"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:38:48.458281" elapsed="0.464276"/>
</kw>
<msg time="2025-06-11T15:38:48.923556" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:38:48.458281" elapsed="0.465275"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:38:48.923556" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:38:48.402775" elapsed="0.520781"/>
</kw>
<status status="PASS" start="2025-06-11T15:38:09.124719" elapsed="39.798837"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T15:39:21.206577" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_153907.png</msg>
<msg time="2025-06-11T15:39:21.206577" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 15:38:50

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.032s
Ajustement: -31.9ms
Corrélation initiale: 0.426
Original length: 802064, Recorded length: 802064
Best lag: -430 samples (-0.010 seconds)
Final lengths - Original: 802064, Aligned: 802064
Décalage temporel final: -0.010 secondes

=== Résultats ===
Décalage temporel: -0.010 secondes
         snr: 0.9393
 correlation: 0.5701
         mse: 0.0263
        rmse: 0.1622
energy_ratio: 0.8675
    max_diff: 1.2259
   mean_diff: 0.1095
         mos: 3.3192
     clarity: 0.9979
  clarity_db: -0.0092

=== Résultat: ÉCHEC ===
SNR: 0.94 dB (seuil: 5 dB)
Corrélation: 0.570 (seuil: 0.8)
MOS: 3.32/5 (seuil: 2.5)
Clarté: 0.998 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:39:21.206577" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:39:21.206577" level="INFO">${metrics} = {'snr': 0.9392987837446075, 'correlation': 0.5700991008716086, 'mse': 0.0263114771987509, 'rmse': 0.16220812926222564, 'energy_ratio': 0.8674626784040758, 'max_diff': 1.2258825141066507, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:38:48.923556" elapsed="32.283021"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:39:21.207583" level="INFO">SNR: 0.9392987837446075 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:39:21.207583" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:39:21.208158" level="INFO">Corrélation: 0.5700991008716086 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:39:21.208122" elapsed="0.000036"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:39:21.208696" level="INFO">MOS: 3.3191577717498513/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:39:21.208158" elapsed="0.000538"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:39:21.209204" level="INFO">Clarté: 0.997889082795114 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:39:21.208696" elapsed="0.000519"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:39:21.209215" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:39:21.209215" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:39:21.210232" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:39:21.209215" elapsed="0.001017"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:39:21.210232" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:39:21.210232" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:39:21.211370" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:39:21.210232" elapsed="0.001138"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:39:21.211370" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:39:21.211370" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:39:21.211370" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:39:21.211370" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:39:21.212283" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:39:21.211370" elapsed="0.000913">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T15:39:21.211370" elapsed="0.000913">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:39:21.212283" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:39:21.212283" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T15:39:21.211370" elapsed="0.000913">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:39:21.212283" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T15:38:48.923556" elapsed="32.288727">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:39:21.212283" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T15:38:05.952548" elapsed="75.259735">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T15:39:21.213267" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:38:05.952548" elapsed="75.260719"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:39:21.213267" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T15:39:21.213267" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:39:21.213267" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T15:39:21.213267" level="INFO">${attempt} = 41</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T15:39:21.213267" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:39:21.213267" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="NOT RUN" start="2025-06-11T15:39:21.213267" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:39:21.213267" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-06-11T15:39:21.213267" elapsed="0.000000"/>
</if>
<status status="PASS" start="2025-06-11T15:39:21.213267" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-06-11T15:39:21.213267" elapsed="0.000000"/>
</if>
<var name="${index}">39</var>
<status status="PASS" start="2025-06-11T15:38:05.952548" elapsed="75.260719"/>
</iter>
<var>${index}</var>
<value>${MAX_RETRIES}</value>
<status status="PASS" start="2025-06-11T14:47:53.104827" elapsed="3088.108440"/>
</for>
<if>
<branch type="IF" condition="not ${test_status}">
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T15:39:21.214266" level="FAIL">Le test Test Audio Recording And Playback a échoué après 40 tentatives</msg>
<arg>Le test ${test_name} a échoué après ${MAX_RETRIES} tentatives</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T15:39:21.213267" elapsed="0.000999">Le test Test Audio Recording And Playback a échoué après 40 tentatives</status>
</kw>
<status status="FAIL" start="2025-06-11T15:39:21.213267" elapsed="0.000999">Le test Test Audio Recording And Playback a échoué après 40 tentatives</status>
</branch>
<status status="FAIL" start="2025-06-11T15:39:21.213267" elapsed="0.000999">Le test Test Audio Recording And Playback a échoué après 40 tentatives</status>
</if>
<arg>Verify Audio Recording</arg>
<arg>Test Audio Recording And Playback</arg>
<status status="FAIL" start="2025-06-11T14:47:53.104208" elapsed="3088.110058">Le test Test Audio Recording And Playback a échoué après 40 tentatives</status>
</kw>
<doc>Verifies audio recording and playback functionality
- Navigates to audio recording app
- Records audio for a specified duration
- Plays back the recorded audio
- Supports both French and English interfaces</doc>
<tag>audio</tag>
<tag>playback</tag>
<tag>recording</tag>
<status status="FAIL" start="2025-06-11T14:47:53.097302" elapsed="3088.116964">Le test Test Audio Recording And Playback a échoué après 40 tentatives</status>
</test>
<test id="s1-t3" name="Test Audio Player And Playback" line="250">
<kw name="Navigate To Audio Player App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.AudioPlayerActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T15:39:21.214266" elapsed="0.058578"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:39:24.273982" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:39:21.273844" elapsed="3.000138"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T15:39:24.363511" level="INFO">${current_activity} = com.example.audioapplicationtest/.AudioPlayerActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T15:39:24.273982" elapsed="0.089529"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.AudioPlayerActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T15:39:24.363511" elapsed="0.001000"/>
</kw>
<status status="PASS" start="2025-06-11T15:39:21.214266" elapsed="3.150245"/>
</kw>
<kw name="Record Audio" owner="Integration">
<msg time="2025-06-11T15:39:24.369184" level="INFO">✅ Enregistrement audio réussi : Enregistrement audio démarré</msg>
<msg time="2025-06-11T15:39:24.369184" level="INFO">${recording_success} = True</msg>
<var>${recording_success}</var>
<arg>${driver}</arg>
<arg>23</arg>
<doc>Enregistre l'audio du système via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T15:39:24.364511" elapsed="0.004673"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${recording_success}</arg>
<arg>L'enregistrement audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:39:24.369752" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:39:25.370279" level="INFO">Slept 1 second.</msg>
<arg>1s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:39:24.369752" elapsed="1.000527"/>
</kw>
<kw name="Click Play Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:39:25.370279" elapsed="0.058702"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T15:39:25.370279" elapsed="0.058702"/>
</kw>
<status status="PASS" start="2025-06-11T15:39:25.370279" elapsed="0.058702"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T15:39:25.487414" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="PLAY TEST WAV"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T15:39:25.428981" elapsed="0.058433"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton PLAY TEST WAV n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:39:25.487414" elapsed="0.000791"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="PLAY TEST WAV"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T15:39:25.488205" elapsed="0.470070"/>
</kw>
<msg time="2025-06-11T15:39:25.958275" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="PLAY TEST WAV"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:39:25.488205" elapsed="0.470070"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T15:39:25.958813" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T15:39:25.370279" elapsed="0.588534"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T15:39:47.959895" level="INFO">Slept 22 seconds.</msg>
<arg>22s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T15:39:25.958813" elapsed="22.001082"/>
</kw>
<kw name="Compare Audio Files Play">
<kw name="Compare With Latest Recorded Play" owner="TestAudio">
<msg time="2025-06-11T15:40:20.226401" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_lecture_20250611_154006.png</msg>
<msg time="2025-06-11T15:40:20.226401" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_playback.wav
Date du test: 2025-06-11 15:39:50

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 23.00s -&gt; Segment actif: 18.39s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: 0.039s
Ajustement: 38.5ms
Corrélation initiale: 0.393
Original length: 807552, Recorded length: 807552
Best lag: 851 samples (0.019 seconds)
Final lengths - Original: 806701, Aligned: 806701
Décalage temporel final: 0.019 secondes

=== Résultats ===
Décalage temporel: 0.019 secondes
         snr: 1.9179
 correlation: 0.6790
         mse: 0.0212
        rmse: 0.1457
energy_ratio: 1.0033
    max_diff: 1.1237
   mean_diff: 0.0765
         mos: 3.4915
     clarity: 1.1341
  clarity_db: 0.5465

=== Résultat: ÉCHEC ===
SNR: 1.92 dB (seuil: 5 dB)
Corrélation: 0.679 (seuil: 0.8)
MOS: 3.49/5 (seuil: 2.5)
Clarté: 1.134 (seuil: 0.7)</msg>
<msg time="2025-06-11T15:40:20.226401" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T15:40:20.226401" level="INFO">${metrics} = {'snr': 1.9178611368356144, 'correlation': 0.6790257589738442, 'mse': 0.0212250071119734, 'rmse': 0.14568804725156212, 'energy_ratio': 1.0032830978984908, 'max_diff': 1.1236522986153326, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio lu via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio lu
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T15:39:47.959895" elapsed="32.266506"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:40:20.226401" level="INFO">SNR: 1.9178611368356144 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:40:20.226401" elapsed="0.000997"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:40:20.227398" level="INFO">Corrélation: 0.6790257589738442 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:40:20.227398" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:40:20.227398" level="INFO">MOS: 3.4915453562420375/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:40:20.227398" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T15:40:20.228398" level="INFO">Clarté: 1.1340965364564308 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T15:40:20.227398" elapsed="0.001000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2025-06-11T15:40:20.228398" level="FAIL">Resolving variable '${metrics['plot_file']}' failed: KeyError: 'plot_file'</msg>
<var>${plot_file}</var>
<arg>${metrics['plot_file']}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="FAIL" start="2025-06-11T15:40:20.228398" elapsed="0.000000">Resolving variable '${metrics['plot_file']}' failed: KeyError: 'plot_file'</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>&lt;img src="${plot_file}" width="800px"/&gt;</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:40:20.228398" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="NOT RUN" start="2025-06-11T15:40:20.228398" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="NOT RUN" start="2025-06-11T15:40:20.228398" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="NOT RUN" start="2025-06-11T15:40:20.228398" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="NOT RUN" start="2025-06-11T15:40:20.228398" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="NOT RUN" start="2025-06-11T15:40:20.228398" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:40:20.229400" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="NOT RUN" start="2025-06-11T15:40:20.230117" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:40:20.229400" elapsed="0.000717"/>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:40:20.230656" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:40:20.230117" elapsed="0.000539"/>
</branch>
<status status="NOT RUN" start="2025-06-11T15:40:20.229400" elapsed="0.001256"/>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T15:40:20.230656" elapsed="0.000000"/>
</return>
<arg>C:\\Users\\bahae\\Documents\\PfeProject\\test_cases${/}test.wav</arg>
<status status="FAIL" start="2025-06-11T15:39:47.959895" elapsed="32.270761">Resolving variable '${metrics['plot_file']}' failed: KeyError: 'plot_file'</status>
</kw>
<doc>Verifies audio recording and playback functionality
- Navigates to audio recording app
- Records audio for a specified duration
- Plays audio
- Supports both French and English interfaces</doc>
<tag>audio</tag>
<tag>playback</tag>
<tag>recording</tag>
<status status="FAIL" start="2025-06-11T15:39:21.214266" elapsed="59.016390">Resolving variable '${metrics['plot_file']}' failed: KeyError: 'plot_file'</status>
</test>
<kw name="Fermer Driver" type="TEARDOWN">
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Variable Should Exist" owner="BuiltIn">
<arg>${driver}</arg>
<doc>Fails unless the given variable exists within the current scope.</doc>
<status status="PASS" start="2025-06-11T15:40:20.231649" elapsed="0.000000"/>
</kw>
<msg time="2025-06-11T15:40:20.232647" level="INFO">${driver_exists} = True</msg>
<var>${driver_exists}</var>
<arg>Variable Should Exist</arg>
<arg>${driver}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:40:20.231649" elapsed="0.000998"/>
</kw>
<if>
<branch type="IF" condition="${driver_exists}">
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Close Driver" owner="Integration">
<arg>${driver}</arg>
<doc>Ferme proprement le driver Appium.</doc>
<status status="PASS" start="2025-06-11T15:40:20.232647" elapsed="0.224656"/>
</kw>
<msg time="2025-06-11T15:40:20.457303" level="INFO">${close_success} = True</msg>
<var>${close_success}</var>
<arg>Close Driver</arg>
<arg>${driver}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T15:40:20.232647" elapsed="0.224656"/>
</kw>
<if>
<branch type="IF" condition="not ${close_success}">
<kw name="Log" owner="BuiltIn">
<arg>Warning: Impossible de fermer proprement le driver Appium</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T15:40:20.458304" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T15:40:20.457303" elapsed="0.001001"/>
</branch>
<status status="PASS" start="2025-06-11T15:40:20.457303" elapsed="0.001001"/>
</if>
<status status="PASS" start="2025-06-11T15:40:20.232647" elapsed="0.225657"/>
</branch>
<status status="PASS" start="2025-06-11T15:40:20.232647" elapsed="0.225657"/>
</if>
<status status="PASS" start="2025-06-11T15:40:20.231649" elapsed="0.226655"/>
</kw>
<doc>Tests for audio recording and playback functionality
- Verifies audio recording capabilities
- Verifies audio playback capabilities
- Supports both French and English interfaces</doc>
<status status="FAIL" start="2025-06-11T14:47:43.429942" elapsed="3157.028362"/>
</suite>
<statistics>
<total>
<stat pass="1" fail="2" skip="0">All Tests</stat>
</total>
<tag>
<stat pass="0" fail="2" skip="0">audio</stat>
<stat pass="0" fail="2" skip="0">playback</stat>
<stat pass="0" fail="2" skip="0">recording</stat>
</tag>
<suite>
<stat name="TestsAudio" id="s1" pass="1" fail="2" skip="0">TestsAudio</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
