<?xml version="1.0" encoding="UTF-8"?>
<robot generator="Robot 7.2.2 (Python 3.12.5 on win32)" generated="2025-06-11T11:17:01.486145" rpa="false" schemaversion="5">
<suite id="s1" name="TestsAudio" source="C:\Users\bahae\Documents\PfeProject\test_cases\TestsAudio.robot">
<kw name="Démarrer Driver" type="SETUP">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:17:04.892543" level="INFO">Tentative d'initialisation du driver Appium...</msg>
<arg>Tentative d'initialisation du driver Appium...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:17:04.892543" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:17:04.892543" level="INFO">URL Appium: C:\Users\bahae\Documents\PfeProject\test_cases\..\config.py</msg>
<arg>URL Appium: C:\\Users\\bahae\\Documents\\PfeProject\\test_cases${/}..${/}config.py</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:17:04.892543" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Ignore Error" owner="BuiltIn">
<kw name="Setup Driver" owner="Integration">
<arg>${Device}</arg>
<doc>Initialise et retourne le driver Appium.</doc>
<status status="PASS" start="2025-06-11T11:17:04.892543" elapsed="3.093886"/>
</kw>
<msg time="2025-06-11T11:17:07.986429" level="INFO">${result} = ('PASS', &lt;appium.webdriver.webdriver.WebDriver (session="42d903e7-f40c-474c-b8e1-b253041b2b5a")&gt;)</msg>
<var>${result}</var>
<arg>setup driver</arg>
<arg>${Device}</arg>
<doc>Runs the given keyword with the given arguments and ignores possible error.</doc>
<status status="PASS" start="2025-06-11T11:17:04.892543" elapsed="3.093886"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2025-06-11T11:17:07.986429" level="INFO">${status} = PASS</msg>
<msg time="2025-06-11T11:17:07.986429" level="INFO">${driver} = &lt;appium.webdriver.webdriver.WebDriver (session="42d903e7-f40c-474c-b8e1-b253041b2b5a")&gt;</msg>
<var>${status}</var>
<var>${driver}</var>
<arg>${result}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2025-06-11T11:17:07.986429" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="'${status}' == 'FAIL'">
<kw name="Log" owner="BuiltIn">
<arg>Échec de l'initialisation du driver: ${driver}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:17:07.986429" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<arg>Impossible d'initialiser le driver Appium: ${driver}</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="NOT RUN" start="2025-06-11T11:17:07.986429" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:17:07.986429" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-06-11T11:17:07.986429" elapsed="0.000000"/>
</if>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:17:07.986429" level="INFO">${driver} = &lt;appium.webdriver.webdriver.WebDriver (session="42d903e7-f40c-474c-b8e1-b253041b2b5a")&gt;</msg>
<arg>${driver}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:17:07.986429" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:17:07.987445" level="INFO">Driver Appium initialisé avec succès</msg>
<arg>Driver Appium initialisé avec succès</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:17:07.987445" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:17:04.891579" elapsed="3.095866"/>
</kw>
<test id="s1-t1" name="Test fgdya" line="236">
<kw name="Close Activity Robot" owner="Integration">
<msg time="2025-06-11T11:17:09.259551" level="INFO">Échec de terminateApp: Message: The following required parameter is missing: ["appId"]
Known required parameters are: ["appId"]
Known optional parameters are: ["timeout"]
You have provided none
Stacktrace:
BadParametersError: The following required parameter is missing: ["appId"]
Known required parameters are: ["appId"]
Known optional parameters are: ["timeout"]
You have provided none
    at checkParams (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\protocol\protocol.js:155:9)
    at validateExecuteMethodParams (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\protocol\protocol.js:242:5)
    at AndroidUiautomator2Driver.executeMethod (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\basedriver\commands\execute.ts:34:45)
    at AndroidUiautomator2Driver.execute (C:\Users\bahae\.appium\node_modules\appium-uiautomator2-driver\node_modules\appium-android-driver\lib\commands\execute.js:17:23)
    at runCommandPromise (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\basedriver\driver.ts:115:20)
    at C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:171:12
    at AsyncLock._promiseTry (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:306:31)
    at exec (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:170:9)
    at AsyncLock.acquire (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:189:3)
    at AndroidUiautomator2Driver.executeCommand (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\basedriver\driver.ts:159:39)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at defaultBehavior (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\lib\appium.js:787:14)
    at AppiumDriver.executeWrappedCommand (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\lib\appium.js:900:16)
    at AppiumDriver.executeCommand (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\lib\appium.js:799:17)
    at asyncHandler (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\protocol\protocol.js:387:19)
Touche HOME pressée
Application com.example.audioapplicationtest fermée avec force-stop
Application com.example.audioapplicationtest fermée avec succès</msg>
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest</arg>
<doc>Version de close_activity adaptée pour Robot Framework.
Utilise plusieurs méthodes pour s'assurer que l'application est bien fermée.</doc>
<status status="PASS" start="2025-06-11T11:17:07.987445" elapsed="1.272106"/>
</kw>
<status status="PASS" start="2025-06-11T11:17:07.987445" elapsed="1.272106"/>
</test>
<test id="s1-t2" name="Test Audio Recording And Playback" line="239">
<kw name="Close Activity" owner="Integration">
<msg time="2025-06-11T11:17:09.266628" level="INFO">Erreur lors de la fermeture de l'application com.example.audioapplicationtest/.AudioPlayerActivity: Message: The following required parameter is missing: ["appId"]
Known required parameters are: ["appId"]
Known optional parameters are: ["timeout"]
You have provided none
Stacktrace:
BadParametersError: The following required parameter is missing: ["appId"]
Known required parameters are: ["appId"]
Known optional parameters are: ["timeout"]
You have provided none
    at checkParams (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\protocol\protocol.js:155:9)
    at validateExecuteMethodParams (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\protocol\protocol.js:242:5)
    at AndroidUiautomator2Driver.executeMethod (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\basedriver\commands\execute.ts:34:45)
    at AndroidUiautomator2Driver.execute (C:\Users\bahae\.appium\node_modules\appium-uiautomator2-driver\node_modules\appium-android-driver\lib\commands\execute.js:17:23)
    at runCommandPromise (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\basedriver\driver.ts:115:20)
    at C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:171:12
    at AsyncLock._promiseTry (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:306:31)
    at exec (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:170:9)
    at AsyncLock.acquire (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\async-lock\lib\index.js:189:3)
    at AndroidUiautomator2Driver.executeCommand (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\basedriver\driver.ts:159:39)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at defaultBehavior (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\lib\appium.js:787:14)
    at AppiumDriver.executeWrappedCommand (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\lib\appium.js:900:16)
    at AppiumDriver.executeCommand (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\lib\appium.js:799:17)
    at asyncHandler (C:\Users\bahae\AppData\Roaming\npm\node_modules\appium\node_modules\@appium\base-driver\lib\protocol\protocol.js:387:19)</msg>
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.AudioPlayerActivity</arg>
<doc>Ferme une application spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:17:09.260551" elapsed="0.006077"/>
</kw>
<kw name="Execute Test With Retry">
<kw name="Set Variable" owner="BuiltIn">
<msg time="2025-06-11T11:17:09.266628" level="INFO">${attempt} = 1</msg>
<var>${attempt}</var>
<arg>1</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2025-06-11T11:17:09.266628" elapsed="0.000000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2025-06-11T11:17:09.267641" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${FALSE}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="PASS" start="2025-06-11T11:17:09.266628" elapsed="0.001013"/>
</kw>
<for flavor="IN RANGE">
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:17:09.301974" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:17:09.267641" elapsed="0.034333"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:17:09.302494" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:17:09.302494" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:17:09.302494" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:17:09.302494" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:17:09.267641" elapsed="0.034853"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:17:09.302494" elapsed="0.072559"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:17:12.375163" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:17:09.375053" elapsed="3.000110"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:17:12.458811" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:17:12.375163" elapsed="0.083648"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:17:12.458811" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:17:09.302494" elapsed="3.157323"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:17:12.459817" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:17:12.459817" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:17:12.460811" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:17:12.460811" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:17:12.459817" elapsed="0.000994"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:17:12.460811" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:17:12.460811" elapsed="0.001111"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:17:12.461922" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:17:12.461922" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:17:12.459817" elapsed="0.002105"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:17:12.461922" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:17:12.461922" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:17:12.461922" elapsed="0.573362"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:17:12.461922" elapsed="0.573362"/>
</kw>
<status status="PASS" start="2025-06-11T11:17:12.461922" elapsed="0.573362"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:17:13.083692" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:17:13.035284" elapsed="0.048408"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:17:13.083692" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:17:13.083692" elapsed="0.461285"/>
</kw>
<msg time="2025-06-11T11:17:13.544977" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:17:13.083692" elapsed="0.461285"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:17:13.545980" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:17:12.461922" elapsed="1.084058"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:17:15.546433" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:17:13.545980" elapsed="2.000453"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:17:33.958961" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:17:15.546433" elapsed="18.412528"/>
</kw>
<msg time="2025-06-11T11:17:33.958961" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:17:15.546433" elapsed="18.412528"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:17:33.958961" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:17:52.271531" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:17:33.958961" elapsed="18.312570"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:17:52.327414" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:17:52.271531" elapsed="0.055883"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:17:52.327414" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:17:52.328369" elapsed="0.469497"/>
</kw>
<msg time="2025-06-11T11:17:52.797866" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:17:52.328369" elapsed="0.469497"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:17:52.797866" elapsed="0.001031"/>
</kw>
<status status="PASS" start="2025-06-11T11:17:52.271531" elapsed="0.527366"/>
</kw>
<status status="PASS" start="2025-06-11T11:17:12.459817" elapsed="40.339080"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:18:26.586718" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_111812.png</msg>
<msg time="2025-06-11T11:18:26.586718" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:17:54

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.050s
Ajustement: -49.8ms
Corrélation initiale: 0.430
Original length: 802916, Recorded length: 802916
Best lag: 426 samples (0.010 seconds)
Final lengths - Original: 802490, Aligned: 802490
Décalage temporel final: 0.010 secondes

=== Résultats ===
Décalage temporel: 0.010 secondes
         snr: 2.0968
 correlation: 0.6709
         mse: 0.0202
        rmse: 0.1421
energy_ratio: 0.8650
    max_diff: 1.3438
   mean_diff: 0.0930
         mos: 3.4827
     clarity: 0.9947
  clarity_db: -0.0229

=== Résultat: ÉCHEC ===
SNR: 2.10 dB (seuil: 5 dB)
Corrélation: 0.671 (seuil: 0.8)
MOS: 3.48/5 (seuil: 2.5)
Clarté: 0.995 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:18:26.586718" level="INFO">C:\Users\bahae\Documents\PfeProject\test_cases\TestAudio.py:338: UserWarning: Glyph 10060 (\N{CROSS MARK}) missing from font(s) DejaVu Sans.
  plt.savefig(output_file, dpi=300, bbox_inches='tight')
C:\Program Files\JetBrains\PyCharm 2024.3.2\plugins\python-ce\helpers\pycharm_matplotlib_backend\backend_interagg.py:124: UserWarning: Glyph 10060 (\N{CROSS MARK}) missing from font(s) DejaVu Sans.
  FigureCanvasAgg.draw(self)</msg>
<msg time="2025-06-11T11:18:26.586718" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:18:26.586718" level="INFO">${metrics} = {'snr': 2.0968094893055413, 'correlation': 0.670907208148431, 'mse': 0.020180413260004477, 'rmse': 0.14205778141307318, 'energy_ratio': 0.8650278713637123, 'max_diff': 1.3438119409824063, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:17:52.798897" elapsed="33.787821"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:18:26.587279" level="INFO">SNR: 2.0968094893055413 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:18:26.587246" elapsed="0.000033"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:18:26.587279" level="INFO">Corrélation: 0.670907208148431 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:18:26.587279" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:18:26.588292" level="INFO">MOS: 3.4826586884966897/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:18:26.587279" elapsed="0.001013"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:18:26.588292" level="INFO">Clarté: 0.9947480492886259 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:18:26.588292" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:18:26.589801" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:18:26.588292" elapsed="0.001509"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:18:26.590794" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:18:26.589801" elapsed="0.000993"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:18:26.590794" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:18:26.590794" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:18:26.591796" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:18:26.590794" elapsed="0.001002"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:18:26.591796" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:18:26.591796" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:18:26.593816" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:18:26.591796" elapsed="0.002020"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:18:26.593816" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:18:26.593816" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:18:26.591796" elapsed="0.002020">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:18:26.594810" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:18:26.594810" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:18:26.591796" elapsed="0.003014">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:18:26.594810" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:17:52.798897" elapsed="33.795913">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:18:26.594810" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:17:09.267641" elapsed="77.327169">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:18:26.594810" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:17:09.267641" elapsed="77.327169"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:18:26.594810" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:18:26.595442" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:18:26.594810" elapsed="0.000632"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:18:26.595442" level="INFO">${attempt} = 2</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:18:26.595442" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:18:26.595950" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 2/10</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:18:26.595442" elapsed="0.000528"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:18:28.596439" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:18:26.595970" elapsed="2.000469"/>
</kw>
<status status="PASS" start="2025-06-11T11:18:26.595442" elapsed="2.000997"/>
</branch>
<status status="PASS" start="2025-06-11T11:18:26.595442" elapsed="2.000997"/>
</if>
<status status="PASS" start="2025-06-11T11:18:26.595442" elapsed="2.000997"/>
</branch>
<status status="PASS" start="2025-06-11T11:18:26.594810" elapsed="2.001629"/>
</if>
<var name="${index}">0</var>
<status status="PASS" start="2025-06-11T11:17:09.267641" elapsed="79.328798"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:18:28.634102" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:18:28.596953" elapsed="0.037149"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:18:28.634637" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:18:28.634102" elapsed="0.000535"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:18:28.635163" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:18:28.634637" elapsed="0.000526"/>
</kw>
<status status="PASS" start="2025-06-11T11:18:28.596953" elapsed="0.038254"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:18:28.635207" elapsed="0.049937"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:18:31.685623" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:18:28.685144" elapsed="3.000479"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:18:31.769208" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:18:31.685623" elapsed="0.083585"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:18:31.769208" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:18:28.635207" elapsed="3.134001"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:18:31.770212" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:18:31.769208" elapsed="0.001004"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:18:31.770212" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:18:31.771194" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:18:31.770212" elapsed="0.000982"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:18:31.771194" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:18:31.771194" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:18:31.771194" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:18:31.771194" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:18:31.770212" elapsed="0.000982"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:18:31.771194" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:18:31.771194" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:18:31.772209" elapsed="0.050077"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:18:31.772209" elapsed="0.050077"/>
</kw>
<status status="PASS" start="2025-06-11T11:18:31.771194" elapsed="0.051092"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:18:31.871184" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:18:31.822286" elapsed="0.048898"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:18:31.871184" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:18:31.872444" elapsed="0.466495"/>
</kw>
<msg time="2025-06-11T11:18:32.339471" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:18:31.871184" elapsed="0.468287"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:18:32.339471" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:18:31.771194" elapsed="0.568277"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:18:34.339912" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:18:32.339471" elapsed="2.000441"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:18:52.756549" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:18:34.339912" elapsed="18.416637"/>
</kw>
<msg time="2025-06-11T11:18:52.756549" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:18:34.339912" elapsed="18.417621"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:18:52.757533" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:19:11.070274" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:18:52.757533" elapsed="18.312741"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:19:11.131576" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:19:11.070787" elapsed="0.060789"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:19:11.131576" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:19:11.131576" elapsed="0.469018"/>
</kw>
<msg time="2025-06-11T11:19:11.600594" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:19:11.131576" elapsed="0.469018"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:19:11.600594" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:19:11.070274" elapsed="0.531336"/>
</kw>
<status status="PASS" start="2025-06-11T11:18:31.769208" elapsed="39.832402"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:19:45.655920" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_111931.png</msg>
<msg time="2025-06-11T11:19:45.655920" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:19:13

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.15s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.052s
Ajustement: -52.2ms
Corrélation initiale: 0.179
Original length: 802937, Recorded length: 802937
Best lag: 274 samples (0.006 seconds)
Final lengths - Original: 802663, Aligned: 802663
Décalage temporel final: 0.006 secondes

=== Résultats ===
Décalage temporel: 0.006 secondes
         snr: -1.4445
 correlation: 0.2558
         mse: 0.0456
        rmse: 0.2137
energy_ratio: 0.8724
    max_diff: 1.3316
   mean_diff: 0.1565
         mos: 2.8491
     clarity: 1.0238
  clarity_db: 0.1022

=== Résultat: ÉCHEC ===
SNR: -1.44 dB (seuil: 5 dB)
Corrélation: 0.256 (seuil: 0.8)
MOS: 2.85/5 (seuil: 2.5)
Clarté: 1.024 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:19:45.656601" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:19:45.656601" level="INFO">${metrics} = {'snr': -1.4445209778546442, 'correlation': 0.2557594265651675, 'mse': 0.04564866388475637, 'rmse': 0.2136554794166449, 'energy_ratio': 0.8723705599490663, 'max_diff': 1.3316473621310623, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:19:11.601610" elapsed="34.054991"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:19:45.656601" level="INFO">SNR: -1.4445209778546442 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:19:45.656601" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:19:45.657597" level="INFO">Corrélation: 0.2557594265651675 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:19:45.656601" elapsed="0.000996"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:19:45.657597" level="INFO">MOS: 2.849130472764015/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:19:45.657597" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:19:45.658598" level="INFO">Clarté: 1.0238068854154656 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:19:45.657597" elapsed="0.001001"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:19:45.659598" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:19:45.658598" elapsed="0.001000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:19:45.659598" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:19:45.659598" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:19:45.660597" level="INFO">${mos_ok} = False</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:19:45.660597" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:19:45.661598" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:19:45.660597" elapsed="0.001001"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:19:45.661598" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:19:45.661598" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:19:45.662599" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:19:45.662599" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:19:45.662599" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:19:45.662599" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:19:45.661598" elapsed="0.001001">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:19:45.662599" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:19:45.662599" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:19:45.661598" elapsed="0.001001">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:19:45.662599" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:19:11.601610" elapsed="34.060989">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:19:45.662599" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:18:28.596953" elapsed="77.066645">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:19:45.663598" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:18:28.596953" elapsed="77.066645"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:19:45.663598" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:19:45.663598" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:19:45.663598" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:19:45.663598" level="INFO">${attempt} = 3</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:19:45.663598" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:19:45.663598" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 3/10</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:19:45.663598" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:19:47.664801" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:19:45.664597" elapsed="2.000204"/>
</kw>
<status status="PASS" start="2025-06-11T11:19:45.663598" elapsed="2.001203"/>
</branch>
<status status="PASS" start="2025-06-11T11:19:45.663598" elapsed="2.001203"/>
</if>
<status status="PASS" start="2025-06-11T11:19:45.663598" elapsed="2.001203"/>
</branch>
<status status="PASS" start="2025-06-11T11:19:45.663598" elapsed="2.001203"/>
</if>
<var name="${index}">1</var>
<status status="PASS" start="2025-06-11T11:18:28.596439" elapsed="79.068362"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:19:47.707601" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:19:47.665797" elapsed="0.041804"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:19:47.707601" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:19:47.707601" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:19:47.708600" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:19:47.708600" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:19:47.665797" elapsed="0.042803"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:19:47.708600" elapsed="0.046740"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:19:50.757503" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:19:47.756340" elapsed="3.001163"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:19:50.834594" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:19:50.757503" elapsed="0.077091"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:19:50.834594" elapsed="0.000996"/>
</kw>
<status status="PASS" start="2025-06-11T11:19:47.708600" elapsed="3.126990"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:19:50.835590" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:19:50.835590" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:19:50.836598" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:19:50.836598" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:19:50.835590" elapsed="0.001008"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:19:50.836598" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:19:50.836598" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:19:50.836598" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:19:50.836598" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:19:50.835590" elapsed="0.001008"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:19:50.837575" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:19:50.836598" elapsed="0.000977"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:19:50.837575" elapsed="0.055383"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:19:50.837575" elapsed="0.055383"/>
</kw>
<status status="PASS" start="2025-06-11T11:19:50.837575" elapsed="0.055383"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:19:50.943088" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:19:50.892958" elapsed="0.050130"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:19:50.943088" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:19:50.943610" elapsed="0.467053"/>
</kw>
<msg time="2025-06-11T11:19:51.410663" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:19:50.943610" elapsed="0.467053"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:19:51.410663" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:19:50.837575" elapsed="0.573088"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:19:53.411406" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:19:51.410663" elapsed="2.000743"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:20:11.810406" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:19:53.411406" elapsed="18.399000"/>
</kw>
<msg time="2025-06-11T11:20:11.810406" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:19:53.411406" elapsed="18.399000"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:20:11.810406" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:20:30.122592" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:20:11.810406" elapsed="18.312186"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:20:30.176640" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:20:30.122592" elapsed="0.054048"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:20:30.176640" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:20:30.176640" elapsed="0.478593"/>
</kw>
<msg time="2025-06-11T11:20:30.655233" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:20:30.176640" elapsed="0.478593"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:20:30.655233" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:20:30.122592" elapsed="0.533617"/>
</kw>
<status status="PASS" start="2025-06-11T11:19:50.835590" elapsed="39.820619"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:21:04.944877" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_112050.png</msg>
<msg time="2025-06-11T11:21:04.945673" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:20:32

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.15s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.054s
Ajustement: -54.3ms
Corrélation initiale: 0.388
Original length: 802932, Recorded length: 802932
Best lag: 428 samples (0.010 seconds)
Final lengths - Original: 802504, Aligned: 802504
Décalage temporel final: 0.010 secondes

=== Résultats ===
Décalage temporel: 0.010 secondes
         snr: -0.1171
 correlation: 0.4515
         mse: 0.0336
        rmse: 0.1833
energy_ratio: 0.8691
    max_diff: 1.1278
   mean_diff: 0.1354
         mos: 3.1371
     clarity: 1.0360
  clarity_db: 0.1534

=== Résultat: ÉCHEC ===
SNR: -0.12 dB (seuil: 5 dB)
Corrélation: 0.451 (seuil: 0.8)
MOS: 3.14/5 (seuil: 2.5)
Clarté: 1.036 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:21:04.945673" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:21:04.945673" level="INFO">${metrics} = {'snr': -0.11711119478891413, 'correlation': 0.45146400621451643, 'mse': 0.03360355032568644, 'rmse': 0.18331271184968717, 'energy_ratio': 0.8690850397535755, 'max_diff': 1.127778963505205, 'mean_diff...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:20:30.656209" elapsed="34.289464"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:21:04.946221" level="INFO">SNR: -0.11711119478891413 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:21:04.945673" elapsed="0.000548"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:21:04.946779" level="INFO">Corrélation: 0.45146400621451643 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:21:04.946221" elapsed="0.000558"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:21:04.946779" level="INFO">MOS: 3.137072359665863/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:21:04.946779" elapsed="0.000522"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:21:04.947330" level="INFO">Clarté: 1.0359646115300067 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:21:04.947330" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:21:04.947330" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:21:04.947330" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:21:04.948341" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:21:04.948341" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:21:04.949357" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:21:04.948341" elapsed="0.001016"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:21:04.949927" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:21:04.949357" elapsed="0.000570"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:21:04.949927" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:21:04.949927" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:21:04.949927" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:21:04.949927" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:21:04.949927" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:21:04.949927" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:21:04.949927" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:21:04.950933" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:21:04.949927" elapsed="0.001006"/>
</branch>
<status status="FAIL" start="2025-06-11T11:21:04.949927" elapsed="0.001006">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:21:04.950933" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:20:30.656209" elapsed="34.294724">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:21:04.950933" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:19:47.664801" elapsed="77.286132">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:21:04.950933" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:19:47.664801" elapsed="77.286132"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:21:04.950933" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:21:04.950933" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:21:04.950933" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:21:04.950933" level="INFO">${attempt} = 4</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:21:04.950933" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:21:04.950933" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 4/10</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:21:04.950933" elapsed="0.001045"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:21:06.952523" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:21:04.952010" elapsed="2.000513"/>
</kw>
<status status="PASS" start="2025-06-11T11:21:04.950933" elapsed="2.001590"/>
</branch>
<status status="PASS" start="2025-06-11T11:21:04.950933" elapsed="2.001590"/>
</if>
<status status="PASS" start="2025-06-11T11:21:04.950933" elapsed="2.001590"/>
</branch>
<status status="PASS" start="2025-06-11T11:21:04.950933" elapsed="2.001590"/>
</if>
<var name="${index}">2</var>
<status status="PASS" start="2025-06-11T11:19:47.664801" elapsed="79.287722"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:21:06.994188" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:21:06.953547" elapsed="0.040641"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:21:06.994188" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:21:06.994188" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:21:06.994803" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:21:06.994188" elapsed="0.000615"/>
</kw>
<status status="PASS" start="2025-06-11T11:21:06.952523" elapsed="0.042280"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:21:06.994803" elapsed="0.052767"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:21:10.048995" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:21:07.047570" elapsed="3.001425"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:21:10.123932" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:21:10.048995" elapsed="0.074937"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:21:10.123932" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:21:06.994803" elapsed="3.129129"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:21:10.124978" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:21:10.123932" elapsed="0.001046"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:21:10.124978" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:21:10.124978" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:21:10.124978" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:21:10.125933" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:21:10.125933" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:21:10.125933" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:21:10.125933" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:21:10.124978" elapsed="0.000955"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:21:10.125933" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:21:10.125933" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:21:10.125933" elapsed="0.047917"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:21:10.125933" elapsed="0.047917"/>
</kw>
<status status="PASS" start="2025-06-11T11:21:10.125933" elapsed="0.047917"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:21:10.220898" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:21:10.173850" elapsed="0.047048"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:21:10.220898" elapsed="0.000658"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:21:10.221556" elapsed="0.470253"/>
</kw>
<msg time="2025-06-11T11:21:10.691809" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:21:10.221556" elapsed="0.470253"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:21:10.691809" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:21:10.125933" elapsed="0.566551"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:21:12.693392" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:21:10.692484" elapsed="2.000908"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:21:31.101879" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:21:12.693392" elapsed="18.408487"/>
</kw>
<msg time="2025-06-11T11:21:31.101879" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:21:12.693392" elapsed="18.408487"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:21:31.101879" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:21:49.414339" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:21:31.101879" elapsed="18.312460"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:21:49.467276" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:21:49.414902" elapsed="0.052374"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:21:49.468308" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:21:49.468308" elapsed="0.476343"/>
</kw>
<msg time="2025-06-11T11:21:49.944651" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:21:49.468308" elapsed="0.476343"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:21:49.944651" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:21:49.414339" elapsed="0.530312"/>
</kw>
<status status="PASS" start="2025-06-11T11:21:10.123932" elapsed="39.820719"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:22:23.871107" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_112209.png</msg>
<msg time="2025-06-11T11:22:23.871107" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:21:52

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.036s
Ajustement: -35.9ms
Corrélation initiale: 0.472
Original length: 802509, Recorded length: 802509
Best lag: -439 samples (-0.010 seconds)
Final lengths - Original: 802509, Aligned: 802509
Décalage temporel final: -0.010 secondes

=== Résultats ===
Décalage temporel: -0.010 secondes
         snr: 3.7965
 correlation: 0.7791
         mse: 0.0136
        rmse: 0.1168
energy_ratio: 0.8741
    max_diff: 1.4399
   mean_diff: 0.0586
         mos: 3.6868
     clarity: 1.0356
  clarity_db: 0.1517

=== Résultat: ÉCHEC ===
SNR: 3.80 dB (seuil: 5 dB)
Corrélation: 0.779 (seuil: 0.8)
MOS: 3.69/5 (seuil: 2.5)
Clarté: 1.036 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:22:23.871107" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:22:23.871107" level="INFO">${metrics} = {'snr': 3.796520905112702, 'correlation': 0.7791433195537699, 'mse': 0.01364749366152496, 'rmse': 0.1168224878245835, 'energy_ratio': 0.8740839135134253, 'max_diff': 1.4398793871388023, 'mean_diff': 0...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:21:49.945690" elapsed="33.925417"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:22:23.872123" level="INFO">SNR: 3.796520905112702 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:22:23.871107" elapsed="0.001016"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:22:23.872123" level="INFO">Corrélation: 0.7791433195537699 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:22:23.872123" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:22:23.872123" level="INFO">MOS: 3.686832819669032/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:22:23.872123" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:22:23.873114" level="INFO">Clarté: 1.0355564417444667 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:22:23.872123" elapsed="0.000991"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:22:23.874078" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:22:23.873114" elapsed="0.000964"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:22:23.875081" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:22:23.874078" elapsed="0.001003"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:22:23.875630" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:22:23.875081" elapsed="0.000549"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:22:23.876191" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:22:23.876191" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:22:23.876191" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:22:23.876191" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:22:23.877213" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:22:23.876191" elapsed="0.001022"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:22:23.877213" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:22:23.877213" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:22:23.876191" elapsed="0.001022">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:22:23.877213" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:22:23.877213" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:22:23.876191" elapsed="0.001022">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:22:23.877213" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:21:49.944651" elapsed="33.932562">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:22:23.877213" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:21:06.952523" elapsed="76.924690">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:22:23.877213" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:21:06.952523" elapsed="76.924690"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:22:23.877213" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:22:23.878187" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:22:23.877213" elapsed="0.000974"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:22:23.878187" level="INFO">${attempt} = 5</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:22:23.878187" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:22:23.878187" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 5/10</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:22:23.878187" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:22:25.878383" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:22:23.878187" elapsed="2.000196"/>
</kw>
<status status="PASS" start="2025-06-11T11:22:23.878187" elapsed="2.000196"/>
</branch>
<status status="PASS" start="2025-06-11T11:22:23.878187" elapsed="2.000196"/>
</if>
<status status="PASS" start="2025-06-11T11:22:23.878187" elapsed="2.000196"/>
</branch>
<status status="PASS" start="2025-06-11T11:22:23.877213" elapsed="2.001170"/>
</if>
<var name="${index}">3</var>
<status status="PASS" start="2025-06-11T11:21:06.952523" elapsed="78.925860"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:22:25.916503" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:22:25.879416" elapsed="0.037087"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:22:25.916503" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:22:25.916503" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:22:25.917131" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:22:25.916503" elapsed="0.000628"/>
</kw>
<status status="PASS" start="2025-06-11T11:22:25.879416" elapsed="0.037715"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:22:25.917131" elapsed="0.044563"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:22:28.962268" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:22:25.961694" elapsed="3.000574"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:22:29.035460" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:22:28.962268" elapsed="0.073192"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:22:29.036015" elapsed="0.000039"/>
</kw>
<status status="PASS" start="2025-06-11T11:22:25.917131" elapsed="3.118923"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:22:29.036594" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:22:29.036054" elapsed="0.000558"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:22:29.036612" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:22:29.036612" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:22:29.036612" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:22:29.037642" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:22:29.036612" elapsed="0.001030"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:22:29.037642" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:22:29.037642" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:22:29.036612" elapsed="0.001030"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:22:29.037642" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:22:29.037642" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:22:29.037642" elapsed="0.054970"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:22:29.037642" elapsed="0.054970"/>
</kw>
<status status="PASS" start="2025-06-11T11:22:29.037642" elapsed="0.054970"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:22:29.142335" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:22:29.092612" elapsed="0.049723"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:22:29.142335" elapsed="0.000974"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:22:29.143309" elapsed="0.469658"/>
</kw>
<msg time="2025-06-11T11:22:29.612967" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:22:29.143309" elapsed="0.469658"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:22:29.612967" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:22:29.037642" elapsed="0.576355"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:22:31.614360" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:22:29.613997" elapsed="2.000363"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:22:50.021933" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:22:31.614360" elapsed="18.407573"/>
</kw>
<msg time="2025-06-11T11:22:50.021933" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:22:31.614360" elapsed="18.407573"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:22:50.021933" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:23:08.334685" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:22:50.021933" elapsed="18.312752"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:23:08.390209" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:23:08.334685" elapsed="0.055524"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:23:08.390209" elapsed="0.000577"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:23:08.390786" elapsed="0.466876"/>
</kw>
<msg time="2025-06-11T11:23:08.857662" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:23:08.390786" elapsed="0.466876"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:23:08.857662" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:23:08.334685" elapsed="0.522977"/>
</kw>
<status status="PASS" start="2025-06-11T11:22:29.036054" elapsed="39.821608"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:23:44.072339" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_112329.png</msg>
<msg time="2025-06-11T11:23:44.072339" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:23:10

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.052s
Ajustement: -52.0ms
Corrélation initiale: 0.486
Original length: 802928, Recorded length: 802928
Best lag: 440 samples (0.010 seconds)
Final lengths - Original: 802488, Aligned: 802488
Décalage temporel final: 0.010 secondes

=== Résultats ===
Décalage temporel: 0.010 secondes
         snr: 2.6103
 correlation: 0.7076
         mse: 0.0179
        rmse: 0.1339
energy_ratio: 0.8630
    max_diff: 1.0034
   mean_diff: 0.0867
         mos: 3.5536
     clarity: 1.0076
  clarity_db: 0.0328

=== Résultat: ÉCHEC ===
SNR: 2.61 dB (seuil: 5 dB)
Corrélation: 0.708 (seuil: 0.8)
MOS: 3.55/5 (seuil: 2.5)
Clarté: 1.008 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:23:44.072339" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:23:44.072855" level="INFO">${metrics} = {'snr': 2.610307939297239, 'correlation': 0.7076447471918024, 'mse': 0.01792982683004295, 'rmse': 0.1339023033037257, 'energy_ratio': 0.8630455873176599, 'max_diff': 1.0033812310416612, 'mean_diff': 0...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:23:08.857662" elapsed="35.215193"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:23:44.072855" level="INFO">SNR: 2.610307939297239 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:23:44.072855" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:23:44.072855" level="INFO">Corrélation: 0.7076447471918024 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:23:44.072855" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:23:44.073869" level="INFO">MOS: 3.553586014202052/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:23:44.073869" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:23:44.073869" level="INFO">Clarté: 1.0075837552588625 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:23:44.073869" elapsed="0.001018"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:23:44.074887" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:23:44.074887" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:23:44.075897" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:23:44.074887" elapsed="0.001010"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:23:44.076501" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:23:44.075897" elapsed="0.000604"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:23:44.077023" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:23:44.077023" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:23:44.077023" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:23:44.077023" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:23:44.078018" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:23:44.078018" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:23:44.078018" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:23:44.078018" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:23:44.078018" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:23:44.079046" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:23:44.078018" elapsed="0.001028"/>
</branch>
<status status="FAIL" start="2025-06-11T11:23:44.077023" elapsed="0.002023">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:23:44.079046" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:23:08.857662" elapsed="35.221384">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:23:44.079046" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:22:25.878383" elapsed="78.200663">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:23:44.079046" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:22:25.878383" elapsed="78.200663"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:23:44.079046" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:23:44.079046" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:23:44.079046" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:23:44.080020" level="INFO">${attempt} = 6</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:23:44.080020" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:23:44.080020" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 6/10</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:23:44.080020" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:23:46.080976" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:23:44.080020" elapsed="2.000956"/>
</kw>
<status status="PASS" start="2025-06-11T11:23:44.080020" elapsed="2.000956"/>
</branch>
<status status="PASS" start="2025-06-11T11:23:44.080020" elapsed="2.000956"/>
</if>
<status status="PASS" start="2025-06-11T11:23:44.079046" elapsed="2.001930"/>
</branch>
<status status="PASS" start="2025-06-11T11:23:44.079046" elapsed="2.001930"/>
</if>
<var name="${index}">4</var>
<status status="PASS" start="2025-06-11T11:22:25.878383" elapsed="80.202593"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:23:46.117539" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:23:46.081975" elapsed="0.035564"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:23:46.118539" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:23:46.117539" elapsed="0.001000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:23:46.118539" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:23:46.118539" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:23:46.081975" elapsed="0.036564"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:23:46.119563" elapsed="0.052545"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:23:49.173328" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:23:46.172661" elapsed="3.000667"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:23:49.250708" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:23:49.173328" elapsed="0.077380"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:23:49.250708" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:23:46.118539" elapsed="3.132169"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:23:49.251724" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:23:49.251724" elapsed="0.000521"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:23:49.252290" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:23:49.252290" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:23:49.252290" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:23:49.253254" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:23:49.253254" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:23:49.253254" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:23:49.253254" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:23:49.252290" elapsed="0.000964"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:23:49.253254" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:23:49.253254" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:23:49.254256" elapsed="0.047539"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:23:49.254256" elapsed="0.047539"/>
</kw>
<status status="PASS" start="2025-06-11T11:23:49.253254" elapsed="0.049526"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:23:49.346793" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:23:49.302780" elapsed="0.044013"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:23:49.346793" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:23:49.347874" elapsed="0.463712"/>
</kw>
<msg time="2025-06-11T11:23:49.811586" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:23:49.347832" elapsed="0.463754"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:23:49.811586" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:23:49.253254" elapsed="0.558332"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:23:51.812486" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:23:49.811586" elapsed="2.000900"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:24:10.231976" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:23:51.812486" elapsed="18.419490"/>
</kw>
<msg time="2025-06-11T11:24:10.231976" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:23:51.812486" elapsed="18.419490"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:24:10.231976" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:24:28.545267" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:24:10.233060" elapsed="18.312207"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:24:28.595545" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:24:28.545267" elapsed="0.050278"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:24:28.596544" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:24:28.596544" elapsed="0.461866"/>
</kw>
<msg time="2025-06-11T11:24:29.058410" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:24:28.596544" elapsed="0.461866"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:24:29.058410" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:24:28.545267" elapsed="0.513143"/>
</kw>
<status status="PASS" start="2025-06-11T11:23:49.251724" elapsed="39.806686"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:25:02.658742" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_112447.png</msg>
<msg time="2025-06-11T11:25:02.658742" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:24:31

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.15s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.043s
Ajustement: -43.0ms
Corrélation initiale: 0.520
Original length: 802466, Recorded length: 802466
Best lag: -1 samples (-0.000 seconds)
Final lengths - Original: 802466, Aligned: 802466
Décalage temporel final: -0.000 secondes

=== Résultats ===
Décalage temporel: -0.000 secondes
         snr: 0.4695
 correlation: 0.5211
         mse: 0.0294
        rmse: 0.1713
energy_ratio: 0.8693
    max_diff: 1.0227
   mean_diff: 0.1230
         mos: 3.2442
     clarity: 1.0124
  clarity_db: 0.0536

=== Résultat: ÉCHEC ===
SNR: 0.47 dB (seuil: 5 dB)
Corrélation: 0.521 (seuil: 0.8)
MOS: 3.24/5 (seuil: 2.5)
Clarté: 1.012 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:25:02.658742" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:25:02.659743" level="INFO">${metrics} = {'snr': 0.46953564462779274, 'correlation': 0.5211407402768857, 'mse': 0.029353017151674675, 'rmse': 0.17132722244779047, 'energy_ratio': 0.8693207634379582, 'max_diff': 1.0227240293912785, 'mean_diff...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:24:29.059381" elapsed="33.600362"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:25:02.659743" level="INFO">SNR: 0.46953564462779274 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:25:02.659743" elapsed="0.001000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:25:02.660743" level="INFO">Corrélation: 0.5211407402768857 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:25:02.660743" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:25:02.661743" level="INFO">MOS: 3.2441503141173746/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:25:02.661743" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:25:02.661743" level="INFO">Clarté: 1.0124270012292755 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:25:02.661743" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:25:02.662743" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:25:02.661743" elapsed="0.001000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:25:02.663743" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:25:02.662743" elapsed="0.001000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:25:02.663743" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:25:02.663743" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:25:02.664759" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:25:02.663743" elapsed="0.001016"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:25:02.664759" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:25:02.664759" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:25:02.665745" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:25:02.664759" elapsed="0.000986"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:25:02.665745" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:25:02.665745" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:25:02.664759" elapsed="0.000986">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:25:02.665745" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:25:02.665745" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:25:02.664759" elapsed="0.000986">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:25:02.665745" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:24:29.058410" elapsed="33.607335">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:25:02.665745" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:23:46.081975" elapsed="76.583770">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:25:02.666802" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:23:46.080976" elapsed="76.585826"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:25:02.666802" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:25:02.666802" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:25:02.666802" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:25:02.666802" level="INFO">${attempt} = 7</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:25:02.666802" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:25:02.666802" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 7/10</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:25:02.666802" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:25:04.667954" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:25:02.666802" elapsed="2.001152"/>
</kw>
<status status="PASS" start="2025-06-11T11:25:02.666802" elapsed="2.001152"/>
</branch>
<status status="PASS" start="2025-06-11T11:25:02.666802" elapsed="2.001152"/>
</if>
<status status="PASS" start="2025-06-11T11:25:02.666802" elapsed="2.001152"/>
</branch>
<status status="PASS" start="2025-06-11T11:25:02.666802" elapsed="2.001152"/>
</if>
<var name="${index}">5</var>
<status status="PASS" start="2025-06-11T11:23:46.080976" elapsed="78.586978"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:25:04.703918" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:25:04.669075" elapsed="0.034843"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:25:04.704946" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:25:04.703918" elapsed="0.001028"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:25:04.704946" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:25:04.704946" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:25:04.668514" elapsed="0.036432"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:25:04.704946" elapsed="0.050793"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:25:07.756073" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:25:04.755739" elapsed="3.000334"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:25:07.837071" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:25:07.756073" elapsed="0.080998"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:25:07.837071" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:25:04.704946" elapsed="3.132125"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:25:07.837071" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:25:07.837071" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:25:07.838332" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:25:07.838332" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:25:07.838303" elapsed="0.000029"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:25:07.838332" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:25:07.838332" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:25:07.838332" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:25:07.838332" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:25:07.837071" elapsed="0.001261"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:25:07.839316" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:25:07.839316" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:25:07.839316" elapsed="0.054166"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:25:07.839316" elapsed="0.054166"/>
</kw>
<status status="PASS" start="2025-06-11T11:25:07.839316" elapsed="0.054166"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:25:07.946930" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:25:07.893482" elapsed="0.053448"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:25:07.946930" elapsed="0.000591"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:25:07.947521" elapsed="0.467509"/>
</kw>
<msg time="2025-06-11T11:25:08.415030" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:25:07.947521" elapsed="0.467509"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:25:08.415030" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:25:07.839316" elapsed="0.575714"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:25:10.416261" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:25:08.416030" elapsed="2.000231"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:25:28.819130" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:25:10.416261" elapsed="18.403960"/>
</kw>
<msg time="2025-06-11T11:25:28.820221" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:25:10.416261" elapsed="18.403960"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:25:28.820221" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:25:47.132797" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:25:28.820221" elapsed="18.312576"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:25:47.177902" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:25:47.132797" elapsed="0.045105"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:25:47.177902" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:25:47.178493" elapsed="0.468423"/>
</kw>
<msg time="2025-06-11T11:25:47.646916" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:25:47.177902" elapsed="0.469014"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:25:47.646916" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:25:47.132797" elapsed="0.514119"/>
</kw>
<status status="PASS" start="2025-06-11T11:25:07.837071" elapsed="39.809845"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:26:20.898367" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_112606.png</msg>
<msg time="2025-06-11T11:26:20.898367" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:25:49

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.046s
Ajustement: -45.8ms
Corrélation initiale: 0.612
Original length: 802749, Recorded length: 802749
Best lag: 1 samples (0.000 seconds)
Final lengths - Original: 802748, Aligned: 802748
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 1.3946
 correlation: 0.6130
         mse: 0.0237
        rmse: 0.1541
energy_ratio: 0.8668
    max_diff: 1.2864
   mean_diff: 0.0916
         mos: 3.3914
     clarity: 1.0062
  clarity_db: 0.0269

=== Résultat: ÉCHEC ===
SNR: 1.39 dB (seuil: 5 dB)
Corrélation: 0.613 (seuil: 0.8)
MOS: 3.39/5 (seuil: 2.5)
Clarté: 1.006 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:26:20.898367" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:26:20.898367" level="INFO">${metrics} = {'snr': 1.3945642511552239, 'correlation': 0.6130059362853987, 'mse': 0.023741311168704014, 'rmse': 0.15408215720421367, 'energy_ratio': 0.8667591093831357, 'max_diff': 1.2863519958956506, 'mean_diff'...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:25:47.647951" elapsed="33.250416"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:26:20.899369" level="INFO">SNR: 1.3945642511552239 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:26:20.899369" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:26:20.899369" level="INFO">Corrélation: 0.6130059362853987 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:26:20.899369" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:26:20.900385" level="INFO">MOS: 3.391389693588687/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:26:20.899369" elapsed="0.001016"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:26:20.900915" level="INFO">Clarté: 1.0062171262311228 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:26:20.900385" elapsed="0.000585"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:26:20.900970" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:26:20.900970" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:26:20.901958" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:26:20.900970" elapsed="0.000988"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:26:20.901958" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:26:20.901958" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:26:20.902973" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:26:20.901958" elapsed="0.001015"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:26:20.903504" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:26:20.902973" elapsed="0.000531"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:26:20.903537" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:26:20.903537" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:26:20.903537" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:26:20.903537" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:26:20.903537" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:26:20.903537" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:26:20.903537" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:26:20.903537" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:26:20.903537" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:25:47.647951" elapsed="33.255586">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:26:20.903537" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:25:04.668514" elapsed="76.235023">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:26:20.903537" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:25:04.668514" elapsed="76.235023"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:26:20.904547" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:26:20.904547" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:26:20.903537" elapsed="0.001010"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:26:20.904547" level="INFO">${attempt} = 8</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:26:20.904547" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:26:20.904547" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 8/10</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:26:20.904547" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:26:22.904628" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:26:20.904547" elapsed="2.000081"/>
</kw>
<status status="PASS" start="2025-06-11T11:26:20.904547" elapsed="2.000081"/>
</branch>
<status status="PASS" start="2025-06-11T11:26:20.904547" elapsed="2.000081"/>
</if>
<status status="PASS" start="2025-06-11T11:26:20.904547" elapsed="2.000081"/>
</branch>
<status status="PASS" start="2025-06-11T11:26:20.903537" elapsed="2.001091"/>
</if>
<var name="${index}">6</var>
<status status="PASS" start="2025-06-11T11:25:04.667954" elapsed="78.236674"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:26:22.940423" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:26:22.905664" elapsed="0.034759"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:26:22.940423" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:26:22.940423" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:26:22.940423" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:26:22.940423" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:26:22.905664" elapsed="0.034759"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:26:22.941421" elapsed="0.042949"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:26:25.984788" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:26:22.984370" elapsed="3.000418"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:26:26.072391" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:26:25.984788" elapsed="0.087603"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:26:26.072391" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:26:22.940423" elapsed="3.131968"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:26:26.073391" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:26:26.073391" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:26:26.073391" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:26:26.073391" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:26:26.073391" elapsed="0.000000"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:26:26.074423" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:26:26.074423" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:26:26.074423" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:26:26.074423" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:26:26.073391" elapsed="0.001032"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:26:26.074423" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:26:26.074423" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:26:26.074423" elapsed="0.048504"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:26:26.074423" elapsed="0.048504"/>
</kw>
<status status="PASS" start="2025-06-11T11:26:26.074423" elapsed="0.048504"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:26:26.173562" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:26:26.122927" elapsed="0.050635"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:26:26.174566" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:26:26.174566" elapsed="0.473007"/>
</kw>
<msg time="2025-06-11T11:26:26.647573" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:26:26.174566" elapsed="0.473007"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:26:26.647573" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:26:26.074423" elapsed="0.573150"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:26:28.648030" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:26:26.647573" elapsed="2.000457"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:26:47.084263" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:26:28.648030" elapsed="18.436233"/>
</kw>
<msg time="2025-06-11T11:26:47.084263" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:26:28.648030" elapsed="18.436233"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:26:47.084263" elapsed="0.000523"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:27:05.397061" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:26:47.084786" elapsed="18.312275"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:27:05.445473" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:27:05.397061" elapsed="0.048412"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:27:05.446489" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:27:05.446489" elapsed="0.455454"/>
</kw>
<msg time="2025-06-11T11:27:05.901943" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:27:05.446489" elapsed="0.455454"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:27:05.901943" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:27:05.397061" elapsed="0.504882"/>
</kw>
<status status="PASS" start="2025-06-11T11:26:26.072391" elapsed="39.829552"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:27:39.248953" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_112725.png</msg>
<msg time="2025-06-11T11:27:39.248953" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:27:07

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.19s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.041s
Ajustement: -40.8ms
Corrélation initiale: 0.702
Original length: 803929, Recorded length: 803929
Best lag: 0 samples (0.000 seconds)
Final lengths - Original: 803929, Aligned: 803929
Décalage temporel final: 0.000 secondes

=== Résultats ===
Décalage temporel: 0.000 secondes
         snr: 2.5119
 correlation: 0.7021
         mse: 0.0184
        rmse: 0.1357
energy_ratio: 0.8719
    max_diff: 1.0173
   mean_diff: 0.0910
         mos: 3.5429
     clarity: 1.0271
  clarity_db: 0.1163

=== Résultat: ÉCHEC ===
SNR: 2.51 dB (seuil: 5 dB)
Corrélation: 0.702 (seuil: 0.8)
MOS: 3.54/5 (seuil: 2.5)
Clarté: 1.027 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:27:39.248953" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:27:39.248953" level="INFO">${metrics} = {'snr': 2.5118966836923455, 'correlation': 0.7020605802053743, 'mse': 0.018417068996041865, 'rmse': 0.13570950223194345, 'energy_ratio': 0.871937831063085, 'max_diff': 1.0172952405657794, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:27:05.902948" elapsed="33.346005"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:27:39.250009" level="INFO">SNR: 2.5118966836923455 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:27:39.248953" elapsed="0.001056"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:27:39.250009" level="INFO">Corrélation: 0.7020605802053743 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:27:39.250009" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:27:39.251022" level="INFO">MOS: 3.542948563594143/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:27:39.250009" elapsed="0.001013"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:27:39.251022" level="INFO">Clarté: 1.027141898667167 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:27:39.251022" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:27:39.252039" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:27:39.251022" elapsed="0.001017"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:27:39.252598" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:27:39.252039" elapsed="0.000559"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:27:39.252598" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:27:39.252598" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:27:39.253612" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:27:39.252598" elapsed="0.001014"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:27:39.253612" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:27:39.253612" elapsed="0.000560"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:27:39.254191" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:27:39.254191" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:27:39.254191" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:27:39.254191" elapsed="0.000508">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:27:39.254191" elapsed="0.000525">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:27:39.254716" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:27:39.254716" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:27:39.254191" elapsed="0.000525">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:27:39.254716" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:27:05.902948" elapsed="33.351768">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:27:39.254716" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:26:22.904628" elapsed="76.350088">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:27:39.254716" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:26:22.904628" elapsed="76.350088"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:27:39.254716" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:27:39.254716" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:27:39.254716" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:27:39.254716" level="INFO">${attempt} = 9</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:27:39.254716" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:27:39.255735" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 9/10</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:27:39.254716" elapsed="0.001019"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:27:41.256695" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:27:39.255735" elapsed="2.000960"/>
</kw>
<status status="PASS" start="2025-06-11T11:27:39.254716" elapsed="2.001979"/>
</branch>
<status status="PASS" start="2025-06-11T11:27:39.254716" elapsed="2.001979"/>
</if>
<status status="PASS" start="2025-06-11T11:27:39.254716" elapsed="2.001979"/>
</branch>
<status status="PASS" start="2025-06-11T11:27:39.254716" elapsed="2.001979"/>
</if>
<var name="${index}">7</var>
<status status="PASS" start="2025-06-11T11:26:22.904628" elapsed="78.352067"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:27:41.293754" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:27:41.257214" elapsed="0.036540"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:27:41.293754" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:27:41.293754" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:27:41.294680" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:27:41.293754" elapsed="0.000926"/>
</kw>
<status status="PASS" start="2025-06-11T11:27:41.257214" elapsed="0.037466"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:27:41.294680" elapsed="0.043870"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:27:44.340074" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:27:41.338550" elapsed="3.001524"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:27:44.414172" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:27:44.340074" elapsed="0.074098"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:27:44.414172" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:27:41.294680" elapsed="3.120492"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:27:44.415172" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:27:44.415172" elapsed="0.000000"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:27:44.416226" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:27:44.416226" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:27:44.415172" elapsed="0.001054"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:27:44.416226" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:27:44.416226" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:27:44.416226" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:27:44.416226" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:27:44.415172" elapsed="0.001054"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:27:44.416226" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:27:44.416226" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:27:44.417237" elapsed="0.042484"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:27:44.417237" elapsed="0.042484"/>
</kw>
<status status="PASS" start="2025-06-11T11:27:44.417237" elapsed="0.042484"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:27:44.510112" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:27:44.459721" elapsed="0.050391"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:27:44.510112" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:27:44.511113" elapsed="0.463267"/>
</kw>
<msg time="2025-06-11T11:27:44.974380" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:27:44.511113" elapsed="0.463267"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:27:44.974380" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:27:44.417237" elapsed="0.557143"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:27:46.975804" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:27:44.974380" elapsed="2.001424"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:28:05.394120" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:27:46.975804" elapsed="18.418316"/>
</kw>
<msg time="2025-06-11T11:28:05.394120" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:27:46.975804" elapsed="18.418316"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:28:05.394120" elapsed="0.000974"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:28:23.707506" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:28:05.395094" elapsed="18.312412"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:28:23.762166" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:28:23.707506" elapsed="0.054660"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:28:23.762166" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:28:23.762166" elapsed="0.463966"/>
</kw>
<msg time="2025-06-11T11:28:24.226132" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:28:23.762166" elapsed="0.463966"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:28:24.226132" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:28:23.707506" elapsed="0.519626"/>
</kw>
<status status="PASS" start="2025-06-11T11:27:44.415172" elapsed="39.811960"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:28:59.814501" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_112844.png</msg>
<msg time="2025-06-11T11:28:59.814501" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:28:26

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.036s
Ajustement: -36.2ms
Corrélation initiale: 0.421
Original length: 802443, Recorded length: 802443
Best lag: -438 samples (-0.010 seconds)
Final lengths - Original: 802443, Aligned: 802443
Décalage temporel final: -0.010 secondes

=== Résultats ===
Décalage temporel: -0.010 secondes
         snr: 2.7290
 correlation: 0.7166
         mse: 0.0174
        rmse: 0.1321
energy_ratio: 0.8708
    max_diff: 1.1230
   mean_diff: 0.0856
         mos: 3.5690
     clarity: 1.0152
  clarity_db: 0.0654

=== Résultat: ÉCHEC ===
SNR: 2.73 dB (seuil: 5 dB)
Corrélation: 0.717 (seuil: 0.8)
MOS: 3.57/5 (seuil: 2.5)
Clarté: 1.015 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:28:59.814501" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:28:59.814501" level="INFO">${metrics} = {'snr': 2.7290137411397515, 'correlation': 0.7165580738631434, 'mse': 0.01744364385630644, 'rmse': 0.1320743875863388, 'energy_ratio': 0.8707664055717449, 'max_diff': 1.1229601622221874, 'mean_diff': ...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:28:24.227132" elapsed="35.587369"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:28:59.815662" level="INFO">SNR: 2.7290137411397515 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:28:59.815009" elapsed="0.000653"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:28:59.815662" level="INFO">Corrélation: 0.7165580738631434 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:28:59.815662" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:28:59.815662" level="INFO">MOS: 3.5690302382813623/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:28:59.815662" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:28:59.816651" level="INFO">Clarté: 1.0151708901265046 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:28:59.816651" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:28:59.816651" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:28:59.816651" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:28:59.817668" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:28:59.817668" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:28:59.818653" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:28:59.817668" elapsed="0.000985"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:28:59.819220" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:28:59.818653" elapsed="0.000567"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:28:59.819220" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:28:59.819220" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:28:59.819220" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:28:59.819220" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:28:59.820223" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:28:59.819220" elapsed="0.001003">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:28:59.819220" elapsed="0.001003">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:28:59.820223" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:28:59.820223" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:28:59.819220" elapsed="0.001003">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:28:59.820223" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:28:24.227132" elapsed="35.593091">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:28:59.820223" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:27:41.257214" elapsed="78.563009">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:28:59.820223" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:27:41.257214" elapsed="78.563009"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:28:59.820223" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:28:59.820223" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:28:59.820223" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:28:59.821208" level="INFO">${attempt} = 10</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:28:59.821208" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:28:59.821208" level="INFO">Test Test Audio Recording And Playback échoué - Tentative 10/10</msg>
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:28:59.821208" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:29:01.822460" level="INFO">Slept 2 seconds.</msg>
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:28:59.821208" elapsed="2.001252"/>
</kw>
<status status="PASS" start="2025-06-11T11:28:59.821208" elapsed="2.001252"/>
</branch>
<status status="PASS" start="2025-06-11T11:28:59.821208" elapsed="2.001252"/>
</if>
<status status="PASS" start="2025-06-11T11:28:59.820223" elapsed="2.002237"/>
</branch>
<status status="PASS" start="2025-06-11T11:28:59.820223" elapsed="2.002237"/>
</if>
<var name="${index}">8</var>
<status status="PASS" start="2025-06-11T11:27:41.257214" elapsed="80.565246"/>
</iter>
<iter>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Verify Audio Recording">
<kw name="Initialize Language Settings">
<kw name="Get System Language" owner="Integration">
<msg time="2025-06-11T11:29:01.860218" level="INFO">${lang} = eng</msg>
<var>${lang}</var>
<arg>${Device}</arg>
<status status="PASS" start="2025-06-11T11:29:01.823024" elapsed="0.037194"/>
</kw>
<kw name="Set Variable If" owner="BuiltIn">
<msg time="2025-06-11T11:29:01.860218" level="INFO">${lang_dict} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<var>${lang_dict}</var>
<arg>'${lang}' == 'fr'</arg>
<arg>${LANG_FR}</arg>
<arg>${LANG_EN}</arg>
<doc>Sets variable based on the given condition.</doc>
<status status="PASS" start="2025-06-11T11:29:01.860218" elapsed="0.000000"/>
</kw>
<kw name="Set Suite Variable" owner="BuiltIn">
<msg time="2025-06-11T11:29:01.860218" level="INFO">${LANG_DICT} = {'System': 'System', 'Setting': 'Settings', 'Audio': 'Recording', 'Record': 'START', 'Stop': 'STOP', 'Play': 'Play'}</msg>
<arg>${LANG_DICT}</arg>
<arg>${lang_dict}</arg>
<doc>Makes a variable available everywhere within the scope of the current suite.</doc>
<status status="PASS" start="2025-06-11T11:29:01.860218" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:29:01.823024" elapsed="0.037194"/>
</kw>
<kw name="Navigate To Audio App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:29:01.861207" elapsed="0.044680"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:29:04.907034" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:29:01.905887" elapsed="3.001147"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:29:04.988384" level="INFO">${current_activity} = com.example.audioapplicationtest/.MainActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:29:04.907034" elapsed="0.081350"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.MainActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:29:04.988384" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:29:01.861207" elapsed="3.127177"/>
</kw>
<kw name="Start Audio Recording And Playback">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:29:04.988384" level="INFO">Démarrage de l'enregistrement audio...</msg>
<arg>Démarrage de l'enregistrement audio...</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:29:04.988384" elapsed="0.001002"/>
</kw>
<kw name="Get Audio File Duration">
<kw name="Get Audio Duration" owner="Integration">
<msg time="2025-06-11T11:29:04.990384" level="INFO">✅ Durée du fichier audio C:\Users\bahae\Documents\PfeProject\test_cases\test.wav: 18.31 secondes</msg>
<msg time="2025-06-11T11:29:04.990384" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Obtient la durée d'un fichier audio en secondes.</doc>
<status status="PASS" start="2025-06-11T11:29:04.989386" elapsed="0.000998"/>
</kw>
<kw name="Should Not Be Equal As Numbers" owner="BuiltIn">
<msg time="2025-06-11T11:29:04.990384" level="INFO">Argument types are:
&lt;class 'float'&gt;
&lt;class 'str'&gt;</msg>
<arg>${duration}</arg>
<arg>0</arg>
<arg>Impossible d'obtenir la durée du fichier audio</arg>
<doc>Fails if objects are equal after converting them to real numbers.</doc>
<status status="PASS" start="2025-06-11T11:29:04.990384" elapsed="0.000000"/>
</kw>
<return>
<value>${duration}</value>
<status status="PASS" start="2025-06-11T11:29:04.990384" elapsed="0.000000"/>
</return>
<msg time="2025-06-11T11:29:04.990384" level="INFO">${duration} = 18.311836734693877</msg>
<var>${duration}</var>
<arg>${audio_file}</arg>
<status status="PASS" start="2025-06-11T11:29:04.989386" elapsed="0.000998"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:29:04.990384" level="INFO">Durée du fichier audio à lire: 18.311836734693877 secondes</msg>
<arg>Durée du fichier audio à lire: ${duration} secondes</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:29:04.990384" elapsed="0.000000"/>
</kw>
<kw name="Click Record Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:29:04.991405" elapsed="0.067626"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:29:04.991405" elapsed="0.067626"/>
</kw>
<status status="PASS" start="2025-06-11T11:29:04.991405" elapsed="0.067626"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:29:05.114441" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:29:05.059031" elapsed="0.055410"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton START n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:29:05.114441" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:29:05.115439" elapsed="0.485384"/>
</kw>
<msg time="2025-06-11T11:29:05.601826" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:29:05.114441" elapsed="0.487385"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:29:05.601826" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:29:04.990384" elapsed="0.611442"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:29:07.602597" level="INFO">Slept 2 seconds.</msg>
<arg>2s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:29:05.601826" elapsed="2.000771"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Play Audio" owner="Integration">
<msg time="2025-06-11T11:29:26.001490" level="INFO">✅ Lecture audio réussie : Lecture du fichier test.wav terminée</msg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Joue un fichier audio via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:29:07.602597" elapsed="18.398893"/>
</kw>
<msg time="2025-06-11T11:29:26.001490" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>play_audio</arg>
<arg>${driver}</arg>
<arg>${audio_file}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:29:07.602597" elapsed="18.398893"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>La lecture audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:29:26.001490" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:29:44.315199" level="INFO">Slept 18 seconds 312 milliseconds.</msg>
<arg>${duration}s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:29:26.001490" elapsed="18.313709"/>
</kw>
<kw name="Click Stop Button">
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:29:44.364445" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:29:44.315764" elapsed="0.048681"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton STOP n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:29:44.365468" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:29:44.365468" elapsed="0.474400"/>
</kw>
<msg time="2025-06-11T11:29:44.839868" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="STOP"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:29:44.365468" elapsed="0.474400"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton STOP</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:29:44.839868" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:29:44.315199" elapsed="0.524669"/>
</kw>
<status status="PASS" start="2025-06-11T11:29:04.988384" elapsed="39.851484"/>
</kw>
<kw name="Compare Audio Files">
<kw name="Compare With Latest Recorded" owner="TestAudio">
<msg time="2025-06-11T11:30:18.797831" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_enregistrement_20250611_113004.png</msg>
<msg time="2025-06-11T11:30:18.797831" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_download.wav
Date du test: 2025-06-11 11:29:46

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 39.25s -&gt; Segment actif: 18.16s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: -0.036s
Ajustement: -36.4ms
Corrélation initiale: 0.622
Original length: 802489, Recorded length: 802489
Best lag: -1 samples (-0.000 seconds)
Final lengths - Original: 802489, Aligned: 802489
Décalage temporel final: -0.000 secondes

=== Résultats ===
Décalage temporel: -0.000 secondes
         snr: 1.5054
 correlation: 0.6237
         mse: 0.0231
        rmse: 0.1521
energy_ratio: 0.8716
    max_diff: 1.0426
   mean_diff: 0.0996
         mos: 3.4086
     clarity: 1.0335
  clarity_db: 0.1432

=== Résultat: ÉCHEC ===
SNR: 1.51 dB (seuil: 5 dB)
Corrélation: 0.624 (seuil: 0.8)
MOS: 3.41/5 (seuil: 2.5)
Clarté: 1.034 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:30:18.798852" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:30:18.798852" level="INFO">${metrics} = {'snr': 1.5053870391980024, 'correlation': 0.6236895436358667, 'mse': 0.023124378602970157, 'rmse': 0.15206702010288148, 'energy_ratio': 0.8716463976192407, 'max_diff': 1.0425510526943746, 'mean_diff'...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio enregistré via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio enregistré
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:29:44.840867" elapsed="33.957985"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:30:18.798852" level="INFO">SNR: 1.5053870391980024 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:30:18.798852" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:30:18.799858" level="INFO">Corrélation: 0.6236895436358667 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:30:18.798852" elapsed="0.001006"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:30:18.800422" level="INFO">MOS: 3.40864293393096/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:30:18.799858" elapsed="0.000564"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:30:18.800422" level="INFO">Clarté: 1.0335269140395238 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:30:18.800422" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:30:18.801432" level="INFO">${snr_ok} = False</msg>
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:30:18.800422" elapsed="0.001010"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:30:18.801432" level="INFO">${correlation_ok} = False</msg>
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:30:18.801432" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:30:18.802474" level="INFO">${mos_ok} = True</msg>
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:30:18.801432" elapsed="0.001042"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:30:18.802474" level="INFO">${clarity_ok} = True</msg>
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:30:18.802474" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:30:18.803482" level="INFO">${test_passed} = False</msg>
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:30:18.803482" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:30:18.803482" level="INFO">❌ Test échoué - Métriques critiques non satisfaites</msg>
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:30:18.803482" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:30:18.803482" level="FAIL">Test audio échoué - Vérifiez les métriques dans les logs</msg>
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:30:18.803482" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<status status="FAIL" start="2025-06-11T11:30:18.803482" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:30:18.803482" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:30:18.803482" elapsed="0.000000"/>
</branch>
<status status="FAIL" start="2025-06-11T11:30:18.803482" elapsed="0.000000">Test audio échoué - Vérifiez les métriques dans les logs</status>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:30:18.803482" elapsed="0.000000"/>
</return>
<var>${result}</var>
<arg>${DEFAULT_OUTPUT_FILE}</arg>
<status status="FAIL" start="2025-06-11T11:29:44.839868" elapsed="33.963614">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>Résultat de la comparaison: ${result}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:30:18.803482" elapsed="0.000000"/>
</kw>
<status status="FAIL" start="2025-06-11T11:29:01.823024" elapsed="76.980458">Test audio échoué - Vérifiez les métriques dans les logs</status>
</kw>
<msg time="2025-06-11T11:30:18.804501" level="INFO">${test_status} = False</msg>
<var>${test_status}</var>
<arg>${test_keyword}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:29:01.823024" elapsed="76.981477"/>
</kw>
<if>
<branch type="IF" condition="${test_status}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} réussi</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:30:18.804501" elapsed="0.000000"/>
</kw>
<kw name="Exit For Loop" owner="BuiltIn">
<doc>Stops executing the enclosing FOR loop.</doc>
<status status="NOT RUN" start="2025-06-11T11:30:18.804501" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:30:18.804501" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Evaluate" owner="BuiltIn">
<msg time="2025-06-11T11:30:18.804501" level="INFO">${attempt} = 11</msg>
<var>${attempt}</var>
<arg>${attempt} + 1</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="PASS" start="2025-06-11T11:30:18.804501" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${attempt} &lt;= ${MAX_RETRIES}">
<kw name="Log" owner="BuiltIn">
<arg>Test ${test_name} échoué - Tentative ${attempt}/${MAX_RETRIES}</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:30:18.804501" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<arg>${RETRY_DELAY}</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="NOT RUN" start="2025-06-11T11:30:18.804501" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:30:18.804501" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-06-11T11:30:18.804501" elapsed="0.000000"/>
</if>
<status status="PASS" start="2025-06-11T11:30:18.804501" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-06-11T11:30:18.804501" elapsed="0.000000"/>
</if>
<var name="${index}">9</var>
<status status="PASS" start="2025-06-11T11:29:01.822460" elapsed="76.982041"/>
</iter>
<var>${index}</var>
<value>${MAX_RETRIES}</value>
<status status="PASS" start="2025-06-11T11:17:09.267641" elapsed="789.536860"/>
</for>
<if>
<branch type="IF" condition="not ${test_status}">
<kw name="Fail" owner="BuiltIn">
<msg time="2025-06-11T11:30:18.805492" level="FAIL">Le test Test Audio Recording And Playback a échoué après 10 tentatives</msg>
<arg>Le test ${test_name} a échoué après ${MAX_RETRIES} tentatives</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="FAIL" start="2025-06-11T11:30:18.804501" elapsed="0.000991">Le test Test Audio Recording And Playback a échoué après 10 tentatives</status>
</kw>
<status status="FAIL" start="2025-06-11T11:30:18.804501" elapsed="0.000991">Le test Test Audio Recording And Playback a échoué après 10 tentatives</status>
</branch>
<status status="FAIL" start="2025-06-11T11:30:18.804501" elapsed="0.000991">Le test Test Audio Recording And Playback a échoué après 10 tentatives</status>
</if>
<arg>Verify Audio Recording</arg>
<arg>Test Audio Recording And Playback</arg>
<status status="FAIL" start="2025-06-11T11:17:09.266628" elapsed="789.538864">Le test Test Audio Recording And Playback a échoué après 10 tentatives</status>
</kw>
<doc>Verifies audio recording and playback functionality
- Navigates to audio recording app
- Records audio for a specified duration
- Plays back the recorded audio
- Supports both French and English interfaces</doc>
<tag>audio</tag>
<tag>playback</tag>
<tag>recording</tag>
<status status="FAIL" start="2025-06-11T11:17:09.259551" elapsed="789.545941">Le test Test Audio Recording And Playback a échoué après 10 tentatives</status>
</test>
<test id="s1-t3" name="Test Audio Player And Playback" line="250">
<kw name="Navigate To Audio Player App">
<kw name="Start Activity Code" owner="Integration">
<arg>${driver}</arg>
<arg>com.example.audioapplicationtest/.AudioPlayerActivity</arg>
<doc>Lance une activité spécifique sur un appareil Android via Appium.</doc>
<status status="PASS" start="2025-06-11T11:30:18.806468" elapsed="0.067316"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:30:21.874125" level="INFO">Slept 3 seconds.</msg>
<arg>3s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:30:18.873784" elapsed="3.000341"/>
</kw>
<kw name="Print Activity" owner="Integration">
<msg time="2025-06-11T11:30:21.951996" level="INFO">${current_activity} = com.example.audioapplicationtest/.AudioPlayerActivity</msg>
<var>${current_activity}</var>
<arg>${driver}</arg>
<doc>Retourne l'activité complète sous la forme 'com.android.car.messenger/.ui.launcher.MessageLauncherActivity'.</doc>
<status status="PASS" start="2025-06-11T11:30:21.874125" elapsed="0.077871"/>
</kw>
<kw name="Should Contain" owner="BuiltIn">
<arg>${current_activity}</arg>
<arg>com.example.audioapplicationtest/.AudioPlayerActivity</arg>
<arg>L'application n'est pas correctement lancée</arg>
<doc>Fails if ``container`` does not contain ``item`` one or more times.</doc>
<status status="PASS" start="2025-06-11T11:30:21.951996" elapsed="0.000000"/>
</kw>
<status status="PASS" start="2025-06-11T11:30:18.806468" elapsed="3.145528"/>
</kw>
<kw name="Record Audio" owner="Integration">
<msg time="2025-06-11T11:30:21.956038" level="INFO">✅ Enregistrement audio réussi : Enregistrement audio démarré</msg>
<msg time="2025-06-11T11:30:21.956038" level="INFO">${recording_success} = True</msg>
<var>${recording_success}</var>
<arg>${driver}</arg>
<arg>23</arg>
<doc>Enregistre l'audio du système via l'API Flask.</doc>
<status status="PASS" start="2025-06-11T11:30:21.951996" elapsed="0.004042"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${recording_success}</arg>
<arg>L'enregistrement audio a échoué</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:30:21.956038" elapsed="0.000000"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:30:22.956795" level="INFO">Slept 1 second.</msg>
<arg>1s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:30:21.956038" elapsed="1.000757"/>
</kw>
<kw name="Click Play Button">
<kw name="Wait For Record Button">
<kw name="Wait Until Keyword Succeeds" owner="BuiltIn">
<kw name="Check Element Exists" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:30:22.956795" elapsed="0.058017"/>
</kw>
<arg>${timeout}</arg>
<arg>${QUICK_WAIT}</arg>
<arg>Check Element Exists</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="START"]</arg>
<doc>Runs the specified keyword and retries if it fails.</doc>
<status status="PASS" start="2025-06-11T11:30:22.956795" elapsed="0.058017"/>
</kw>
<status status="PASS" start="2025-06-11T11:30:22.956795" elapsed="0.058017"/>
</kw>
<kw name="Check Element Exists" owner="Integration">
<msg time="2025-06-11T11:30:23.062522" level="INFO">${button_exists} = True</msg>
<var>${button_exists}</var>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="PLAY TEST WAV"]</arg>
<doc>Vérifie si un élément existe en utilisant le XPath donné.</doc>
<status status="PASS" start="2025-06-11T11:30:23.014812" elapsed="0.047710"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${button_exists}</arg>
<arg>Le bouton PLAY TEST WAV n'est pas visible</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:30:23.062522" elapsed="0.000000"/>
</kw>
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Click Element By Xpath Bounds" owner="Integration">
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="PLAY TEST WAV"]</arg>
<doc>Trouve un élément par XPath et clique dessus en utilisant ses bounds.</doc>
<status status="PASS" start="2025-06-11T11:30:23.062522" elapsed="0.482889"/>
</kw>
<msg time="2025-06-11T11:30:23.545411" level="INFO">${success} = True</msg>
<var>${success}</var>
<arg>click_element_by_xpath_bounds</arg>
<arg>${driver}</arg>
<arg>//android.widget.Button[@text="PLAY TEST WAV"]</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:30:23.062522" elapsed="0.482889"/>
</kw>
<kw name="Should Be True" owner="BuiltIn">
<arg>${success}</arg>
<arg>Impossible de cliquer sur le bouton START</arg>
<doc>Fails if the given condition is not true.</doc>
<status status="PASS" start="2025-06-11T11:30:23.545411" elapsed="0.001000"/>
</kw>
<status status="PASS" start="2025-06-11T11:30:22.956795" elapsed="0.589616"/>
</kw>
<kw name="Sleep" owner="BuiltIn">
<msg time="2025-06-11T11:30:45.547036" level="INFO">Slept 22 seconds.</msg>
<arg>22s</arg>
<doc>Pauses the test executed for the given time.</doc>
<status status="PASS" start="2025-06-11T11:30:23.546411" elapsed="22.000625"/>
</kw>
<kw name="Compare Audio Files Play">
<kw name="Compare With Latest Recorded Play" owner="TestAudio">
<msg time="2025-06-11T11:31:19.558652" level="INFO">Graphiques sauvegardés dans: C:\Users\bahae\Documents\PfeProject\test_cases\..\log\plots\audio_comparison_lecture_20250611_113104.png</msg>
<msg time="2025-06-11T11:31:19.559300" level="INFO">============================= Début du test audio ==============================
Original: C:\Users\bahae\Documents\PfeProject\test_cases\test.wav
Enregistré: latest_playback.wav
Date du test: 2025-06-11 11:30:47

Original - Durée: 18.31s -&gt; Segment actif: 18.31s
Enregistré - Durée: 23.00s -&gt; Segment actif: 18.37s
Recherche du meilleur alignement...
Alignement initial trouvé, ajustement fin...

Détails de l'alignement:
Position originale: 0.000s
Position enregistrée: 0.045s
Ajustement: 45.5ms
Corrélation initiale: 0.399
Original length: 807552, Recorded length: 807552
Best lag: -434 samples (-0.010 seconds)
Final lengths - Original: 807552, Aligned: 807552
Décalage temporel final: -0.010 secondes

=== Résultats ===
Décalage temporel: -0.010 secondes
         snr: -0.3164
 correlation: 0.4616
         mse: 0.0355
        rmse: 0.1885
energy_ratio: 0.9976
    max_diff: 1.6104
   mean_diff: 0.1254
         mos: 3.1412
     clarity: 1.0986
  clarity_db: 0.4083

=== Résultat: ÉCHEC ===
SNR: -0.32 dB (seuil: 5 dB)
Corrélation: 0.462 (seuil: 0.8)
MOS: 3.14/5 (seuil: 2.5)
Clarté: 1.099 (seuil: 0.7)</msg>
<msg time="2025-06-11T11:31:19.559300" level="INFO">${test_passed} = False</msg>
<msg time="2025-06-11T11:31:19.559300" level="INFO">${metrics} = {'snr': -0.3164149121078311, 'correlation': 0.46157237321562494, 'mse': 0.03552797503358955, 'rmse': 0.1884886602254617, 'energy_ratio': 0.997624569062394, 'max_diff': 1.6104480031868436, 'mean_diff':...</msg>
<var>${test_passed}</var>
<var>${metrics}</var>
<arg>${original_audio}</arg>
<doc>Télécharge le dernier audio lu via l'API Flask et le compare à l'original.
:param original_audio: Chemin du fichier original (wav)
:param latest_audio_path: Chemin où sauvegarder le fichier téléchargé
:param api_url: URL de l'API Flask pour récupérer le dernier audio lu
:return: (test_passed, metrics)</doc>
<status status="PASS" start="2025-06-11T11:30:45.547036" elapsed="34.012264"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:31:19.559825" level="INFO">SNR: -0.3164149121078311 dB (seuil: 20 dB)</msg>
<arg>SNR: ${metrics['snr']} dB (seuil: 20 dB)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:31:19.559300" elapsed="0.000525"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:31:19.559825" level="INFO">Corrélation: 0.46157237321562494 (seuil: 0.9)</msg>
<arg>Corrélation: ${metrics['correlation']} (seuil: 0.9)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:31:19.559825" elapsed="0.000000"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:31:19.560851" level="INFO">MOS: 3.1412302513744366/5 (seuil: 3.0)</msg>
<arg>MOS: ${metrics['mos']}/5 (seuil: 3.0)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:31:19.559825" elapsed="0.001026"/>
</kw>
<kw name="Log" owner="BuiltIn">
<msg time="2025-06-11T11:31:19.560851" level="INFO">Clarté: 1.0985748259625838 (seuil: 0.8)</msg>
<arg>Clarté: ${metrics['clarity']} (seuil: 0.8)</arg>
<doc>Logs the given message with the given level.</doc>
<status status="PASS" start="2025-06-11T11:31:19.560851" elapsed="0.000000"/>
</kw>
<kw name="Set Variable" owner="BuiltIn">
<msg time="2025-06-11T11:31:19.561860" level="FAIL">Resolving variable '${metrics['plot_file']}' failed: KeyError: 'plot_file'</msg>
<var>${plot_file}</var>
<arg>${metrics['plot_file']}</arg>
<doc>Returns the given values which can then be assigned to a variables.</doc>
<status status="FAIL" start="2025-06-11T11:31:19.560851" elapsed="0.001009">Resolving variable '${metrics['plot_file']}' failed: KeyError: 'plot_file'</status>
</kw>
<kw name="Log" owner="BuiltIn">
<arg>&lt;img src="${plot_file}" width="800px"/&gt;</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:31:19.561860" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<var>${snr_ok}</var>
<arg>${metrics['snr']} &gt;= 20</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="NOT RUN" start="2025-06-11T11:31:19.561860" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<var>${correlation_ok}</var>
<arg>${metrics['correlation']} &gt;= 0.9</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="NOT RUN" start="2025-06-11T11:31:19.561860" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<var>${mos_ok}</var>
<arg>${metrics['mos']} &gt;= 3.0</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="NOT RUN" start="2025-06-11T11:31:19.561860" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<var>${clarity_ok}</var>
<arg>${metrics['clarity']} &gt;= 0.8</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="NOT RUN" start="2025-06-11T11:31:19.561860" elapsed="0.000000"/>
</kw>
<kw name="Evaluate" owner="BuiltIn">
<var>${test_passed}</var>
<arg>${snr_ok} and ${correlation_ok} and ${mos_ok} and ${clarity_ok}</arg>
<doc>Evaluates the given expression in Python and returns the result.</doc>
<status status="NOT RUN" start="2025-06-11T11:31:19.561860" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="not ${test_passed}">
<kw name="Log" owner="BuiltIn">
<arg>❌ Test échoué - Métriques critiques non satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:31:19.562399" elapsed="0.000000"/>
</kw>
<kw name="Fail" owner="BuiltIn">
<arg>Test audio échoué - Vérifiez les métriques dans les logs</arg>
<doc>Fails the test with the given message and optionally alters its tags.</doc>
<status status="NOT RUN" start="2025-06-11T11:31:19.562399" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:31:19.562399" elapsed="0.000000"/>
</branch>
<branch type="ELSE">
<kw name="Log" owner="BuiltIn">
<arg>✅ Test réussi - Toutes les métriques sont satisfaites</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:31:19.562399" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:31:19.562399" elapsed="0.000000"/>
</branch>
<status status="NOT RUN" start="2025-06-11T11:31:19.562399" elapsed="0.000000"/>
</if>
<return>
<value>${test_passed}</value>
<value>${metrics}</value>
<status status="NOT RUN" start="2025-06-11T11:31:19.562399" elapsed="0.000000"/>
</return>
<arg>C:\\Users\\bahae\\Documents\\PfeProject\\test_cases${/}test.wav</arg>
<status status="FAIL" start="2025-06-11T11:30:45.547036" elapsed="34.015363">Resolving variable '${metrics['plot_file']}' failed: KeyError: 'plot_file'</status>
</kw>
<doc>Verifies audio recording and playback functionality
- Navigates to audio recording app
- Records audio for a specified duration
- Plays audio
- Supports both French and English interfaces</doc>
<tag>audio</tag>
<tag>playback</tag>
<tag>recording</tag>
<status status="FAIL" start="2025-06-11T11:30:18.805492" elapsed="60.756907">Resolving variable '${metrics['plot_file']}' failed: KeyError: 'plot_file'</status>
</test>
<kw name="Fermer Driver" type="TEARDOWN">
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Variable Should Exist" owner="BuiltIn">
<arg>${driver}</arg>
<doc>Fails unless the given variable exists within the current scope.</doc>
<status status="PASS" start="2025-06-11T11:31:19.563398" elapsed="0.000000"/>
</kw>
<msg time="2025-06-11T11:31:19.563398" level="INFO">${driver_exists} = True</msg>
<var>${driver_exists}</var>
<arg>Variable Should Exist</arg>
<arg>${driver}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:31:19.563398" elapsed="0.000000"/>
</kw>
<if>
<branch type="IF" condition="${driver_exists}">
<kw name="Run Keyword And Return Status" owner="BuiltIn">
<kw name="Close Driver" owner="Integration">
<arg>${driver}</arg>
<doc>Ferme proprement le driver Appium.</doc>
<status status="PASS" start="2025-06-11T11:31:19.563398" elapsed="0.128032"/>
</kw>
<msg time="2025-06-11T11:31:19.691430" level="INFO">${close_success} = True</msg>
<var>${close_success}</var>
<arg>Close Driver</arg>
<arg>${driver}</arg>
<doc>Runs the given keyword with given arguments and returns the status as a Boolean value.</doc>
<status status="PASS" start="2025-06-11T11:31:19.563398" elapsed="0.128032"/>
</kw>
<if>
<branch type="IF" condition="not ${close_success}">
<kw name="Log" owner="BuiltIn">
<arg>Warning: Impossible de fermer proprement le driver Appium</arg>
<doc>Logs the given message with the given level.</doc>
<status status="NOT RUN" start="2025-06-11T11:31:19.691430" elapsed="0.000000"/>
</kw>
<status status="NOT RUN" start="2025-06-11T11:31:19.691430" elapsed="0.000000"/>
</branch>
<status status="PASS" start="2025-06-11T11:31:19.691430" elapsed="0.000000"/>
</if>
<status status="PASS" start="2025-06-11T11:31:19.563398" elapsed="0.128032"/>
</branch>
<status status="PASS" start="2025-06-11T11:31:19.563398" elapsed="0.128032"/>
</if>
<status status="PASS" start="2025-06-11T11:31:19.562399" elapsed="0.129031"/>
</kw>
<doc>Tests for audio recording and playback functionality
- Verifies audio recording capabilities
- Verifies audio playback capabilities
- Supports both French and English interfaces</doc>
<status status="FAIL" start="2025-06-11T11:17:01.487122" elapsed="858.205309"/>
</suite>
<statistics>
<total>
<stat pass="1" fail="2" skip="0">All Tests</stat>
</total>
<tag>
<stat pass="0" fail="2" skip="0">audio</stat>
<stat pass="0" fail="2" skip="0">playback</stat>
<stat pass="0" fail="2" skip="0">recording</stat>
</tag>
<suite>
<stat name="TestsAudio" id="s1" pass="1" fail="2" skip="0">TestsAudio</stat>
</suite>
</statistics>
<errors>
</errors>
</robot>
